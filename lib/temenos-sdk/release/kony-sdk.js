String.prototype.startsWith||(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e}),function(){var e,n,t,o,r;Object.defineProperty(window,"kony",{configurable:!1,enumerable:!1,writable:!1,value:(e={},n=function(e,o){var r,i,a=0,s=o instanceof Array?o.length:0;for(a=0;a<s;a++)r=e,(i=o[a]).writable=t(i.writable),"function"==typeof i.value&&(i.value.toLocaleString=i.value.__proto__.toLocaleString,i.value.toSource=i.value.__proto__.toSource,i.value.toString=i.value.__proto__.toString),Object.defineProperty(r,i.keey,{configurable:!1,enumerable:!1,value:i.value,writable:i.writable}),i.items&&i.items.length&&n(i.value,i.items)},t=function(e){return"boolean"!=typeof e&&(e=!1),e},n(e,[{keey:"$kwebfw$",value:{},items:[{keey:"app",value:{},items:[{keey:"id",value:"",writable:!0}]},{keey:"behavior",value:{}},{keey:"defKonyProp",value:n},{keey:"defWritable",value:t},{keey:"device",value:{},items:[{keey:"DPI",value:1},{keey:"height",value:-1,writable:!0},{keey:"width",value:-1,writable:!0}]},{keey:"globals",value:{},items:[{keey:"kof",value:{},writable:!0}]}]}]),e)}),o=kony.$kwebfw$.app,r=null,"object"==typeof localStorage&&("string"==typeof(r=localStorage.getItem(o.id))&&r||(r={migrated:!0,store:[],ds:[],ns:{}},localStorage.setItem(o.id,JSON.stringify(r))))}();var CryptoJS=CryptoJS||function(e,n){var t={},o=t.lib={},r=function(){},i=o.Base={extend:function(e){r.prototype=this;var n=new r;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var n=this.words,t=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var r=0;r<e;r++)n[o+r>>>2]|=(t[r>>>2]>>>24-r%4*8&255)<<24-(o+r)%4*8;else if(65535<t.length)for(r=0;r<e;r+=4)n[o+r>>>2]=t[r>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],o=0;o<n;o+=4)t.push(4294967296*e.random()|0);return new a.init(t,n)}}),s=t.enc={},l=s.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],o=0;o<e;o++){var r=n[o>>>2]>>>24-o%4*8&255;t.push((r>>>4).toString(16)),t.push((15&r).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],o=0;o<n;o+=2)t[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(t,n/2)}},c=s.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],o=0;o<e;o++)t.push(String.fromCharCode(n[o>>>2]>>>24-o%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],o=0;o<n;o++)t[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(t,n)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},y=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,o=t.words,r=t.sigBytes,i=this.blockSize,s=r/(4*i);if(n=(s=n?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,r=e.min(4*n,r),n){for(var l=0;l<n;l+=i)this._doProcessBlock(o,l);l=o.splice(0,n),t.sigBytes-=r}return new a.init(l,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=y.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new p.HMAC.init(e,t).finalize(n)}}});var p=t.algo={};return t}(Math);!function(){var e=CryptoJS,n=e.lib.WordArray;e.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,o=this._map;e.clamp(),e=[];for(var r=0;r<t;r+=3)for(var i=(n[r>>>2]>>>24-r%4*8&255)<<16|(n[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|n[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<t;a++)e.push(o.charAt(i>>>6*(3-a)&63));if(n=o.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var t=e.length,o=this._map;(r=o.charAt(64))&&(-1!=(r=e.indexOf(r))&&(t=r));for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=o.indexOf(e.charAt(a-1))<<a%4*2,l=o.indexOf(e.charAt(a))>>>6-a%4*2;r[i>>>2]|=(s|l)<<24-i%4*8,i++}return n.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function n(e,n,t,o,r,i,a){return((e=e+(n&t|~n&o)+r+a)<<i|e>>>32-i)+n}function t(e,n,t,o,r,i,a){return((e=e+(n&o|t&~o)+r+a)<<i|e>>>32-i)+n}function o(e,n,t,o,r,i,a){return((e=e+(n^t^o)+r+a)<<i|e>>>32-i)+n}function r(e,n,t,o,r,i,a){return((e=e+(t^(n|~o))+r+a)<<i|e>>>32-i)+n}for(var i=CryptoJS,a=(l=i.lib).WordArray,s=l.Hasher,l=i.algo,c=[],u=0;64>u;u++)c[u]=4294967296*e.abs(e.sin(u+1))|0;l=l.MD5=s.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var a=0;16>a;a++){var s=e[l=i+a];e[l]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}a=this._hash.words;var l=e[i+0],u=(s=e[i+1],e[i+2]),y=e[i+3],p=e[i+4],d=e[i+5],f=e[i+6],k=e[i+7],g=e[i+8],_=e[i+9],v=e[i+10],h=e[i+11],E=e[i+12],T=e[i+13],S=e[i+14],w=e[i+15],b=n(b=a[0],I=a[1],O=a[2],m=a[3],l,7,c[0]),m=n(m,b,I,O,s,12,c[1]),O=n(O,m,b,I,u,17,c[2]),I=n(I,O,m,b,y,22,c[3]);b=n(b,I,O,m,p,7,c[4]),m=n(m,b,I,O,d,12,c[5]),O=n(O,m,b,I,f,17,c[6]),I=n(I,O,m,b,k,22,c[7]),b=n(b,I,O,m,g,7,c[8]),m=n(m,b,I,O,_,12,c[9]),O=n(O,m,b,I,v,17,c[10]),I=n(I,O,m,b,h,22,c[11]),b=n(b,I,O,m,E,7,c[12]),m=n(m,b,I,O,T,12,c[13]),O=n(O,m,b,I,S,17,c[14]),b=t(b,I=n(I,O,m,b,w,22,c[15]),O,m,s,5,c[16]),m=t(m,b,I,O,f,9,c[17]),O=t(O,m,b,I,h,14,c[18]),I=t(I,O,m,b,l,20,c[19]),b=t(b,I,O,m,d,5,c[20]),m=t(m,b,I,O,v,9,c[21]),O=t(O,m,b,I,w,14,c[22]),I=t(I,O,m,b,p,20,c[23]),b=t(b,I,O,m,_,5,c[24]),m=t(m,b,I,O,S,9,c[25]),O=t(O,m,b,I,y,14,c[26]),I=t(I,O,m,b,g,20,c[27]),b=t(b,I,O,m,T,5,c[28]),m=t(m,b,I,O,u,9,c[29]),O=t(O,m,b,I,k,14,c[30]),b=o(b,I=t(I,O,m,b,E,20,c[31]),O,m,d,4,c[32]),m=o(m,b,I,O,g,11,c[33]),O=o(O,m,b,I,h,16,c[34]),I=o(I,O,m,b,S,23,c[35]),b=o(b,I,O,m,s,4,c[36]),m=o(m,b,I,O,p,11,c[37]),O=o(O,m,b,I,k,16,c[38]),I=o(I,O,m,b,v,23,c[39]),b=o(b,I,O,m,T,4,c[40]),m=o(m,b,I,O,l,11,c[41]),O=o(O,m,b,I,y,16,c[42]),I=o(I,O,m,b,f,23,c[43]),b=o(b,I,O,m,_,4,c[44]),m=o(m,b,I,O,E,11,c[45]),O=o(O,m,b,I,w,16,c[46]),b=r(b,I=o(I,O,m,b,u,23,c[47]),O,m,l,6,c[48]),m=r(m,b,I,O,k,10,c[49]),O=r(O,m,b,I,S,15,c[50]),I=r(I,O,m,b,d,21,c[51]),b=r(b,I,O,m,E,6,c[52]),m=r(m,b,I,O,y,10,c[53]),O=r(O,m,b,I,v,15,c[54]),I=r(I,O,m,b,s,21,c[55]),b=r(b,I,O,m,g,6,c[56]),m=r(m,b,I,O,w,10,c[57]),O=r(O,m,b,I,f,15,c[58]),I=r(I,O,m,b,T,21,c[59]),b=r(b,I,O,m,p,6,c[60]),m=r(m,b,I,O,h,10,c[61]),O=r(O,m,b,I,u,15,c[62]),I=r(I,O,m,b,_,21,c[63]);a[0]=a[0]+b|0,a[1]=a[1]+I|0,a[2]=a[2]+O|0,a[3]=a[3]+m|0},_doFinalize:function(){var n=this._data,t=n.words,o=8*this._nDataBytes,r=8*n.sigBytes;t[r>>>5]|=128<<24-r%32;var i=e.floor(o/4294967296);for(t[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n.sigBytes=4*(t.length+1),this._process(),t=(n=this._hash).words,o=0;4>o;o++)r=t[o],t[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return n},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),i.MD5=s._createHelper(l),i.HmacMD5=s._createHmacHelper(l)}(Math),function(){var e,n=CryptoJS,t=(e=n.lib).Base,o=e.WordArray,r=(e=n.algo).EvpKDF=t.extend({cfg:t.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,n){for(var t=(s=this.cfg).hasher.create(),r=o.create(),i=r.words,a=s.keySize,s=s.iterations;i.length<a;){l&&t.update(l);var l=t.update(e).finalize(n);t.reset();for(var c=1;c<s;c++)l=t.finalize(l),t.reset();r.concat(l)}return r.sigBytes=4*a,r}});n.EvpKDF=function(e,n,t){return r.create(t).compute(e,n)}}(),CryptoJS.lib.Cipher||function(e){var n=(d=CryptoJS).lib,t=n.Base,o=n.WordArray,r=n.BufferedBlockAlgorithm,i=d.enc.Base64,a=d.algo.EvpKDF,s=n.Cipher=r.extend({cfg:t.extend(),createEncryptor:function(e,n){return this.create(this._ENC_XFORM_MODE,e,n)},createDecryptor:function(e,n){return this.create(this._DEC_XFORM_MODE,e,n)},init:function(e,n,t){this.cfg=this.cfg.extend(t),this._xformMode=e,this._key=n,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(n,t,o){return("string"==typeof t?f:p).encrypt(e,n,t,o)},decrypt:function(n,t,o){return("string"==typeof t?f:p).decrypt(e,n,t,o)}}}});n.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=d.mode={},c=function(e,n,t){var o=this._iv;o?this._iv=undefined:o=this._prevBlock;for(var r=0;r<t;r++)e[n+r]^=o[r]},u=(n.BlockCipherMode=t.extend({createEncryptor:function(e,n){return this.Encryptor.create(e,n)},createDecryptor:function(e,n){return this.Decryptor.create(e,n)},init:function(e,n){this._cipher=e,this._iv=n}})).extend();u.Encryptor=u.extend({processBlock:function(e,n){var t=this._cipher,o=t.blockSize;c.call(this,e,n,o),t.encryptBlock(e,n),this._prevBlock=e.slice(n,n+o)}}),u.Decryptor=u.extend({processBlock:function(e,n){var t=this._cipher,o=t.blockSize,r=e.slice(n,n+o);t.decryptBlock(e,n),c.call(this,e,n,o),this._prevBlock=r}}),l=l.CBC=u,u=(d.pad={}).Pkcs7={pad:function(e,n){for(var t,r=(t=(t=4*n)-e.sigBytes%t)<<24|t<<16|t<<8|t,i=[],a=0;a<t;a+=4)i.push(r);t=o.create(i,t),e.concat(t)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=s.extend({cfg:s.cfg.extend({mode:l,padding:u}),reset:function(){s.reset.call(this);var e=(n=this.cfg).iv,n=n.mode;if(this._xformMode==this._ENC_XFORM_MODE)var t=n.createEncryptor;else t=n.createDecryptor,this._minBufferSize=1;this._mode=t.call(n,this,e&&e.words)},_doProcessBlock:function(e,n){this._mode.processBlock(e,n)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var n=this._process(!0)}else n=this._process(!0),e.unpad(n);return n},blockSize:4});var y=n.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(l=(d.format={}).OpenSSL={stringify:function(e){var n=e.ciphertext;return((e=e.salt)?o.create([1398893684,1701076831]).concat(e).concat(n):n).toString(i)},parse:function(e){var n=(e=i.parse(e)).words;if(1398893684==n[0]&&1701076831==n[1]){var t=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return y.create({ciphertext:e,salt:t})}},n.SerializableCipher=t.extend({cfg:t.extend({format:l}),encrypt:function(e,n,t,o){o=this.cfg.extend(o);var r=e.createEncryptor(t,o);return n=r.finalize(n),r=r.cfg,y.create({ciphertext:n,key:t,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,n,t,o){return o=this.cfg.extend(o),n=this._parse(n,o.format),e.createDecryptor(t,o).finalize(n.ciphertext)},_parse:function(e,n){return"string"==typeof e?n.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,n,t,r){return r||(r=o.random(8)),e=a.create({keySize:n+t}).compute(e,r),t=o.create(e.words.slice(n),4*t),e.sigBytes=4*n,y.create({key:e,iv:t,salt:r})}},f=n.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(e,n,t,o){return t=(o=this.cfg.extend(o)).kdf.execute(t,e.keySize,e.ivSize),o.iv=t.iv,(e=p.encrypt.call(this,e,n,t.key,o)).mixIn(t),e},decrypt:function(e,n,t,o){return o=this.cfg.extend(o),n=this._parse(n,o.format),t=o.kdf.execute(t,e.keySize,e.ivSize,n.salt),o.iv=t.iv,p.decrypt.call(this,e,n,t.key,o)}})}(),function(){for(var e=CryptoJS,n=e.lib.BlockCipher,t=e.algo,o=[],r=[],i=[],a=[],s=[],l=[],c=[],u=[],y=[],p=[],d=[],f=0;256>f;f++)d[f]=128>f?f<<1:f<<1^283;var k=0,g=0;for(f=0;256>f;f++){var _=(_=g^g<<1^g<<2^g<<3^g<<4)>>>8^255&_^99;o[k]=_,r[_]=k;var v=d[k],h=d[v],E=d[h],T=257*d[_]^16843008*_;i[k]=T<<24|T>>>8,a[k]=T<<16|T>>>16,s[k]=T<<8|T>>>24,l[k]=T,T=16843009*E^65537*h^257*v^16843008*k,c[_]=T<<24|T>>>8,u[_]=T<<16|T>>>16,y[_]=T<<8|T>>>24,p[_]=T,k?(k=v^d[d[d[E^v]]],g^=d[d[g]]):k=g=1}var S=[0,1,2,4,8,16,32,64,128,27,54];t=t.AES=n.extend({_doReset:function(){for(var e=(t=this._key).words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],i=0;i<t;i++)if(i<n)r[i]=e[i];else{var a=r[i-1];i%n?6<n&&4==i%n&&(a=o[a>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a]):(a=o[(a=a<<8|a>>>24)>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a],a^=S[i/n|0]<<24),r[i]=r[i-n]^a}for(e=this._invKeySchedule=[],n=0;n<t;n++)i=t-n,a=n%4?r[i]:r[i-4],e[n]=4>n||4>=i?a:c[o[a>>>24]]^u[o[a>>>16&255]]^y[o[a>>>8&255]]^p[o[255&a]]},encryptBlock:function(e,n){this._doCryptBlock(e,n,this._keySchedule,i,a,s,l,o)},decryptBlock:function(e,n){var t=e[n+1];e[n+1]=e[n+3],e[n+3]=t,this._doCryptBlock(e,n,this._invKeySchedule,c,u,y,p,r),t=e[n+1],e[n+1]=e[n+3],e[n+3]=t},_doCryptBlock:function(e,n,t,o,r,i,a,s){for(var l=this._nRounds,c=e[n]^t[0],u=e[n+1]^t[1],y=e[n+2]^t[2],p=e[n+3]^t[3],d=4,f=1;f<l;f++){var k=o[c>>>24]^r[u>>>16&255]^i[y>>>8&255]^a[255&p]^t[d++],g=o[u>>>24]^r[y>>>16&255]^i[p>>>8&255]^a[255&c]^t[d++],_=o[y>>>24]^r[p>>>16&255]^i[c>>>8&255]^a[255&u]^t[d++];p=o[p>>>24]^r[c>>>16&255]^i[u>>>8&255]^a[255&y]^t[d++],c=k,u=g,y=_}k=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[y>>>8&255]<<8|s[255&p])^t[d++],g=(s[u>>>24]<<24|s[y>>>16&255]<<16|s[p>>>8&255]<<8|s[255&c])^t[d++],_=(s[y>>>24]<<24|s[p>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^t[d++],p=(s[p>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&y])^t[d++],e[n]=k,e[n+1]=g,e[n+2]=_,e[n+3]=p},keySize:8});e.AES=n._createHelper(t)}(),function(){var e=CryptoJS,n=e.lib,t=n.WordArray,o=n.BlockCipher,r=e.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=r.DES=o.extend({_doReset:function(){for(var e=this._key.words,n=[],t=0;t<56;t++){var o=i[t]-1;n[t]=e[o>>>5]>>>31-o%32&1}for(var r=this._subKeys=[],l=0;l<16;l++){var c=r[l]=[],u=s[l];for(t=0;t<24;t++)c[t/6|0]|=n[(a[t]-1+u)%28]<<31-t%6,c[4+(t/6|0)]|=n[28+(a[t+24]-1+u)%28]<<31-t%6;c[0]=c[0]<<1|c[0]>>>31;for(t=1;t<7;t++)c[t]=c[t]>>>4*(t-1)+3;c[7]=c[7]<<5|c[7]>>>27}var y=this._invSubKeys=[];for(t=0;t<16;t++)y[t]=r[15-t]},encryptBlock:function(e,n){this._doCryptBlock(e,n,this._subKeys)},decryptBlock:function(e,n){this._doCryptBlock(e,n,this._invSubKeys)},_doCryptBlock:function(e,n,t){this._lBlock=e[n],this._rBlock=e[n+1],y.call(this,4,252645135),y.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),y.call(this,1,1431655765);for(var o=0;o<16;o++){for(var r=t[o],i=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=l[u][((a^r[u])&c[u])>>>0];this._lBlock=a,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,y.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),y.call(this,16,65535),y.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function y(e,n){var t=(this._lBlock>>>e^this._rBlock)&n;this._rBlock^=t,this._lBlock^=t<<e}function p(e,n){var t=(this._rBlock>>>e^this._lBlock)&n;this._lBlock^=t,this._rBlock^=t<<e}e.DES=o._createHelper(u);var d=r.TripleDES=o.extend({_doReset:function(){var e=this._key.words;this._des1=u.createEncryptor(t.create(e.slice(0,2))),this._des2=u.createEncryptor(t.create(e.slice(2,4))),this._des3=u.createEncryptor(t.create(e.slice(4,6)))},encryptBlock:function(e,n){this._des1.encryptBlock(e,n),this._des2.decryptBlock(e,n),this._des3.encryptBlock(e,n)},decryptBlock:function(e,n){this._des3.decryptBlock(e,n),this._des2.encryptBlock(e,n),this._des1.decryptBlock(e,n)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(d)}(),function(e){var n=CryptoJS,t=n.lib,o=t.WordArray,r=t.Hasher,i=n.algo,a=[];!function(){for(var n=0;n<64;n++)a[n]=4294967296*e.abs(e.sin(n+1))|0}();var s=i.MD5=r.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var t=0;t<16;t++){var o=n+t,r=e[o];e[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var i=this._hash.words,s=e[n+0],p=e[n+1],d=e[n+2],f=e[n+3],k=e[n+4],g=e[n+5],_=e[n+6],v=e[n+7],h=e[n+8],E=e[n+9],T=e[n+10],S=e[n+11],w=e[n+12],b=e[n+13],m=e[n+14],O=e[n+15],I=i[0],A=i[1],R=i[2],C=i[3];I=l(I,A,R,C,s,7,a[0]),C=l(C,I,A,R,p,12,a[1]),R=l(R,C,I,A,d,17,a[2]),A=l(A,R,C,I,f,22,a[3]),I=l(I,A,R,C,k,7,a[4]),C=l(C,I,A,R,g,12,a[5]),R=l(R,C,I,A,_,17,a[6]),A=l(A,R,C,I,v,22,a[7]),I=l(I,A,R,C,h,7,a[8]),C=l(C,I,A,R,E,12,a[9]),R=l(R,C,I,A,T,17,a[10]),A=l(A,R,C,I,S,22,a[11]),I=l(I,A,R,C,w,7,a[12]),C=l(C,I,A,R,b,12,a[13]),R=l(R,C,I,A,m,17,a[14]),I=c(I,A=l(A,R,C,I,O,22,a[15]),R,C,p,5,a[16]),C=c(C,I,A,R,_,9,a[17]),R=c(R,C,I,A,S,14,a[18]),A=c(A,R,C,I,s,20,a[19]),I=c(I,A,R,C,g,5,a[20]),C=c(C,I,A,R,T,9,a[21]),R=c(R,C,I,A,O,14,a[22]),A=c(A,R,C,I,k,20,a[23]),I=c(I,A,R,C,E,5,a[24]),C=c(C,I,A,R,m,9,a[25]),R=c(R,C,I,A,f,14,a[26]),A=c(A,R,C,I,h,20,a[27]),I=c(I,A,R,C,b,5,a[28]),C=c(C,I,A,R,d,9,a[29]),R=c(R,C,I,A,v,14,a[30]),I=u(I,A=c(A,R,C,I,w,20,a[31]),R,C,g,4,a[32]),C=u(C,I,A,R,h,11,a[33]),R=u(R,C,I,A,S,16,a[34]),A=u(A,R,C,I,m,23,a[35]),I=u(I,A,R,C,p,4,a[36]),C=u(C,I,A,R,k,11,a[37]),R=u(R,C,I,A,v,16,a[38]),A=u(A,R,C,I,T,23,a[39]),I=u(I,A,R,C,b,4,a[40]),C=u(C,I,A,R,s,11,a[41]),R=u(R,C,I,A,f,16,a[42]),A=u(A,R,C,I,_,23,a[43]),I=u(I,A,R,C,E,4,a[44]),C=u(C,I,A,R,w,11,a[45]),R=u(R,C,I,A,O,16,a[46]),I=y(I,A=u(A,R,C,I,d,23,a[47]),R,C,s,6,a[48]),C=y(C,I,A,R,v,10,a[49]),R=y(R,C,I,A,m,15,a[50]),A=y(A,R,C,I,g,21,a[51]),I=y(I,A,R,C,w,6,a[52]),C=y(C,I,A,R,f,10,a[53]),R=y(R,C,I,A,T,15,a[54]),A=y(A,R,C,I,p,21,a[55]),I=y(I,A,R,C,h,6,a[56]),C=y(C,I,A,R,O,10,a[57]),R=y(R,C,I,A,_,15,a[58]),A=y(A,R,C,I,b,21,a[59]),I=y(I,A,R,C,k,6,a[60]),C=y(C,I,A,R,S,10,a[61]),R=y(R,C,I,A,d,15,a[62]),A=y(A,R,C,I,E,21,a[63]),i[0]=i[0]+I|0,i[1]=i[1]+A|0,i[2]=i[2]+R|0,i[3]=i[3]+C|0},_doFinalize:function(){var n=this._data,t=n.words,o=8*this._nDataBytes,r=8*n.sigBytes;t[r>>>5]|=128<<24-r%32;var i=e.floor(o/4294967296),a=o;t[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n.sigBytes=4*(t.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,n,t,o,r,i,a){var s=e+(n&t|~n&o)+r+a;return(s<<i|s>>>32-i)+n}function c(e,n,t,o,r,i,a){var s=e+(n&o|t&~o)+r+a;return(s<<i|s>>>32-i)+n}function u(e,n,t,o,r,i,a){var s=e+(n^t^o)+r+a;return(s<<i|s>>>32-i)+n}function y(e,n,t,o,r,i,a){var s=e+(t^(n|~o))+r+a;return(s<<i|s>>>32-i)+n}n.MD5=r._createHelper(s),n.HmacMD5=r._createHmacHelper(s)}(Math),function(e){var n=CryptoJS,t=n.lib,o=t.Base,r=t.WordArray,i=n.x64={};i.Word=o.extend({init:function(e,n){this.high=e,this.low=n}}),i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:8*e.length},toX32:function(){for(var e=this.words,n=e.length,t=[],o=0;o<n;o++){var i=e[o];t.push(i.high),t.push(i.low)}return r.create(t,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),n=e.words=this.words.slice(0),t=n.length,r=0;r<t;r++)n[r]=n[r].clone();return e}})}(),function(){var e=CryptoJS,n=e.lib,t=n.WordArray,o=n.Hasher,r=e.algo,i=[],a=r.SHA1=o.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,n){for(var t=this._hash.words,o=t[0],r=t[1],a=t[2],s=t[3],l=t[4],c=0;c<80;c++){if(c<16)i[c]=0|e[n+c];else{var u=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=u<<1|u>>>31}var y=(o<<5|o>>>27)+l+i[c];y+=c<20?1518500249+(r&a|~r&s):c<40?1859775393+(r^a^s):c<60?(r&a|r&s|a&s)-1894007588:(r^a^s)-899497514,l=s,s=a,a=r<<30|r>>>2,r=o,o=y}t[0]=t[0]+o|0,t[1]=t[1]+r|0,t[2]=t[2]+a|0,t[3]=t[3]+s|0,t[4]=t[4]+l|0},_doFinalize:function(){var e=this._data,n=e.words,t=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=Math.floor(t/4294967296),n[15+(o+64>>>9<<4)]=t,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)}(),function(e){var n=CryptoJS,t=n.lib,o=t.WordArray,r=t.Hasher,i=n.algo,a=[],s=[];!function(){function n(n){for(var t=e.sqrt(n),o=2;o<=t;o++)if(!(n%o))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var o=2,r=0;r<64;)n(o)&&(r<8&&(a[r]=t(e.pow(o,.5))),s[r]=t(e.pow(o,1/3)),r++),o++}();var l=[],c=i.SHA256=r.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,o=t[0],r=t[1],i=t[2],a=t[3],c=t[4],u=t[5],y=t[6],p=t[7],d=0;d<64;d++){if(d<16)l[d]=0|e[n+d];else{var f=l[d-15],k=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=l[d-2],_=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[d]=k+l[d-7]+_+l[d-16]}var v=o&r^o&i^r&i,h=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),E=p+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&y)+s[d]+l[d];p=y,y=u,u=c,c=a+E|0,a=i,i=r,r=o,o=E+(h+v)|0}t[0]=t[0]+o|0,t[1]=t[1]+r|0,t[2]=t[2]+i|0,t[3]=t[3]+a|0,t[4]=t[4]+c|0,t[5]=t[5]+u|0,t[6]=t[6]+y|0,t[7]=t[7]+p|0},_doFinalize:function(){var n=this._data,t=n.words,o=8*this._nDataBytes,r=8*n.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=e.floor(o/4294967296),t[15+(r+64>>>9<<4)]=o,n.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=r._createHelper(c),n.HmacSHA256=r._createHmacHelper(c)}(Math),function(){var e=CryptoJS,n=e.lib.Hasher,t=e.x64,o=t.Word,r=t.WordArray,i=e.algo;function a(){return o.create.apply(o,arguments)}var s=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=a()}();var c=i.SHA512=n.extend({_doReset:function(){this._hash=new r.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,n){for(var t=this._hash.words,o=t[0],r=t[1],i=t[2],a=t[3],c=t[4],u=t[5],y=t[6],p=t[7],d=o.high,f=o.low,k=r.high,g=r.low,_=i.high,v=i.low,h=a.high,E=a.low,T=c.high,S=c.low,w=u.high,b=u.low,m=y.high,O=y.low,I=p.high,A=p.low,R=d,C=f,N=k,P=g,D=_,L=v,B=h,x=E,H=T,M=S,U=w,$=b,G=m,j=O,W=I,F=A,K=0;K<80;K++){var Y=l[K];if(K<16)var q=Y.high=0|e[n+2*K],V=Y.low=0|e[n+2*K+1];else{var J=l[K-15],X=J.high,z=J.low,Q=(X>>>1|z<<31)^(X>>>8|z<<24)^X>>>7,Z=(z>>>1|X<<31)^(z>>>8|X<<24)^(z>>>7|X<<25),ee=l[K-2],ne=ee.high,te=ee.low,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^ne>>>6,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^(te>>>6|ne<<26),ie=l[K-7],ae=ie.high,se=ie.low,le=l[K-16],ce=le.high,ue=le.low;q=(q=(q=Q+ae+((V=Z+se)>>>0<Z>>>0?1:0))+oe+((V=V+re)>>>0<re>>>0?1:0))+ce+((V=V+ue)>>>0<ue>>>0?1:0);Y.high=q,Y.low=V}var ye,pe=H&U^~H&G,de=M&$^~M&j,fe=R&N^R&D^N&D,ke=C&P^C&L^P&L,ge=(R>>>28|C<<4)^(R<<30|C>>>2)^(R<<25|C>>>7),_e=(C>>>28|R<<4)^(C<<30|R>>>2)^(C<<25|R>>>7),ve=(H>>>14|M<<18)^(H>>>18|M<<14)^(H<<23|M>>>9),he=(M>>>14|H<<18)^(M>>>18|H<<14)^(M<<23|H>>>9),Ee=s[K],Te=Ee.high,Se=Ee.low,we=W+ve+((ye=F+he)>>>0<F>>>0?1:0),be=_e+ke;W=G,F=j,G=U,j=$,U=H,$=M,H=B+(we=(we=(we=we+pe+((ye=ye+de)>>>0<de>>>0?1:0))+Te+((ye=ye+Se)>>>0<Se>>>0?1:0))+q+((ye=ye+V)>>>0<V>>>0?1:0))+((M=x+ye|0)>>>0<x>>>0?1:0)|0,B=D,x=L,D=N,L=P,N=R,P=C,R=we+(ge+fe+(be>>>0<_e>>>0?1:0))+((C=ye+be|0)>>>0<ye>>>0?1:0)|0}f=o.low=f+C,o.high=d+R+(f>>>0<C>>>0?1:0),g=r.low=g+P,r.high=k+N+(g>>>0<P>>>0?1:0),v=i.low=v+L,i.high=_+D+(v>>>0<L>>>0?1:0),E=a.low=E+x,a.high=h+B+(E>>>0<x>>>0?1:0),S=c.low=S+M,c.high=T+H+(S>>>0<M>>>0?1:0),b=u.low=b+$,u.high=w+U+(b>>>0<$>>>0?1:0),O=y.low=O+j,y.high=m+G+(O>>>0<j>>>0?1:0),A=p.low=A+F,p.high=I+W+(A>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,n=e.words,t=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[30+(o+128>>>10<<5)]=Math.floor(t/4294967296),n[31+(o+128>>>10<<5)]=t,e.sigBytes=4*n.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=n._createHelper(c),e.HmacSHA512=n._createHmacHelper(c)}(),CryptoJS.mode.CFB=function(){var e=CryptoJS.lib.BlockCipherMode.extend();function n(e,n,t,o){var r=this._iv;if(r){var i=r.slice(0);this._iv=void 0}else i=this._prevBlock;o.encryptBlock(i,0);for(var a=0;a<t;a++)e[n+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize;n.call(this,e,t,r,o),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var o=this._cipher,r=o.blockSize,i=e.slice(t,t+r);n.call(this,e,t,r,o),this._prevBlock=i}}),e}(),CryptoJS.mode.ECB=function(){var e=CryptoJS.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,n){this._cipher.encryptBlock(e,n)}}),e.Decryptor=e.extend({processBlock:function(e,n){this._cipher.decryptBlock(e,n)}}),e}(),CryptoJS.mode.OFB=function(){var e=CryptoJS.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,n){var t=this._cipher,o=t.blockSize,r=this._iv,i=this._keystream;r&&(i=this._keystream=r.slice(0),this._iv=void 0),t.encryptBlock(i,0);for(var a=0;a<o;a++)e[n+a]^=i[a]}});return e.Decryptor=n,e}(),CryptoJS.mode.CTR=function(){var e=CryptoJS.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(e,n){var t=this._cipher,o=t.blockSize,r=this._iv,i=this._counter;r&&(i=this._counter=r.slice(0),this._iv=void 0);var a=i.slice(0);t.encryptBlock(a,0),i[o-1]=i[o-1]+1|0;for(var s=0;s<o;s++)e[n+s]^=a[s]}});return e.Decryptor=n,e}(),CryptoJS.pad.ZeroPadding={pad:function(e,n){var t=4*n;e.clamp(),e.sigBytes+=t-(e.sigBytes%t||t)},unpad:function(e){for(var n=e.words,t=e.sigBytes-1;!(n[t>>>2]>>>24-t%4*8&255);)t--;e.sigBytes=t+1}},CryptoJS.pad.NoPadding={pad:function(){},unpad:function(){}},CryptoJS.pad.Iso97971={pad:function(e,n){e.concat(CryptoJS.lib.WordArray.create([2147483648],1)),CryptoJS.pad.ZeroPadding.pad(e,n)},unpad:function(e){CryptoJS.pad.ZeroPadding.unpad(e),e.sigBytes--}},CryptoJS.pad.Iso10126={pad:function(e,n){var t=4*n,o=t-e.sigBytes%t;e.concat(CryptoJS.lib.WordArray.random(o-1)).concat(CryptoJS.lib.WordArray.create([o<<24],1))},unpad:function(e){var n=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=n}},function(){var e=CryptoJS,n=e.lib.Base,t=e.enc.Utf8;e.algo.HMAC=n.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var o=e.blockSize,r=4*o;n.sigBytes>r&&(n=e.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),a=this._iKey=n.clone(),s=i.words,l=a.words,c=0;c<o;c++)s[c]^=1549556828,l[c]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher,t=n.finalize(e);return n.reset(),n.finalize(this._oKey.clone().concat(t))}})}(),function(){var e=CryptoJS,n=e.lib,t=n.Base,o=n.WordArray,r=e.algo,i=r.SHA1,a=r.HMAC,s=r.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,n){for(var t=this.cfg,r=a.create(t.hasher,e),i=o.create(),s=o.create([1]),l=i.words,c=s.words,u=t.keySize,y=t.iterations;l.length<u;){var p=r.update(n).finalize(s);r.reset();for(var d=p.words,f=d.length,k=p,g=1;g<y;g++){k=r.finalize(k),r.reset();for(var _=k.words,v=0;v<f;v++)d[v]^=_[v]}i.concat(p),c[0]++}return i.sigBytes=4*u,i}});e.PBKDF2=function(e,n,t){return s.create(t).compute(e,n)}}(),kony.$kwebfw$.defKonyProp(kony,[{keey:"convertToBase64",value:function(e){var n,t,o,r,i,a=kony.$kwebfw$.utils,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,c=0,u="",y=[];if(a.log({api:"kony.convertToBase64",enter:!0}),e)if("btoa"in window)u=window.btoa(unescape(encodeURIComponent(e)));else{do{n=(i=(255&e.charCodeAt(l++))<<16|(255&e.charCodeAt(l++))<<8|255&e.charCodeAt(l++))>>18&63,t=i>>12&63,o=i>>6&63,r=63&i,y[c++]=s.charAt(n)+s.charAt(t)+s.charAt(o)+s.charAt(r)}while(l<e.length);switch(u=y.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}}else u=e;return a.log({api:"kony.convertToBase64",exit:!0}),u}},{keey:"print",value:function(e){console&&"function"==typeof console.log&&"true"!==constants.PRINTSTUB&&("string"==typeof e||"number"==typeof e||"boolean"==typeof e||null==e?console.log(e):"object"==typeof e&&e&&(JSON?console.log(JSON.stringify(e)):"function"==typeof e.toString&&console.log(e.toString())))}},{keey:"type",value:function(e){var n=kony.$kwebfw$,t=n.utils,o=n.widget,r="";return t.log({api:"kony.type",enter:!0}),r=t.is(e,"string")?"string":t.is(e,"number")?"number":t.is(e,"function")?"function":t.is(e,"null")?"null":t.is(e,"widget")&&(e=o.proxy(e))?e._kwebfw_.ns:"userdata",t.log({api:"kony.type",exit:!0}),r}}]),Object.defineProperty(kony,"application",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={};return kony.$kwebfw$.defKonyProp(e,[{keey:"addApplicationCallbacks",value:function(){}},{keey:"getBaseURL",value:function(){var e=kony.$kwebfw$.utils;return e.log({api:"kony.application.getBaseURL",enter:!0}),e.log({api:"kony.application.getBaseURL",exit:!0}),window.location.host+window.location.pathname}},{keey:"getBrowserProtocol",value:function(){var e=kony.$kwebfw$.utils;return e.log({api:"kony.application.getBrowserProtocol",enter:!0}),e.log({api:"kony.application.getBrowserProtocol",exit:!0}),window.location.protocol}},{keey:"getCurrentForm",value:function(){}},{keey:"openURLAsync",value:function(e){var n=kony.$kwebfw$.utils;return n.log({api:"kony.application.openURLAsync",enter:!0}),!0===e.isSameWindow?window.open(e.url,"_self"):!1===e.isSameWindow?window.open(e.url,"_blank"):(window.open(e.url,"_blank"),n.is(e.callback,"function")&&e.callback(constants.OPEN_URL_UNKNOWN),void n.log({api:"kony.application.openURLAsync",exit:!0}))}},{keey:"removeQueryParamsByKey",value:function(e){var n,t,o,r,i,a,s=kony.$kwebfw$.utils;if(s.log({api:"kony.application.removeQueryParamsByKey",enter:!0}),window.location.search.length>0){for(n=window.location.href.split("?")[0],t=window.location.href.split("?")[1].split("#")[1],"",i=(o=window.location.search.slice(1).split("&")).length-1;i>=0;i--)-1!==o[i].indexOf(e)&&o.splice(i,1);r=o.join("&"),a=t?0===o.length?n+"#"+t:n+"?"+r+"#"+t:0===o.length?n:n+"?"+r,history.replaceState(null,"",a)}s.log({api:"kony.application.removeQueryParamsByKey",exit:!0})}},{keey:"setApplicationInitializationEvents",value:function(e){},writable:!0}]),e}()}),Object.defineProperty(window,"constants",{configurable:!1,enumerable:!1,writable:!0,value:function(){var e={};return kony.$kwebfw$.defKonyProp(e,[{keey:"ALERT_TYPE_CONFIRMATION",value:"confirmation"},{keey:"ALERT_TYPE_ERROR",value:"error"},{keey:"ALERT_TYPE_INFO",value:"info"},{keey:"API_LEVEL",value:"APILevel"},{keey:"API_LEVEL_8200",value:8200},{keey:"API_LEVEL_8300",value:8300},{keey:"API_LEVEL_8400",value:8400},{keey:"API_LEVEL_9200",value:9200},{keey:"APPLICATION_MODE_HYBRID",value:"hybrid"},{keey:"APPLICATION_MODE_NATIVE",value:"native"},{keey:"APPLICATION_MODE_WRAPPER",value:"wrapper"},{keey:"BREAKPOINT_MAX_VALUE",value:Number.MAX_VALUE},{keey:"BROWSER_REQUEST_METHOD_GET",value:"get"},{keey:"BROWSER_REQUEST_METHOD_POST",value:"post"},{keey:"CALENDAR_DATE_FORMAT_DEFAULT",value:"dd/MM/yyyy"},{keey:"CALENDAR_ICON_ALIGN_AUTO",value:"auto"},{keey:"CALENDAR_ICON_ALIGN_LEFT",value:"left"},{keey:"CALENDAR_ICON_ALIGN_RIGHT",value:"right"},{keey:"CALENDAR_SELECTION_TYPE_MULTI_SELECT",value:"multiselect"},{keey:"CALENDAR_SELECTION_TYPE_RANGE_SELECT",value:"rangeselect"},{keey:"CALENDAR_SELECTION_TYPE_SINGLE_SELECT",value:"singleselect"},{keey:"CALENDAR_VIEW_TYPE_DEFAULT",value:"default"},{keey:"CALENDAR_VIEW_TYPE_GRID_ONSCREEN",value:"onscreen"},{keey:"CALENDAR_VIEW_TYPE_GRID_POPUP",value:"popup"},{keey:"CAMERA_CAPTURE_FAILED",value:"capturefailed"},{keey:"CAMERA_NOT_SUPPORTED",value:"notsupported"},{keey:"CAMERA_PERMISSION_DENIED",value:"permissiondenied"},{keey:"CAMERA_SOURCE_DEFAULT",value:"front"},{keey:"CAMERA_SOURCE_FRONT",value:"front"},{keey:"CAMERA_SOURCE_FRONT_UNAVAILABLE",value:"frontunavailable"},{keey:"CAMERA_SOURCE_REAR",value:"rear"},{keey:"CAMERA_SOURCE_REAR_UNAVAILABLE",value:"rearunavailable"},{keey:"CAMERA_VIDEO_RECORDING_FAILED",value:"recordingfailed"},{keey:"CHECKBOX_ITEM_ORIENTATION_HORIZONTAL",value:"horizontal"},{keey:"CHECKBOX_ITEM_ORIENTATION_VERTICAL",value:"vertical"},{keey:"CHECKBOX_VIEW_TYPE_CUSTOMVIEW",value:"customview"},{keey:"CHECKBOX_VIEW_TYPE_DEFAULTTVIEW",value:"defaultview"},{keey:"CHECKBOX_VIEW_TYPE_LISTVIEW",value:"listview"},{keey:"CHECKBOX_VIEW_TYPE_ONSCREENWHEEL",value:"onscreenwheel"},{keey:"CHECKBOX_VIEW_TYPE_TABLEVIEW",value:"tableview"},{keey:"CHECKBOX_VIEW_TYPE_TOGGLEVIEW",value:"toggleview"},{keey:"CONTENT_ALIGN_BOTTOM_CENTER",value:"bottomcenter"},{keey:"CONTENT_ALIGN_BOTTOM_LEFT",value:"bottomleft"},{keey:"CONTENT_ALIGN_BOTTOM_RIGHT",value:"bottomright"},{keey:"CONTENT_ALIGN_MIDDLE_LEFT",value:"middleleft"},{keey:"CONTENT_ALIGN_MIDDLE_RIGHT",value:"middleright"},{keey:"CONTENT_ALIGN_TOP_CENTER",value:"topcenter"},{keey:"CONTENT_ALIGN_TOP_LEFT",value:"topleft"},{keey:"CONTENT_ALIGN_TOP_RIGHT",value:"topright"},{keey:"CONTENT_ALIGN_CENTER",value:"middlecenter"},{keey:"DATAGRID_COLUMN_TYPE_IMAGE",value:"image"},{keey:"DATAGRID_COLUMN_TYPE_TEMPLATE",value:"template"},{keey:"DATAGRID_COLUMN_TYPE_TEXT",value:"text"},{keey:"DATAGRID_SCROLLBAR_NONE",value:"none"},{keey:"DATAGRID_SCROLLBAR_VERTICAL",value:"vertical"},{keey:"DEVICE_ORIENTATION_LANDSCAPE",value:"landscape"},{keey:"DEVICE_ORIENTATION_PORTRAIT",value:"portrait"},{keey:"DEVICE_OSNAME_ANDROID",value:"android"},{keey:"DEVICE_OSNAME_ANDROIDTABLET",value:"androidtablet"},{keey:"DEVICE_OSNAME_IPHONE",value:"iPhone"},{keey:"DEVICE_OSNAME_IPAD",value:"iPad"},{keey:"DEVICE_OSNAME_MACINTOSH",value:"Macintosh"},{keey:"DEVICE_OSNAME_WINDOWS",value:"windows"},{keey:"DEVICE_OSNAME_WINDOWSTABLET",value:"windowstablet"},{keey:"DEVICE_OSNAME_WINDOWPHONE",value:"windowsphone"},{keey:"DEVICE_OSNAME_LINUX",value:"Linux"},{keey:"FILE_UPLOAD_COMPLETE_STATE",value:"complete"},{keey:"FILE_UPLOAD_ERROR_STATE",value:"error"},{keey:"FILE_UPLOAD_PROGRESS_STATE",value:"progress"},{keey:"FILE_UPLOAD_START_STATE",value:"start"},{keey:"FORM_ADJUST_RESIZE",value:"resize"},{keey:"FORM_ADJUST_PAN",value:"pan"},{keey:"FORM_DEVICE_ORIENTATION_LANDSCAPE",value:"landscape"},{keey:"FORM_DEVICE_ORIENTATION_PORTRAIT",value:"portrait"},{keey:"FORM_DISPLAY_ORIENTATION_BOTH",value:"both"},{keey:"FORM_DISPLAY_ORIENTATION_LANDSCAPE",value:"landscape"},{keey:"FORM_DISPLAY_ORIENTATION_PORTRAIT",value:"portrait"},{keey:"FORM_FORWARD_NAVIGATION",value:"forward"},{keey:"FORM_TYPE_DYNAMIC",value:"dynamic"},{keey:"FORM_TYPE_NATIVE",value:"native"},{keey:"FORM_TYPE_STATIC",value:"static"},{keey:"GESTURE_TYPE_LONGPRESS",value:"longpress"},{keey:"GESTURE_TYPE_PAN",value:"pan"},{keey:"GESTURE_TYPE_PINCH",value:"pinch"},{keey:"GESTURE_TYPE_ROTATION",value:"rotation"},{keey:"GESTURE_TYPE_SWIPE",value:"swipe"},{keey:"GESTURE_TYPE_TAP",value:"tap"},{keey:"HTTP_INTEGRITY_CHECK_FAILED",value:2},{keey:"HTTP_INTEGRITY_CHECK_NOT_DONE",value:0},{keey:"HTTP_INTEGRITY_CHECK_SUCCESSFUL",value:1},{keey:"HTTP_METHOD_GET",value:"get"},{keey:"HTTP_METHOD_POST",value:"post"},{keey:"HTTP_RESPONSE_TYPE_ARRAYBUFFER",value:"arraybuffer"},{keey:"HTTP_RESPONSE_TYPE_BLOB",value:"blob"},{keey:"HTTP_RESPONSE_TYPE_DOCUMENT",value:"document"},{keey:"HTTP_RESPONSE_TYPE_JSON",value:"json"},{keey:"HTTP_RESPONSE_TYPE_RAWDATA",value:"image/png"},{keey:"HTTP_RESPONSE_TYPE_TEXT",value:"text"},{keey:"HTTP_READY_STATE_DONE",value:"done"},{keey:"HTTP_READY_STATE_HEADERS_RECEIVED",value:"headersreceived"},{keey:"HTTP_READY_STATE_LOADING",value:"loading"},{keey:"HTTP_READY_STATE_OPENED",value:"opened"},{keey:"HTTP_READY_STATE_UNSENT",value:"unsent"},{keey:"IMAGE_GALLERY_VIEW_TYPE_PAGEVIEW",value:"pageview"},{keey:"IMAGE_GLOSSY_EFFECT_DEFAULT",value:"default"},{keey:"IMAGE_GLOSSY_EFFECT_LINEAR",value:"linear"},{keey:"IMAGE_GLOSSY_EFFECT_RADIAL",value:"radial"},{keey:"IMAGE_SCALE_MODE_CROP",value:"crop"},{keey:"IMAGE_SCALE_MODE_FIT_TO_DIMENSIONS",value:"fittodimensions"},{keey:"IMAGE_SCALE_MODE_MAINTAIN_ASPECT_RATIO",value:"maintainaspectratio"},{keey:"LISTBOX_VIEW_TYPE_EDITVIEW",value:"editableview"},{keey:"LISTBOX_VIEW_TYPE_LISTVIEW",value:"listview"},{keey:"LISTBOX_VIEW_TYPE_ONSCREENWHEEL",value:"onscreenwheel"},{keey:"LISTBOX_VIEW_TYPE_TABLEVIEW",value:"tableview"},{keey:"LISTBOX_VIEW_TYPE_TOGGLEVIEW",value:"toggleview"},{keey:"LISTBOX_VIEW_TYPE_SPINNER",value:"spinner"},{keey:"LOADING_SCREEN_POSITION_FULL_SCREEN",value:"fullscreen"},{keey:"LOADING_SCREEN_POSITION_ONLY_CENTER",value:"center"},{keey:"MAP_PROVIDER_GOOGLE",value:"google"},{keey:"MAP_SOURCE_NATIVE",value:"native"},{keey:"MAP_SOURCE_NON_NATIVE",value:"non-native"},{keey:"MAP_SOURCE_STATIC",value:"static"},{keey:"MAP_VIEW_MODE_HYBRID",value:"hybrid"},{keey:"MAP_VIEW_MODE_POLYGON",value:"polygon"},{keey:"MAP_VIEW_MODE_NORMAL",value:"normal"},{keey:"MAP_VIEW_MODE_SATELLITE",value:"satellite"},{keey:"MAP_VIEW_MODE_TERRAIN",value:"terrain"},{keey:"MAP_HEIGHT_BY_FORM_REFERENCE",value:"formreference"},{keey:"MAP_HEIGHT_BY_PARENT_WIDTH",value:"parentwidth"},{keey:"MASTER_TYPE_DEFAULT",value:"withoutcontract"},{keey:"MASTER_TYPE_USERWIDGET",value:"withcontract"},{keey:"NETWORK_TYPE_3G",value:"3G"},{keey:"NETWORK_TYPE_ANY",value:"ANY"},{keey:"NETWORK_TYPE_ETHERNET",value:"ETHERNET"},{keey:"NETWORK_TYPE_WIFI",value:"WIFI"},{keey:"ONHOVER_MOUSE_ENTER",value:"enter"},{keey:"ONHOVER_MOUSE_LEAVE",value:"leave"},{keey:"ONHOVER_MOUSE_MOVE",value:"move"},{keey:"OPEN_URL_SUCCESS",value:"success"},{keey:"OPEN_URL_FAILURE",value:"failure"},{keey:"OPEN_URL_UNKNOWN",value:"unknown"},{keey:"PRINTSTUB",value:"@printlevel"},{keey:"RADIOGROUP_ITEM_ORIENTATION_HORIZONTAL",value:"horizontal"},{keey:"RADIOGROUP_ITEM_ORIENTATION_VERTICAL",value:"vertical"},{keey:"RADIOBUTTON_VIEW_TYPE_CUSTOMVIEW",value:"customview"},{keey:"RADIOBUTTON_VIEW_TYPE_DEFAULTTVIEW",value:"defaultview"},{keey:"SEGUI_DEFAULT_BEHAVIOR",value:"default"},{keey:"SEGUI_MULTI_SELECT_BEHAVIOR",value:"multiselect"},{keey:"SEGUI_SCROLL_POSITION_DEFAULT",value:"default"},{keey:"SEGUI_SCROLL_POSITION_RETAIN",value:"retain"},{keey:"SEGUI_SCROLL_POSITION_TOP",value:"top"},{keey:"SEGUI_SEARCH_CRITERIA_CONTAINS",value:"CONTAINS"},{keey:"SEGUI_SEARCH_CRITERIA_ENDSWITH",value:"ENDSWITH"},{keey:"SEGUI_SEARCH_CRITERIA_GREATER",value:"GREATER"},{keey:"SEGUI_SEARCH_CRITERIA_GREATER_EQUAL",value:"GREATER_EQUAL"},{keey:"SEGUI_SEARCH_CRITERIA_LESSER",value:"LESSER"},{keey:"SEGUI_SEARCH_CRITERIA_LESSER_EQUAL",value:"LESSER_EQUAL"},{keey:"SEGUI_SEARCH_CRITERIA_NOT_CONTAINS",value:"NOT_CONTAINS"},{keey:"SEGUI_SEARCH_CRITERIA_NOT_EQUAL",value:"NOT_EQUAL"},{keey:"SEGUI_SEARCH_CRITERIA_NOT_ENDSWITH",value:"NOT_ENDSWITH"},{keey:"SEGUI_SEARCH_CRITERIA_NOT_STARTSWITH",value:"NOT_STARTSWITH"},{keey:"SEGUI_SEARCH_CRITERIA_OPERATOR_AND",value:"AND"},{keey:"SEGUI_SEARCH_CRITERIA_OPERATOR_OR",value:"OR"},{keey:"SEGUI_SEARCH_CRITERIA_STARTSWITH",value:"STARTSWITH"},{keey:"SEGUI_SEARCH_CRITERIA_STRICT_EQUAL",value:"STRICT_EQUAL"},{keey:"SEGUI_SINGLE_SELECT_BEHAVIOR",value:"singleselect"},{keey:"SEGUI_VIEW_TYPE_PAGEVIEW",value:"pageview"},{keey:"SEGUI_VIEW_TYPE_TABLEVIEW",value:"tableview"},{keey:"SLIDER_HORIZONTAL_ORIENTATION",value:"horizontal"},{keey:"SLIDER_VERTICAL_ORIENTATION",value:"vertical"},{keey:"SLIDER_VIEW_TYPE_DEFAULT",value:"default"},{keey:"SLIDER_VIEW_TYPE_PROGRESS",value:"progress"},{keey:"TAB_HEADER_POSITION_BOTTOM",value:"bottom"},{keey:"TAB_HEADER_POSITION_LEFT",value:"left"},{keey:"TAB_HEADER_POSITION_RIGHT",value:"right"},{keey:"TAB_HEADER_POSITION_TOP",value:"top"},{keey:"TABPANE_COLLAPSIBLE_IMAGE_POSITION_LEFT",value:"left"},{keey:"TABPANE_COLLAPSIBLE_IMAGE_POSITION_RIGHT",value:"right"},{keey:"TABPANE_COLLAPSIBLE_TABNAME_ALIGNMENT_CENTER",value:"center"},{keey:"TABPANE_COLLAPSIBLE_TABNAME_ALIGNMENT_LEFT",value:"left"},{keey:"TABPANE_COLLAPSIBLE_TABNAME_ALIGNMENT_RIGHT",value:"right"},{keey:"TABPANE_VIEW_TYPE_COLLAPSIBLEVIEW",value:"collapsibleview"},{keey:"TABPANE_VIEW_TYPE_PAGEVIEW",value:"pageview"},{keey:"TABPANE_VIEW_TYPE_TABVIEW",value:"tabview"},{keey:"TEXTBOX_AUTO_CAPITALIZE_ALL",value:"characters"},{keey:"TEXTBOX_AUTO_CAPITALIZE_NONE",value:"none"},{keey:"TEXTBOX_AUTO_CAPITALIZE_SENTENCES",value:"sentences"},{keey:"TEXTBOX_AUTO_CAPITALIZE_WORDS",value:"words"},{keey:"TEXTBOX_CUSTOM_HEIGHT",value:"custom"},{keey:"TEXTBOX_DEFAULT_PLATFORM_HEIGHT",value:"default"},{keey:"TEXTBOX_FONT_METRICS_DRIVEN_HEIGHT",value:"fontmetrics"},{keey:"TEXTBOX_INPUT_MODE_ANY",value:"any"},{keey:"TEXTBOX_INPUT_MODE_NUMERIC",value:"numeric"},{keey:"TEXTBOX_INPUT_MODE_PASSWORD",value:"password"},{keey:"TEXTBOX_KEY_BOARD_STYLE_CHAT",value:"chat"},{keey:"TEXTBOX_KEY_BOARD_STYLE_DECIMAL",value:"decimal"},{keey:"TEXTBOX_KEY_BOARD_STYLE_DEFAULT",value:"text"},{keey:"TEXTBOX_KEY_BOARD_STYLE_EMAIL",value:"email"},{keey:"TEXTBOX_KEY_BOARD_STYLE_NONE",value:"none"},{keey:"TEXTBOX_KEY_BOARD_STYLE_NUMBER_PAD",value:"numeric"},{keey:"TEXTBOX_KEY_BOARD_STYLE_PHONE_PAD",value:"tel"},{keey:"TEXTBOX_KEY_BOARD_STYLE_SEARCH",value:"search"},{keey:"TEXTBOX_KEY_BOARD_STYLE_URL",value:"url"},{keey:"TEXTBOX_VIEW_TYPE_DEFAULT",value:"default"},{keey:"TEXTBOX_VIEW_TYPE_SEARCH_VIEW",value:"search"},{keey:"TEXTAREA_INPUT_MODE_ANY",value:"any"},{keey:"TEXTAREA_INPUT_MODE_NUMERIC",value:"numeric"},{keey:"TEXTAREA_KEY_BOARD_STYLE_CHAT",value:"chat"},{keey:"TEXTAREA_KEY_BOARD_STYLE_DECIMAL",value:"decimal"},{keey:"TEXTAREA_KEY_BOARD_STYLE_DEFAULT",value:"text"},{keey:"TEXTAREA_KEY_BOARD_STYLE_EMAIL",value:"email"},{keey:"TEXTAREA_KEY_BOARD_STYLE_NONE",value:"none"},{keey:"TEXTAREA_KEY_BOARD_STYLE_NUMBER_PAD",value:"numeric"},{keey:"TEXTAREA_KEY_BOARD_STYLE_PHONE_PAD",value:"tel"},{keey:"TEXTAREA_KEY_BOARD_STYLE_SEARCH",value:"search"},{keey:"TEXTAREA_KEY_BOARD_STYLE_URL",value:"url"},{keey:"TEXTAREA_AUTO_CAPITALIZE_ALL",value:"characters"},{keey:"TEXTAREA_AUTO_CAPITALIZE_NONE",value:"none"},{keey:"TEXTAREA_AUTO_CAPITALIZE_SENTENCES",value:"sentences"},{keey:"TEXTAREA_AUTO_CAPITALIZE_WORDS",value:"words"},{keey:"UPLOAD_MAX_WAIT_TIME",value:12e4},{keey:"WIDGET_ALIGN_BOTTOM_CENTER",value:"bottomcenter"},{keey:"WIDGET_ALIGN_BOTTOM_LEFT",value:"bottomleft"},{keey:"WIDGET_ALIGN_BOTTOM_RIGHT",value:"bottomright"},{keey:"WIDGET_ALIGN_CENTER",value:"middlecenter"},{keey:"WIDGET_ALIGN_MIDDLE_LEFT",value:"middleleft"},{keey:"WIDGET_ALIGN_MIDDLE_RIGHT",value:"middleright"},{keey:"WIDGET_ALIGN_TOP_CENTER",value:"topcenter"},{keey:"WIDGET_ALIGN_TOP_LEFT",value:"topleft"},{keey:"WIDGET_ALIGN_TOP_RIGHT",value:"topright"},{keey:"WIDGET_DIRECTION_LTR",value:"ltr"},{keey:"WIDGET_DIRECTION_RTL",value:"rtl"}]),e}()}),Object.defineProperty(kony.$kwebfw$,"utils",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={},n=kony.$kwebfw$,t=null,o={supports:{}},r={argument:function(e){return"argument"===e},array:function(e){return"array"===e},boolean:function(e){return"boolean"===e},color:function(e,n){var t=!1;return"string"===e?((t=!n||/(^[0-9A-F]{8}$)|(^[0-9A-F]{6}$)/i.test(n))||0!==n.indexOf("$")||(t=!0),t):t},date:function(e,n){return"date"===e||"array"===e&&[3,6].indexOf(n.length)>=0&&_isDateString(n[2]+"-"+n[1]+"-"+n[0]+" "+(n[3]||0)+":"+(n[4]||0)+":"+(n[5]||0))},decimal:function(e,n){return"number"===e&&!r.integer(e,n)},document:function(e){return"document"===e},dom:function(e){return"node"===e},empty:function(e,n){var t="";if("null"===e||"undefined"===e)return!0;if("string"===e||r.list(e,n))return 0===n.length;if("object"===e){for(t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}return!1},equals:function(e,n,t){var o=0,i="",a=s(t);if(e!==a)return!1;if(r.list(a,t)){if(n.length!==t.length)return!1;for(o=0;o<t.length;o++)if(!r.equals(s(n[o]),n[o],t[o]))return!1;return!0}if("object"===a){if(_size(t)!==_size(n))return!1;for(i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&!r.equals(s(n[i]),n[i],t[i]))return!1;return!0}return n===t},event:function(e){return["event","touch"].indexOf(e)>=0},fragment:function(e){return"fragment"===e},function:function(e){return"function"===e},i18n:function(e,n){return"string"===e&&0===n.indexOf("kony.i18n.getLocalizedString(")},integer:function(e,n){return"number"===e&&Math.ceil(n)===Math.floor(n)},leapyear:function(e,n){return"number"===e&&n>=1e3&&n<=9999?1===(n=new Date(n,1,29,0,0,0)).getMonth():"date"===e&&1===(n=new Date(n.getFullYear(),1,29,0,0,0)).getMonth()},list:function(e){return["argument","array","cssrulelist","nodelist","stylesheetlist","filelist","touchlist"].indexOf(e)>=0},null:function(e){return"null"===e},number:function(e){return"number"===e},numeric:function(e,n){return"string"===e&&/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/.test(n)},object:function(e){return["object","widget"].indexOf(e)>=0},size:function(e,n,t){return"number"===e?!0===t?n>=0:!1!==t||n<=0:"string"===e&&(!n||!r.numeric(e,n)&&(!0===t?/^([0-9]+)(\.[0-9]+)?(px|%|dp)?$/.test(n):!1===t?/^[-]([0-9]+)(\.[0-9]+)?(px|%|dp)?$/.test(n):/^[-+]?([0-9]+)(\.[0-9]+)?(px|%|dp)?$/.test(n)))},skinningConstant:function(e,n){return"string"===e&&0===n.indexOf("$")},string:function(e){return"string"===e},undefined:function(e){return"undefined"===e},widget:function(e,n,t){return"widget"===e&&(!t||("component"===t?(n instanceof kony.ui.UserWidget||n instanceof kony.ui.FlexContainer||n instanceof kony.ui.FlexScrollContainer)&&"object"===s(n._kwebfw_.is.component):"inherited"===t?!(!n.__$kwebfw$ns__||!n.__$kwebfw$name__||Object.prototype.hasOwnProperty.call(n,"__$kwebfw$ns__")||Object.prototype.hasOwnProperty.call(n,"__$kwebfw$name__")):n instanceof kony.ui[t]&&(n.__$kwebfw$name__===t||n._kwebfw_.ns==="kony.ui."+t)))},window:function(e){return"window"===e}},i=function(e,n,t){var o={enumerable:!0,configurable:e};return o[n]=t,o},a=function(e,n){var t=navigator.userAgent.toLowerCase(),r=-1,i="",s="",c="",u="",y=null,p=0,d=0;if(l(e,"string")&&e&&(e=e.toLowerCase()),l(n,"string")&&n&&(n=n.toLowerCase()),t.indexOf("edg/")>=0?t=t.replace("edg/","edge/"):t.indexOf("trident/")>=0&&t.indexOf("rv:11.0")>=0&&(t=t.replace("rv:11.0","msie/11.0")),"orientation"===e)return y=screen.orientation||screen.mozOrientation||screen.msOrientation,window.ScreenOrientation&&y instanceof ScreenOrientation?"portrait-primary"===y.type||"portrait-secondary"===y.type?"portrait":"landscape-primary"===y.type||"landscape-secondary"===y.type?"landscape":"portrait":"number"==typeof window.orientation?0===window.orientation||180===window.orientation?"android"===a("os")&&"tablet"===a("channel")?"landscape":"portrait":90===window.orientation||-90===window.orientation?"android"===a("os")&&"tablet"===a("channel")?"portrait":"landscape":"portrait":window.matchMedia?window.matchMedia("(orientation: portrait)").matches?"portrait":window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait":(p=document.body.offsetHeight)>(d=document.body.offsetWidth)?"portrait":p<d?"landscape":"portrait";if("channel"===e)Object.prototype.hasOwnProperty.call(o,e)||(s=a("os"),t.indexOf("mobile")>=0?o[e]="ios"===s?t.indexOf("iphone")>=0?"mobile":t.indexOf("ipad")>=0?"tablet":"desktop":"windows"===s?t.indexOf("phone")>=0?"mobile":t.indexOf("tablet")>=0?"tablet":"desktop":"mobile":t.indexOf("tablet")>=0?o[e]="tablet":o[e]="desktop");else if("os"===e)Object.prototype.hasOwnProperty.call(o,e)||(t.indexOf("mac os")>=0?o[e]="ios":t.indexOf("windows")>=0?o[e]="windows":t.indexOf("android")>=0?o[e]="android":o[e]="unknown");else if("osversion"===e)Object.prototype.hasOwnProperty.call(o,e)||(s=a("os"));else if("name"===e)Object.prototype.hasOwnProperty.call(o,e)||(t.indexOf("edge")>=0?o[e]="edge":t.indexOf("msie")>=0?o[e]="msie":t.indexOf("chrome")>=0?o[e]="chrome":t.indexOf("firefox")>=0?o[e]="firefox":t.indexOf("safari")>=0?o[e]="safari":o[e]="unknown");else if("device"===e)Object.prototype.hasOwnProperty.call(o,e)||(s=a("os"),"desktop"===(u=a("channel"))?o[e]="desktop":"android"===s?o[e]="tablet"===u?"androidtablet":"android":"ios"===s?o[e]="tablet"===u?"ipad":"mobile"===u?"iphone":"mac":"windows"===s&&(o[e]="tablet"===u?"windowstablet":"mobile"===u?"windowsphone":"pc"));else if("version"===e){if(!Object.prototype.hasOwnProperty.call(o,e)){if(i=a("name"),(r=t.indexOf(i+"/"))>=0)for(r+=i.length+1;r<t.length&&[".","-","_","0","1","2","3","4","5","6","7","8","9"].indexOf(t[r])>=0;)c+=t[r],r++;o[e]=c||"unknown"}}else"engine"===e?Object.prototype.hasOwnProperty.call(o,e)||(i=a("name"),["chrome","safari","edge"].indexOf(i)>=0?o[e]="webkit":o[e]="firefox"===i?"moz":"msie"===i?"ms":"unknown"):"devicememory"===e?Object.prototype.hasOwnProperty.call(o,e)||(o[e]=navigator.deviceMemory):"language"===e?Object.prototype.hasOwnProperty.call(o,e)||(o[e]=navigator.language||navigator.userLanguage||navigator.browserLanguage):"supports"===e&&("cookies"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=navigator.cookieEnabled):"cache"===n?Object.prototype.hasOwnProperty.call(o[e],n)&&(o[e][n]=!!(window.caches&&window.caches instanceof CacheStorage)):"appcache"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!(window.applicationCache&&window.applicationCache instanceof ApplicationCache)):"battery"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(navigator.getBattery,"function")):"bluetooth"===n||"usb"===n||"clipboard"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]="//TODO::"):"connection"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=navigator.connection instanceof NetworkInformation):"displaymedia"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(navigator.mediaDevices.getDisplayMedia,"function")):"fullscreen"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=document.fullscreenEnabled):"geolocation"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!navigator.geolocation):"orientation"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]="onorientationchange"in window):"touch"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]="ontouchstart"in window):"localstorage"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!(localStorage&&localStorage instanceof Storage)):"mediarecorder"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(window.MediaRecorder,"function")):"sessionstorage"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!(sessionStorage&&sessionStorage instanceof Storage)):"usermedia"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!(!navigator.mediaDevices||!l(navigator.mediaDevices.getUserMedia,"function"))):"webshare"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(navigator.share,"function")):"speechrecognition"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(window.webkitSpeechRecognition,"function")):"contacts"===n?Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(navigator.contacts,"function")):"getwakelock"===n&&(Object.prototype.hasOwnProperty.call(o[e],n)||(o[e][n]=!!l(navigator.getWakeLock,"function"))));return l(e,"string")&&e?"supports"===e&&l(n,"string")&&n?o[e][n]:o[e]:o},s=function(e,n){var t;return"[object Boolean]"===(t=Object.prototype.toString.call(e))||e instanceof Boolean?"boolean":"[object String]"===t||e instanceof String?"string":"[object Function]"===t||e instanceof Function?"function":"[object Undefined]"===t||e===n?"undefined":"[object Number]"!==t||isNaN(e)?"[object Object]"===t?"object":"[object Array]"===t||e instanceof Array?"array":"[object Null]"===t||null===e?"null":"[object NodeList]"===t||"[object HTMLCollection]"===t||e instanceof NodeList||e instanceof HTMLCollection?"nodelist":"[object StyleSheetList]"===t||e instanceof StyleSheetList?"stylesheetlist":"[object CSSRuleList]"===t||e instanceof CSSRuleList?"cssrulelist":"[object FileList]"===t||e instanceof FileList?"filelist":"[object TouchList]"===t?"touchlist":!("[object Date]"===t||e instanceof Date)||"Invalid Date"===e.toDateString()&&isNaN(e.getTime())?"[object Arguments]"===t?"argument":e&&e.tagName?"node":e&&e.type?"event":"[object Touch]"===t?"touch":"[object HTMLDocument]"===t||"[object Document]"===t||e instanceof HTMLDocument||e instanceof Document?"document":"[object DocumentFragment]"===t||e instanceof DocumentFragment?"fragment":"[object global]"===t||"[object Window]"===t||e===window?"window":"":"date":"number"},l=function(e,n,t){var o=!1,i="";return r[n]&&(i=s(e),o=void 0!==t&&void 0!==i?r[n](i,e,t):r[n](i,e)),o};return n.defKonyProp(e,[{keey:"browser",value:a},{keey:"datatype",value:s},{keey:"defineGetter",value:function(e,n,t,o){return"boolean"!=typeof o&&(o=!0),Object.defineProperty?Object.defineProperty(e,n,i(o,"get",t)):Object.prototype.__defineGetter__?e.__defineGetter__(n,t):void 0}},{keey:"defineProperty",value:function(e,n,t,o){var r={configurable:!1,enumerable:!1,value:t,writable:!1};"function"==typeof t&&(t.toLocaleString=t.__proto__.toLocaleString,t.toSource=t.__proto__.toSource,t.toString=t.__proto__.toString),3===arguments.length?(r.configurable=!0,r.writable=!0):4===arguments.length&&("boolean"==typeof o?r.writable=o:o&&"object"==typeof o&&((r=o).value=t)),Object.defineProperty(e,n,r)}},{keey:"defineSetter",value:function(e,n,t,o){return"boolean"!=typeof o&&(o=!0),Object.defineProperty?Object.defineProperty(e,n,i(o,"set",t)):Object.prototype.__defineSetter__?e.__defineSetter__(n,t):void 0}},{keey:"getLocalStorage",value:function(){var e=kony.$kwebfw$.app,n=null,t=localStorage.getItem(e.id);if("string"==typeof t&&t)try{n=JSON.parse(t)}catch(e){n=t}return n}},{keey:"is",value:l},{keey:"log",value:function(e,n){}},{keey:"uid",value:function(){var e=null;return null===t?(e=(new Date).getTime().toString(),t=parseInt(e,10)):t++,t.toString()}},{keey:"uuid",value:function(){var e="";return window.crypto?e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})):(e=(new Date).getTime(),window.performance&&"function"==typeof performance.now&&(e+=performance.now()),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===n?t:3&t|8).toString(16)}))),e.toUpperCase()}}]),e}()}),Object.defineProperty(kony,"crypto",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={},n=kony.$kwebfw$,t=function(e,n,t){var o=kony.$kwebfw$.utils,r="";if(o.log({api:"kony.crypto.createHash",enter:!0}),!o.is(n,"string"))return{errcode:100,errmessage:"invalid input parameters"};try{switch(e.toLowerCase()){case"md5":r=CryptoJS.MD5(n);break;case"sha256":r=CryptoJS.SHA256(n);break;case"sha1":r=CryptoJS.SHA1(n);break;case"sha512":r=CryptoJS.SHA512(n);break;default:r={errcode:101,errmessage:"unsupported algorithm"}}return o.is(r,"string")||(r=o.is(t,"object")&&"true"===t.returnBase64String?r.toString(CryptoJS.enc.Base64):r.toString(CryptoJS.enc.UTF8)),o.log({api:"kony.crypto.createHash",exit:!0}),r}catch(e){return{errcode:102,errmessage:"unknown  error"}}},o=function(e,n){return e=Math.ceil(e),n=Math.floor(n),Math.floor(Math.random()*(n-e+1))+e},r=function(){},i=function(e){var n=JSON.parse(e),t=null;return t=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(n.ct)}),n.iv&&(t.iv=CryptoJS.enc.Hex.parse(n.iv)),n.s&&(t.salt=CryptoJS.enc.Hex.parse(n.s)),t},a=function(e){var n={ct:e.ciphertext.toString(CryptoJS.enc.Base64)};return e.iv&&(n.iv=e.iv.toString()),e.salt&&(n.s=e.salt.toString()),JSON.stringify(n)};return n.defKonyProp(e,[{keey:"createHash",value:t},{keey:"createHashToUpperCase",value:function(e,n){var o=kony.$kwebfw$.utils,r=t(e,n);return o.is(r,"string")&&(r=r.toUpperCase()),r}},{keey:"createPBKDF2Key",value:function(e,n,t,o,r){var i,a=kony.$kwebfw$.utils;if(a.log({api:"kony.crypto._createPBKDF2Key",enter:!0}),!a.is(n,"string"))return{errcode:100,errmessage:"invalid input parameters"};try{switch(e.toLowerCase()){case"md5":i=CryptoJS.algo.MD5;break;case"sha256":i=CryptoJS.algo.SHA256;break;case"sha1":i=CryptoJS.algo.SHA1;break;case"sha512":i=CryptoJS.algo.SHA512}return i?(r=r?r/32:8,CryptoJS.PBKDF2(n,t,{keySize:r,iterations:o,hasher:i}).toString()):(a.log({api:"kony.crypto.createPBKDF2Key",exit:!0}),{errcode:101,errmessage:"unsupported  algo"})}catch(e){return{errcode:102,errmessage:"unknown  error"}}}},{keey:"decrypt",value:function(e,n,t,o){var r=kony.$kwebfw$.utils,a=CryptoJS.mode.CBC,s="",l=CryptoJS.pad.Pkcs7;if(r.log({api:"kony.crypto.decrypt",enter:!0}),!r.is(e,"string")&&t&&n)return r.log({api:"kony.crypto.decrypt",exit:!0}),{errcode:100,errmessage:"invalid input parameters"};try{if(o){if(o.mode)switch(o.mode.toLowerCase()){case"cfb":a=CryptoJS.mode.CFB;break;case"ctr":a=CryptoJS.mode.CTR;break;case"ofb":a=CryptoJS.mode.OFB;break;case"ecb":a=CryptoJS.mode.ECB}if(o.padding)switch(o.padding.toLowerCase()){case"iso97971":l=CryptoJS.pad.Iso97971;break;case"iso10126":l=CryptoJS.pad.Iso10126;break;case"zeropadding":l=CryptoJS.pad.ZeroPadding;break;case"nopadding":l=CryptoJS.pad.NoPadding}}return t=i(t),"aes"===e.toLowerCase()?(s=CryptoJS.AES.decrypt(t,n,{mode:a,padding:l}),r.log({api:"kony.crypto.decrypt",exit:!0}),s.toString(CryptoJS.enc.Utf8)):"tripledes"===e.toLowerCase()?(s=CryptoJS.TripleDES.decrypt(t,n,{mode:a,padding:l}),r.log({api:"kony.crypto.decrypt",exit:!0}),s.toString(CryptoJS.enc.Utf8)):(r.log({api:"kony.crypto.decrypt",exit:!0}),{errcode:101,errmessage:"unsupported algorithm"})}catch(e){return{errcode:102,errmessage:"unknown  error"}}}},{keey:"deleteKey",value:function(e){var n=kony.$kwebfw$,t=n.utils,o=n.store;t.log({api:"kony.crypto.deleteKey",enter:!0}),o.remove("local",e),t.log({api:"kony.crypto.deleteKey",exit:!0})}},{keey:"encrypt",value:function(e,n,t,o){var i=kony.$kwebfw$.utils,s=CryptoJS.mode.CBC,l=null,c=CryptoJS.pad.Pkcs7;if(i.log({api:"kony.crypto.createHash",enter:!0}),!i.is(e,"string")&&t&&n)return i.log({api:"kony.crypto.encrypt",exit:!0}),{errcode:100,errmessage:"invalid input parameters"};try{if(o){if(o.mode)switch(o.mode.toLowerCase()){case"cfb":s=CryptoJS.mode.CFB;break;case"ctr":s=CryptoJS.mode.CTR;break;case"ofb":s=CryptoJS.mode.OFB;break;case"ecb":s=CryptoJS.mode.ECB}if(o.padding)switch(o.padding.toLowerCase()){case"iso97971":c=CryptoJS.pad.Iso97971;break;case"iso10126":c=CryptoJS.pad.Iso10126;break;case"zeropadding":c=CryptoJS.pad.ZeroPadding;break;case"nopadding":c=CryptoJS.pad.NoPadding}}return"aes"===e.toLowerCase()?(l=CryptoJS.AES.encrypt(t,n,{mode:s,padding:c}),i.log({api:"kony.crypto.encrypt",exit:!0}),a(l)):"tripledes"===e.toLowerCase()?(l=CryptoJS.TripleDES.encrypt(t,n,{mode:s,padding:c,format:r}),i.log({api:"kony.crypto.encrypt",exit:!0}),a(l)):(i.log({api:"kony.crypto.encrypt",exit:!0}),{errcode:101,errmessage:"unsupported algorithm"})}catch(e){return{errcode:102,errmessage:"unknown  error"}}}},{keey:"generateRandomNumber",value:o},{keey:"generateRandomString",value:function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o(8,16),t=0,r=e.length,i="";for(t=0;t<n;t++)i+=e.charAt(Math.floor(Math.random()*r));return i.toUpperCase()}},{keey:"generateSecureRandom",value:function(e){var n=kony.$kwebfw$.utils,t=null;return n.is(e,"object")?(-1===["base64"].indexOf(e.type)&&(e.type="base64"),(!n.is(e.size,"integer")||e.size<0)&&(e.size=36)):e={type:"base64",size:36},t=CryptoJS.lib.WordArray.random(e.size),"base64"===e.type?t.toString(CryptoJS.enc.Base64):t.toString(CryptoJS.enc.Hex)}},{keey:"newKey",value:function(e,n,t){var o=kony.$kwebfw$.utils;o.log({api:"kony.crypto.newKey",enter:!0});try{return"passphrase"!==e?(o.log({api:"kony.crypto.newKey",exit:!0}),{errcode:100,errmessage:"invalid input parameters"}):t.subalgo?"aes"===t.subalgo.toLowerCase()||"tripledes"===t.subalgo.toLowerCase()?(o.log({api:"kony.crypto.newKey",exit:!0}),t.passphrasetext[0]):(o.log({api:"kony.crypto.newKey",exit:!0}),{errcode:101,errmessage:"unsupported algorithm"}):(o.log({api:"kony.crypto.newKey",exit:!0}),{errcode:105,errmessage:"subalgo parameter is missing"})}catch(e){return{errcode:102,errmessage:"unknown error"}}}},{keey:"readKey",value:function(e){var n=kony.$kwebfw$,t=n.utils,o=n.store,r=null;if(t.log({api:"kony.crypto.readKey",enter:!0}),t.is(e,"undefined"))return t.log({api:"kony.crypto.readKey",enter:!0}),{errcode:100,errmsg:"Invalid input parameters"};try{return localStorage?null===(r=JSON.parse(o.fetch("local",e)||"null"))?(t.log({api:"kony.crypto.readKey",exit:!0}),{errcode:101,errmsg:"unable to find the key with the specified unique ID"}):(t.log({api:"kony.crypto.readKey",exit:!0}),r):(t.log({api:"kony.crypto.readKey",exit:!0}),{errcode:102,errmsg:"unknown error, storage not supported"})}catch(e){}}},{keey:"saveKey",value:function(e,n){var t=kony.$kwebfw$,o=t.utils,r=t.store;return o.log({api:"kony.crypto.saveKey",enter:!0}),o.is(e,"undefined")||o.is(n,"undefined")?(o.log({api:"kony.crypto.saveKey",exit:!0}),{errcode:100,errmsg:"Invalid input parameters"}):(r.put("local",e,JSON.stringify(n)),o.log({api:"kony.crypto.saveKey",exit:!0}),e)}}]),e}()}),function(){var e,n=function(e,n){var t=kony.$kwebfw$,o=t.app,r=t.utils,i=r.getLocalStorage();r.is(i,"object")&&!0===i.migrated?(!0===n?i[e]=[]:i.ns[e]&&i.ns[e].length&&(i.ns[e]=[]),t.store.put("local",o.id,JSON.stringify(i))):(t.store.clear("local"),t.store.put("local",o.id,JSON.stringify(r.createBlankLocalStorage())))},t=function(e,n,t){var o=kony.$kwebfw$,r=o.utils,i=o.app,a=null,s=r.getLocalStorage(),l=0,c=-1,u=0;if(a=!0===t?s[n]:s.ns[n],r.is(a,"array"))for(u=a.length,l=0;l<u;l++)if(a[l].key===e){c=l;break}c>=0&&(a.splice(c,1),o.store.put("local",i.id,JSON.stringify(s)))},o=function(e,n,t){var o=kony.$kwebfw$.utils,r=o.getLocalStorage(),i=0,a=0,s=null,l=null;if(l=!0===t?r[n]:r.ns[n],o.is(l,"array"))for(a=l.length,i=0;i<a;i++)if(l[i].key===e){s=l[i].value;break}return s},r=function(e,n){var t=kony.$kwebfw$.utils,o=t.getLocalStorage(),r=null;return r=!0===n?o[e]:o.ns[e],t.is(r,"array")?r.length:0},i=function(e,n,t){var o=kony.$kwebfw$.utils,r=o.getLocalStorage(),i=null;return i=!0===t?r[n]:r.ns[n],o.is(i,"array")&&(i=i[e]),i?i.key:null},a=function(e,n,t,o){var r=kony.$kwebfw$,i=r.utils,a=r.app,s=null,l=i.getLocalStorage(),c=0,u=-1,y=0;if(!0===o?s=l[t]:(i.is(l.ns[t],"array")||(l.ns[t]=[]),s=l.ns[t]),i.is(s,"array")){for(y=s.length,c=0;c<y;c++)if(s[c].key===e){u=c;break}-1===u?s.push({key:e,value:n}):s[u].value=n,r.store.put("local",a.id,JSON.stringify(l))}};Object.defineProperty(kony,"ds",{configurable:!1,enumerable:!1,writable:!1,value:(e={},kony.$kwebfw$.defKonyProp(e,[{keey:"read",value:function(e,n){var t=kony.$kwebfw$.utils;return t.log({api:"kony.ds.read",enter:!0}),"string"==typeof n&&n?(t.log({api:"kony.ds.read",exit:!0}),o(e,n)):(t.log({api:"kony.ds.read",exit:!0}),o(e,"ds",!0))}},{keey:"remove",value:function(e,n){var o=kony.$kwebfw$.utils;return o.log({api:"kony.ds.remove",enter:!0}),"string"==typeof n&&n?t(e,n):t(e,"ds",!0),o.log({api:"kony.ds.remove",exit:!0}),!0}},{keey:"save",value:function(e,n,t){var o=kony.$kwebfw$.utils;o.log({api:"kony.ds.save",enter:!0}),"string"==typeof t&&t?a(n,e,t):(2===arguments.length||"object"==typeof t&&t)&&a(n,e,"ds",!0),o.log({api:"kony.ds.save",exit:!0})}}]),e)}),Object.defineProperty(kony,"store",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={};return kony.$kwebfw$.defKonyProp(e,[{keey:"clear",value:function(e){var t=kony.$kwebfw$.utils;t.log({api:"kony.store.clear",enter:!0}),"string"==typeof storeContext&&storeContext?n(e):n("store",!0),t.log({api:"kony.store.clear",exit:!0})}},{keey:"getItem",value:function(e,n){var t=kony.$kwebfw$.utils;return t.log({api:"kony.store.getItem",enter:!0}),"string"==typeof n&&n?(t.log({api:"kony.store.getItem",exit:!0}),o(e,n)):(t.log({api:"kony.store.getItem",exit:!0}),o(e,"store",!0))}},{keey:"key",value:function(e,n){var t=kony.$kwebfw$.utils;return t.log({api:"kony.store.key",enter:!0}),"string"==typeof n&&n?(t.log({api:"kony.store.key",exit:!0}),i(e,n)):(t.log({api:"kony.store.key",exit:!0}),i(e,"store",!0))}},{keey:"length",value:function(e){var n=kony.$kwebfw$.utils;return n.log({api:"kony.store.length",enter:!0}),"string"==typeof e&&e?(n.log({api:"kony.store.length",exit:!0}),r(e)):(n.log({api:"kony.store.length",exit:!0}),r("store",!0))}},{keey:"removeItem",value:function(e,n){var o=kony.$kwebfw$.utils;o.log({api:"kony.store.removeItem",enter:!0}),"string"==typeof n&&n?t(e,n):t(e,"store",!0),o.log({api:"kony.store.removeItem",exit:!0})}},{keey:"setItem",value:function(e,n,t){var o=kony.$kwebfw$.utils;o.log({api:"kony.store.setItem",enter:!0}),"string"==typeof t&&t?a(e,n,t):a(e,n,"store",!0),o.log({api:"kony.store.setItem",exit:!0})}}]),e}()})}(),Object.defineProperty(kony,"net",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={},n=kony.$kwebfw$,t=n.utils,o={},r=null,i=function(e){var n=this.xhr;return n.getResponseHeader(e)?n.getResponseHeader(e):null},a=function(){var e,n,t,o,r=kony.$kwebfw$,i=r.utils,a=r.behavior,s=this.xhr,l=null,c=0,u=0,y={};if(s.getAllResponseHeaders()&&(l=s.getAllResponseHeaders()),!a.isResponseHeaderString&&i.is(l,"string")){for(u=(e=l.trim().split(/[\r\n]+/)).length,c=0;c<u;c++)t=(n=e[c].split(": ")).shift(),o=n.join(": "),y[t]=o;l=y}return l},s=function(){var e=kony.$kwebfw$.utils,n=e.uid();e.log({api:"kony.net.HttpRequest",enter:!0}),o[n]={disableIntegrityCheck:!1,enableWithCredentials:!1,integrityCheckRequired:!1,integrityStatus:constants.HTTP_INTEGRITY_CHECK_NOT_DONE,isMultiPartOrBinary:!1,onReadyStateChange:function(){},randomString:null,response:"",responseType:"",status:null,statusText:null,timeout:0,url:null,xhr:new XMLHttpRequest},o[n].xhr.onreadystatechange=function(){var e=kony.$kwebfw$,t=(e.widget,e.app,o[n]),r=t.xhr;switch(t.status=r.status,t.readyState=r.readyState,r.readyState){case 0:case 1:case 2:case 3:t.readyState=r.readyState,t.statusText=0===r.readyState?"Request Uninitialised":1===r.readyState?"Request Loading":2===r.readyState?"Request Loaded":3===r.readyState?"Request Interactive":"",t.onReadyStateChange({enableWithCredentials:t.enableWithCredentials,integrityStatus:t.integrityStatus,readyState:t.readyState,response:t.response,responseType:t.responseType,status:t.status,statusText:t.statusText,timeout:t.timeout});break;case 4:t.readyState=r.readyState,t.statusText="Request Completed",""===r.responseType||"text"===r.responseType?t.response=r.responseText:t.response=r.response,t.integrityCheckRequired&&l.generateResponseCheckSumAndCheckIntegrity.call(t,t.response),200===r.status&&(t.statusText+=": OK",t.timeout&&clearTimeout(t.timeout)),400===r.status&&(t.statusText+=": Error",t.timeout&&clearTimeout(t.timeout)),t.onReadyStateChange({enableWithCredentials:t.enableWithCredentials,integrityStatus:t.integrityStatus,readyState:t.readyState,response:t.response,responseType:t.responseType,status:t.status,statusText:t.statusText,timeout:t.timeout}),r=t=null,delete o[n];break;default:r=t=null,delete o[n]}},e.defineProperty(this,"id",n),e.defineGetter(this,"disableIntegrityCheck",(function(){return o[this.id].disableIntegrityCheck})),e.defineSetter(this,"disableIntegrityCheck",(function(e){"boolean"==typeof e&&(o[this.id].disableIntegrityCheck=e)})),e.defineGetter(this,"enableWithCredentials",(function(){return o[this.id].enableWithCredentials})),e.defineSetter(this,"enableWithCredentials",(function(e){"boolean"==typeof e&&(o[this.id].enableWithCredentials=e)})),e.defineGetter(this,"integrityStatus",(function(){return o[this.id].integrityStatus})),e.defineSetter(this,"integrityStatus",(function(e){})),e.defineGetter(this,"onReadyStateChange",(function(){return o[this.id].onReadyStateChange})),e.defineSetter(this,"onReadyStateChange",(function(e){"function"==typeof e&&(o[this.id].onReadyStateChange=e)})),e.defineGetter(this,"readyState",(function(){return o[this.id].readyState})),e.defineSetter(this,"readyState",(function(e){})),e.defineGetter(this,"response",(function(){return o[this.id].response})),e.defineSetter(this,"response",(function(e){})),e.defineGetter(this,"responseType",(function(){return o[this.id].responseType})),e.defineSetter(this,"responseType",(function(e){o[this.id].responseType=e})),e.defineGetter(this,"status",(function(){return o[this.id].status})),e.defineSetter(this,"status",(function(e){})),e.defineGetter(this,"statusText",(function(){return o[this.id].statusText})),e.defineSetter(this,"statusText",(function(e){})),e.defineGetter(this,"timeout",(function(){return o[this.id].timeout})),e.defineSetter(this,"timeout",(function(e){"number"!=typeof e||isNaN(e)||(o[this.id].timeout=e)})),e.log({api:"kony.net.HttpRequest",exit:!0})};t.defineProperty(s.prototype,"abort",(function(){var e=kony.$kwebfw$.utils,n=o[this.id],t=n.xhr;e.log({api:"kony.net.HttpRequest.abort",enter:!0}),n.timeout&&clearTimeout(n.timeout),t.abort(),delete o[this.id],e.log({api:"kony.net.HttpRequest.abort",exit:!0})})),t.defineProperty(s.prototype,"getAllResponseHeaders",(function(){var e,n=kony.$kwebfw$.utils,t=o[this.id];return n.log({api:"kony.net.HttpRequest.getAllResponseHeaders",enter:!0}),e=a.call(t),n.log({api:"kony.net.HttpRequest.getAllResponseHeaders",exit:!0}),e})),t.defineProperty(s.prototype,"getResponseHeader",(function(e){var n,t=kony.$kwebfw$.utils,r=o[this.id];return t.log({api:"kony.net.HttpRequest.getResponseHeader",enter:!0}),n=i.call(r,e),t.log({api:"kony.net.HttpRequest.getResponseHeader",exit:!0}),n})),t.defineProperty(s.prototype,"open",(function(e,n,t,r,i){var a=kony.$kwebfw$.utils,s=o[this.id],l=s.xhr;a.log({api:"kony.net.HttpRequest.open",enter:!0}),a.is(e,"string")&&(e=e.toUpperCase()),a.is(n,"string")&&n&&(s.url=n,s.open=!0,s.method=e,t=!a.is(t,"boolean")||t,l.open(e,n,t,r,i)),a.log({api:"kony.net.HttpRequest.open",exit:!0})})),t.defineProperty(s.prototype,"send",(function(e){var n=kony.$kwebfw$.utils,t=o[this.id],r=t.xhr,i=null;n.log({api:"kony.net.HttpRequest.send",enter:!0}),e instanceof kony.net.FormData?e=e.toString():e?void 0!==window.FormData&&e instanceof window.FormData&&(t.isMultiPartOrBinary=!0):e="",this.enableWithCredentials&&(r.withCredentials=!0),r.count++,r.timeout=!!this.timeout&&this.timeout,r.timeout&&(i=this,t.timeout=setTimeout((function(){i.abort(),i.readyState=r.readyState,i.status=0,i.statusText="Request timed out",i.response="",i.onReadyStateChange()}),this.timeout)),this.responseType&&(r.responseType=this.responseType),t.integrityCheckRequired=l.isIntegrityCheckRequired(t.url,t.disableIntegrityCheck),t.integrityCheckRequired&&l.generateRequestCheckSumAndSetRequestHeader.call(t,e),r.send(e),n.log({api:"kony.net.HttpRequest.send",exit:!0})})),t.defineProperty(s.prototype,"setRequestHeader",(function(e,n){var t=kony.$kwebfw$.utils,r=o[this.id];t.log({api:"kony.net.HttpRequest.setRequestHeader",enter:!0}),e&&"content-type"===e.toLowerCase()&&n&&-1!==["application/octet-stream","multipart/form-data"].indexOf(n.toLowerCase())&&(r.isMultiPartOrBinary=!0),u.call(r,e,n),t.log({api:"kony.net.HttpRequest.setRequestHeader",exit:!0})}));var l={generateRequestCheckSum:function(e,n){var t,o="EMPTY_BODY";return null!==n?o=n:e&&(o=kony.crypto.createHashToUpperCase(r.algo,e)),t="Request:"+r.salt+":"+this.randomString+":"+o,kony.crypto.createHashToUpperCase(r.algo,t)},generateResponseCheckSum:function(e,n){var t,o="EMPTY_BODY";return null!==n?o=n:e&&(o=kony.crypto.createHashToUpperCase(r.algo,e)),t="Response:"+r.salt+":"+this.randomString+":"+o,kony.crypto.createHashToUpperCase(r.algo,t)},generateRequestCheckSumAndSetRequestHeader:function(e){var n,t,o=null;this.randomString=kony.crypto.generateRandomString(),this.isMultiPartOrBinary&&(o=this.randomString),n=l.generateRequestCheckSum.call(this,e,o),t=this.randomString+";"+n,u.call(this,r.headerName,t)},generateResponseCheckSumAndCheckIntegrity:function(e){var n=null,t=null,o=null,s=null,c=function(e,n,t){var o="";return t&&(n.hasOwnProperty(t)||n.hasOwnProperty(t.toLowerCase()))&&(o=i.call(e,t)),o};r.validateResp&&(("true"===c(this,t=a.call(this),r.passthroughHeaderName).trim().toLowerCase()||-1===["application/text","application/json","application/xml","text/xml","text/html","application/rss+xml","text/plain"].indexOf(i.call(this,"Content-Type").split(";")[0]))&&(s=this.randomString),n=l.generateResponseCheckSum.call(this,e,s),o=c(this,t,r.headerName),l.setIntegrityStatus.call(this,n,o))},isIntegrityCheckRequired:function(e,n){var t=!1,o=null,i=null;return r&&!n&&(r.hostNamesList?("undefined"!=typeof document?((i=document.createElement("a")).href=e,o=i.host):o=e.replace("http://","").replace("https://","").replace("wwww.","").split("/")[0],o=o.toLowerCase(),t=l.isIntegrityCheckRequiredForThisHost(o)):t=!0),t},isIntegrityCheckRequiredForThisHost:function(e){var n,t=0,o="",i=!1,a=r.hostNamesList;if((n=a.length)>0){for(t=0;t<n;t++)if((o=a[t]).startsWith("*.")){if(o=o.replace("*.","").toLowerCase(),e.endsWith(o)){i=!0;break}}else if(o===e){i=!0;break}}else i=!0;return i},setIntegrityStatus:function(e,n){e===n?(kony.print("Integrity Successful"),this.integrityStatus=constants.HTTP_INTEGRITY_CHECK_SUCCESSFUL):this.integrityStatus=constants.HTTP_INTEGRITY_CHECK_FAILED},validateHostNamesList:function(e){var n=kony.$kwebfw$.utils,t=0,o=0,r=null,i=null,a=0,s=/^[A-Za-z0-9\\\-]+$/;if(!n.is(e,"undefined")&&!n.is(e,"null")){if(!n.is(e,"array"))throw new n.error("100","Error","Invalid argument :- hostNamesList");for(t=e.length-1;t>=0;t--){if(null==(r=e[t])||""===r.trim())throw new n.error("100","Error","Invalid argument :- hostNamesList");if(r.startsWith("*.")&&(r=r.replace("*.","")),(a=(i=r.split(".")).length)<=1)throw new n.error("100","Error","Invalid argument :- hostNamesList");for(o=a-1;o>=0;o--)if(!s.test(i[o]))throw new n.error("100","Error","Invalid argument :- hostNamesList")}}},validateIntegrityParams:function(e){var n=kony.$kwebfw$.utils;if(!(Object.keys(e).length>0))throw new n.error("101","Error","Invalid number of arguments");if(l.validateIntegrityPropertyType("validateResp",e.validateResp,"boolean"),l.validateIntegrityPropertyType("algo",e.algo,"string"),l.validateIntegrityPropertyType("salt",e.salt,"string"),l.validateIntegrityPropertyType("headerName",e.headerName,"string"),-1===["md5","sha1","sha256","sha512"].indexOf(e.algo.toLowerCase()))throw new n.error("100","Error","Invalid argumment"+e.algo);return e.salt.length>1024&&(e.salt=e.salt.substring(0,1024)),e.headerName.length>64&&(e.headerName=e.headerName.substring(0,64)),e.passthroughHeaderName&&(l.validateIntegrityPropertyType("passthroughHeaderName",e.passthroughHeaderName,"string"),e.passthroughHeaderName.length>64&&(e.passthroughHeaderName=e.passthroughHeaderName.substring(0,64))),l.validateHostNamesList(e.hostNamesList),!0},validateIntegrityPropertyType:function(e,n,t){var o=kony.$kwebfw$.utils;if(typeof n!==t)throw new o.error("100","Error","Invalid argument"+e);return!0}},c=function(e,n){var t=Object.keys(e),o=0,r=0;return"entries"===n?{next:function(){var n="",i=null;return o<t.length?(n=t[o],i=e[n],r>=i.length&&(r=0,o++),{done:!1,value:[n,i[r++]]}):{done:!0,value:void 0}}}:"keys"===n?{next:function(){return o<t.length?{done:!1,value:t[o++]}:{done:!0,value:void 0}}}:"values"===n?{next:function(){var n="",i=null;return o<t.length?(n=t[o],i=e[n],r>=i.length&&(r=0,o++),{done:!1,value:i[r++]}):{done:!0,value:void 0}}}:void 0},u=function(e,n){this.xhr.setRequestHeader(e,n)};return n.defKonyProp(e,[{keey:"cancel",value:function(e){var n=kony.$kwebfw$.utils;n.log({api:"kony.net.cancel",enter:!0}),n.is(e,"object")&&n.is(e.abort,"function")&&(e.userCancelled=!0,e.abort()),n.log({api:"kony.net.cancel",exit:!0})}},{keey:"clearCookies",value:function(e,n){var t=kony.$kwebfw$.utils,o=document&&document.cookie.split(";"),r=null,i=0,a=0,s="/",l="",c=0,u=0;if(t.log({api:"kony.net.clearCookies",enter:!0}),e=e||document.URL,!window||-1===e.indexOf(window.location.origin))throw new t.error(1005,"invalid input url","invalid input url");if(n=n||o)for(r=window.location.pathname.split("/"),a=n.length,i=0;i<a;i++)if(l=n[i].trim(),-1!==document.cookie.indexOf(l))for(u=r.length,c=0;c<u&&(s+=("/"!==s.substr(-1)?"/":"")+r[c],-1!==l.indexOf("=")?document.cookie=l+"; expires=Thu, 01-Jan-1970 00:00:01 GMT;path="+s+";":document.cookie=l+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;path="+s+";",-1!==document.cookie.indexOf(l));c++);t.log({api:"kony.net.clearCookies",exit:!0})}},{keey:"FormData",value:function(e){var n=kony.$kwebfw$.utils,t={};if(n.log({api:"kony.net.FormData",enter:!0}),n.is(e,"object")&&e.isMultiPart&&window.FormData)return new FormData;this.append=function(e,n){var o=kony.$kwebfw$,r=o.utils,i=o.behavior;if(!r.is(e,"string")||!e)throw new Error("FormData append Error: key cannot be empty");i.doNotEncodeFormValue||(n=encodeURIComponent(n)),t[e]?t[e].push(n):t[e]=[n]},this.toString=function(){var e="",n="";for(n in t)""===e?e=n+"="+t[n].join("&"+n+"="):e+="&"+n+"="+t[n].join("&"+n+"=");return e},this.delete=function(e){delete t[e]},this.entries=function(){return c(t,"entries")},this.get=function(e){return t[e][0]},this.getAll=function(e){return t[e]},this.has=function(e){return t.hasOwnProperty(e)},this.keys=function(){return c(t,"keys")},this.set=function(e,n){t[e]=[n]},this.values=function(){return c(t,"values")},n.log({api:"kony.net.FormData",exit:!0})}},{keey:"getActiveNetworkType",value:function(){var e=kony.$kwebfw$.utils;return e.log({api:"kony.net.getActiveNetworkType",enter:!0}),e.is(navigator.onLine,"undefined")||navigator.onLine?(e.log({api:"kony.net.getActiveNetworkType",exit:!0}),constants.NETWORK_TYPE_ANY):(e.log({api:"kony.net.getActiveNetworkType",exit:!0}),null)}},{keey:"getCookies",value:function(e){var n=kony.$kwebfw$.utils,t=null;return n.log({api:"kony.net.getCookies",enter:!0}),n.is(e,"string")&&e&&-1!==e.indexOf(window.location.origin)&&(t=document&&document.cookie)&&t.length>0&&(t=t.split(";")),n.log({api:"kony.net.getCookies",exit:!0}),t}},{keey:"HttpRequest",value:s},{keey:"invokeService",value:function(e,n,t){var o=kony.$kwebfw$.utils;o.log({api:"kony.net.invokeService",enter:!0}),o.log({api:"kony.net.invokeService",exit:!0})}},{keey:"invokeServiceAsync",value:function(e,n,t,o){var r=kony.$kwebfw$.utils;r.log({api:"kony.net.invokeServiceAsync",enter:!0}),r.log({api:"kony.net.invokeServiceAsync",exit:!0})},writable:!0},{keey:"isNetworkAvailable",value:function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.net.isNetworkAvailable",enter:!0}),e){if(e===constants.NETWORK_TYPE_ANY)return n.is(navigator.onLine,"undefined")?(n.log({api:"kony.net.isNetworkAvailable",exit:!0}),!1):(n.log({api:"kony.net.isNetworkAvailable",exit:!0}),navigator.onLine);if(e===constants.NETWORK_TYPE_3G||e===constants.NETWORK_TYPE_WIFI||e===constants.NETWORK_TYPE_ETHERNET)return n.log({api:"kony.net.isNetworkAvailable",exit:!0}),!1;throw new Error("Invalid Network Type")}throw new Error("Invalid Network Type")}},{keey:"loadClientCertificate",value:function(){kony.$kwebfw$.utils.unsupportedAPI("kony.net.loadClientCertificate")}},{keey:"removeAllCachedResponses",value:function(){kony.$kwebfw$.utils.unsupportedAPI("kony.net.removeAllCachedResponses")}},{keey:"removeClientCertificate",value:function(){kony.$kwebfw$.utils.unsupportedAPI("kony.net.removeClientCertificate")}},{keey:"removeIntegrityCheck",value:function(){var e=kony.$kwebfw$.utils;e.log({api:"kony.net.removeIntegrityCheck",enter:!0}),r=null,e.log({api:"kony.net.removeIntegrityCheck",exit:!0})}},{keey:"setIntegrityCheck",value:function(e){var n=kony.$kwebfw$.utils;n.log({api:"kony.net.setIntegrityCheck",enter:!0}),l.validateIntegrityParams(e)&&(n.log("kony.net.setIntegrityCheck",e),r=e),n.log({api:"kony.net.setIntegrityCheck",exit:!0})}},{keey:"setNetworkCallbacks",value:function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.net.setNetworkCallbacks",enter:!0}),!n.is(e,"object")||!n.is(e.statusChange,"function"))throw new Error("Invalid Input : config is not of valid type");n.is(window.ononline,"object")&&window.addEventListener("online",(function(){e.statusChange(navigator.onLine)}),!1),n.is(window.onoffline,"object")&&window.addEventListener("offline",(function(){e.statusChange(navigator.onLine)}),!1),n.log({api:"kony.net.setNetworkCallbacks",enter:!0})}}]),e}()}),Object.defineProperty(kony,"nosql",{configurable:!1,enumerable:!1,writable:!1,value:function(){var _ns={},$K=kony.$kwebfw$,_validTypes=null,_validOrders=null,_validOperators=null,_AND="&&",_ASCENDING="ASC",_DESCENDING="DESC",_EQ="=",_GT=">",_GTE=">=",_LT="<",_LTE="<=",_NEQ="!=",_OR="||",_READ="read",_READ_WRITE="readwrite",_REGEXP=null,_NOT_SUPPORTED_MSG="Your browser doesn't support a stable version of IndexedDB.",_ENDS_WITH="",_CONTAINS="",_NOT_CONTAINS="",_NOT_ENDS_WITH="",_NOT_STARTS_WITH="",_STARTS_WITH="",_iDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,_deleteAllByIndex=function(e,n,t){return new Promise((function(o,r){var i,a,s,l,c=[],u=0;l=function(){++u===c.length&&o()},(i=n.openCursor(t)).onsuccess=function(n){var t,i=kony.$kwebfw$.utils,y=n.target.result;if(y)"safari"===i.browser("name")?(s=y.primaryKey,c.push(s)):((t=y.delete()).onsuccess=function(){},t.onerror=function(e){r(e)}),y.continue();else if(0===c.length)o();else for(a=0;a<c.length;a++)(t=e.delete(c[a])).onsuccess=l.bind(this,u,c),t.onerror=function(e){r(e)}},i.onerror=function(e){r(e)}}))},_evaluate=function(e,n){var t=!1,o=e[n.column],r=n.value;switch(n.operator){case _ENDS_WITH:t=o.indexOf(r)===o.length-r.length;break;case _EQ:t=o===r;break;case _GT:t=o>r;break;case _GTE:t=o>=r;break;case _CONTAINS:t=o.indexOf(r)>=0;break;case _LT:t=o<r;break;case _LTE:t=o<=r;break;case _NEQ:t=o!==r;break;case _NOT_CONTAINS:t=!(o.indexOf(r)>=0);break;case _NOT_ENDS_WITH:t=o.indexOf(r)!==o.length-r.length;break;case _NOT_STARTS_WITH:t=0!==o.indexOf(r);break;case _STARTS_WITH:t=0===o.indexOf(r);break;case _REGEXP:r.lastIndex=0,t=r.test(o)}return t},_expression=function(e,n){var t="",o=0,r=n.length;for(o=0;o<r;o++)n[o]instanceof Array?t+=_expression(e,n[o]):"string"==typeof n[o]?t+=" "+n[o]+" ":"object"==typeof n[o]&&n[o]&&(t+=_evaluate(e,n[o]));return"("+t+")"},_filterRecords=function(e,n){return e.filter((function(e){return _isConditionMatched(e,n)}))},_getAll=function(e){var n=[];return new Promise((function(t,o){var r=e.openCursor();r.onsuccess=function(e){var o,r=e.target.result;r?(o=r.value,n.push(o),r.continue()):t(n)},r.onerror=function(e){o(e)}}))},_getAllByIndex=function(e,n){var t=[];return new Promise((function(o,r){var i=e.openCursor(n);i.onsuccess=function(e){var n,r=e.target.result;r?(n=r.value,t.push(n),r.continue()):o(t)},i.onerror=function(e){r(e)}}))},_getDataBaseName=function(e){return kony.$kwebfw$.app.id+"_"+e},_getKeyRangeValue=function(e){var n;switch(e.operator){case _EQ:n=IDBKeyRange.only(e.value);break;case _GT:n=IDBKeyRange.lowerBound(e.value,!0);break;case _GTE:n=IDBKeyRange.lowerBound(e.value);break;case _LT:n=IDBKeyRange.upperBound(e.value,!0);break;case _LTE:n=IDBKeyRange.upperBound(e.value)}return n},_getObjectValues=function(e){var n,t=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(e[n]);return t},_isConditionOptimizable=function(e,n){var t,o,r,i,a;return e instanceof kony.nosql.Condition&&1===e.data.length&&(o=e.data[0].column,i=e.data[0].operator,r=n.indexNames.contains(o),t=i!==_NEQ&&i!==_REGEXP,a="boolean"==typeof e.data[0].value,r&&t&&!a)},_isConditionMatched=function(record,condition){return eval(_expression(record,condition))},_replaceRecordValues=function(e,n,t){var o;for(o in n)t instanceof Array?-1!==t.indexOf(o)&&(e[o]=n[o]):e[o]=n[o];return e},_updateAllByIndex=function(e,n,t,o){return new Promise((function(r,i){var a,s,l,c=0,u=[];l=function(){++c===u.length&&r()},(a=n.openCursor(t)).onsuccess=function(n){var t,a,y=kony.$kwebfw$.utils,p=n.target.result;if(p)t=p.value,t=_replaceRecordValues(t,o),"safari"===y.browser("name")?u.push(t):((a=p.update(t)).onsuccess=function(){},a.onerror=function(){i()}),p.continue();else if(0===u.length)r();else for(s=0;s<u.length;s++)(a=e.put(u[s])).onsuccess=l.bind(this,c,u),a.onerror=function(e){i(e)}},a.onerror=function(e){i(e)}}))},_addOrReplaceRecords=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.addOrReplaceRecords",enter:!0}),_iDB)return new Promise((function(r,i){var a=0,s=null,l=null,c=null,u=function(e){i(e.target.error)},y=function(){a<t.length?((s=c.put(t[a])).onsuccess=y,s.onerror=u,++a):(o.log({api:"kony.nosql.addOrReplaceRecords",exit:!0}),r())};e instanceof _Transaction||(o.log("error","Pass proper transaction object."),i({errorMsg:"Pass proper transaction object."})),l=e.tx,c=l.objectStore(n),y()}));o.log("error",_NOT_SUPPORTED_MSG)},_addRecords=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.addRecords",enter:!0}),_iDB)return new Promise((function(r,i){var a=0,s=null,l=null,c=null,u=function(e){o.log("error","unknown error"+e.target.error),i(e.target.error)},y=function(){a<t.length?((s=c.add(t[a])).onsuccess=y,s.onerror=u,++a):(o.log({api:"kony.nosql.addRecords",exit:!0}),r())};e instanceof _Transaction?(l=e.tx,c=l.objectStore(n),y()):(o.log("error","Pass proper transaction object."),i({errorMsg:"Pass proper transaction object."}))}));o.log("error",_NOT_SUPPORTED_MSG)},_clearTable=function(e,n){var t=kony.$kwebfw$.utils;if(t.log({api:"kony.nosql.clearTable",enter:!0}),_iDB)return new Promise((function(o,r){var i;e instanceof _Transaction?((i=e.tx.objectStore(n).clear()).onsuccess=function(){t.log({api:"kony.nosql.clearTable",exit:!0}),o()},i.onerror=function(e){r(e.target.error)}):(t.log("error","Pass proper transaction object."),r({errorMsg:"Pass proper transaction object."}))}));t.log("error",_NOT_SUPPORTED_MSG)},_closeDatabase=function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.nosql.closeDatabase",enter:!0}),_iDB)return new Promise((function(t,o){var r;if(e instanceof _DataBase){r=e.db;try{r.close(),delete e.dbOpenRequest,n.log({api:"kony.nosql.closeDatabase",exit:!0}),t()}catch(t){n.log("error","unknown error"+t),delete e.dbOpenRequest,o(t)}}else n.log("error","Pass proper database object."),o({errorMsg:"Pass proper database object."})}));n.log("error",_NOT_SUPPORTED_MSG)},_createIndices=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.createIndices",enter:!0}),_iDB)return new Promise((function(r,i){var a,s,l;try{for(l in a=(s=e.dbOpenRequest.transaction).objectStore(n),t)a.createIndex(l,l,t[l])}catch(e){i(e)}s.oncomplete=function(){o.log({api:"kony.nosql.createIndices",exit:!0}),r(!0)}}));o.log("error",_NOT_SUPPORTED_MSG)},_createTable=function(e,n,t){var o=kony.$kwebfw$.utils,r="",i=t.primaryKey,a=null,s=t.indexes||{},l=e.db;if(o.log({api:"kony.nosql.createTable",enter:!0}),_iDB)for(r in a=l.createObjectStore(n,{keyPath:i,autoIncrement:!1}),s)a.createIndex(r,r,s[r]);else o.log("error",_NOT_SUPPORTED_MSG);o.log({api:"kony.nosql.createTable",exit:!0})},_databaseExists=function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.nosql.databaseExists",enter:!0}),_iDB)return new Promise((function(t,o){var r=_iDB.open(_getDataBaseName(e));r.onupgradeneeded=function(e){e.target.transaction.abort(),n.log({api:"kony.nosql.databaseExists",exit:!0}),t(!1)},r.onsuccess=function(e){var o=e.target.result;n.log({api:"kony.nosql.databaseExists",exit:!0}),t(!0),o.close()},r.onerror=function(e){n.log("error","unknown error"+e.target.error),o(e.target.error)}}));n.log("error",_NOT_SUPPORTED_MSG)},_databaseVersion=function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.nosql.databaseVersion",enter:!0}),_iDB)return new Promise((function(t,o){var r=_iDB.open(_getDataBaseName(e));r.onupgradeneeded=function(e){e.target.transaction.abort(),n.log({api:"kony.nosql.databaseVersion",exit:!0}),t(0)},r.onsuccess=function(e){var o=e.target.result;t(o.version),n.log({api:"kony.nosql.databaseVersion",exit:!0}),o.close()},r.onerror=function(e){n.log("error","unknown error"+e.target.error),o(e.target.error)}}));n.log("error",_NOT_SUPPORTED_MSG)},_deleteDatabase=function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.nosql.deleteDatabase",enter:!0}),_iDB)return new Promise((function(t,o){var r=_iDB.deleteDatabase(_getDataBaseName(e));r.onsuccess=function(){n.log({api:"kony.nosql.deleteDatabase",exit:!0}),t()},r.onerror=function(e){n.log("error","unknown error"+e.target.error),o(e.target.error)}}));n.log("error",_NOT_SUPPORTED_MSG)},_deleteIndices=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.deleteIndices",enter:!0}),_iDB)return new Promise((function(r,i){var a,s,l;try{for(l in a=(s=e.dbOpenRequest.transaction).objectStore(n),t)a.deleteIndex(l)}catch(e){i(e)}s.oncomplete=function(){o.log({api:"kony.nosql.deleteIndices",exit:!0}),r(!0)}}));o.log("error",_NOT_SUPPORTED_MSG)},_deleteRecords=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.deleteRecords",enter:!0}),_iDB)return new Promise((function(r,i){var a,s,l,c;e instanceof _Transaction||(o.log("error","Pass proper transaction object"),i({errorMsg:"Pass proper transaction object"})),a=e.tx.objectStore(n),_isConditionOptimizable(t,a)?(s=t.data[0],l=_getKeyRangeValue(s),c=a.index(s.column),l&&_deleteAllByIndex(a,c,l).then((function(){o.log({api:"kony.nosql.deleteRecords",exit:!0}),r()})).catch((function(e){o.log("error","unknown error"+e.message),i({errorMsg:e.message})}))):a.openCursor().onsuccess=function(e){var n,a=e.target.result;a?(t&&!_isConditionMatched(a.value,t.data)||((n=a.delete()).onsuccess=function(){o.log("info","deleteRecords success")},n.onerror=function(e){i(e.target.error)}),a.continue()):r()}}));o.log("error",_NOT_SUPPORTED_MSG)},_deleteTable=function(e,n){var t=kony.$kwebfw$.utils;if(t.log({api:"kony.nosql.deleteTable",enter:!0}),_iDB)return new Promise((function(o,r){e instanceof _DataBase?(e.db.deleteObjectStore(n),t.log({api:"kony.nosql.deleteTable",exit:!0}),o()):(t.log("error","Pass proper database object."),r({errorMsg:"Pass proper database object."}))}));t.log("error",_NOT_SUPPORTED_MSG)},_fetchRecords=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.fetchRecords",enter:!0}),_iDB)return new Promise((function(r,i){var a,s,l,c,u=null,y=function(e){t instanceof _Condition&&(e=_filterRecords(e,t.data)),u=new _Result(e),o.log({api:"kony.nosql.fetchRecords",exit:!0}),r(u)},p=function(e){o.log("error","unknown error"+e.target.error),i(e.target.error)};e instanceof _Transaction||(o.log("error","Pass proper transaction object"),i({errorMsg:"Pass proper transaction object"})),a=e.tx.objectStore(n),_isConditionOptimizable(t,a)?(s=t.data[0],l=_getKeyRangeValue(s),c=a.index(s.column),l&&_getAllByIndex(c,l).then((function(e){u=new _Result(e),r(u)})).catch((function(e){i(e.target.error)}))):(a.getAll?a=a.getAll():_getAll(a).then((function(e){y(e)})).catch((function(e){p(e)})),a.onsuccess=function(e){y(e.target.result)},a.onerror=p)}));o.log("error",_NOT_SUPPORTED_MSG)},_getPrimaryKeys=function(e,n,t){var o=kony.$kwebfw$.utils,r=null;if(o.log({api:"kony.nosql.getPrimaryKeys",enter:!0}),_iDB)return r=new Promise((function(r,i){var a,s,l=function(e){return"string"==typeof(s=e.tx.objectStore(n)).keyPath?[s.keyPath]:s.keyPath};kony.nosql.tableExists(e,n).then((function(s){s?t?(o.log({api:"kony.nosql.getPrimaryKeys",exit:!0}),r(l(t))):kony.nosql.openTransaction(e,[n],kony.nosql.READ_WRITE,(function(e){a=l(e)})).then((function(){o.log({api:"kony.nosql.getPrimaryKeys",exit:!0}),r(a)})).catch((function(e){i(e)})):(o.log("error","Table doesn't exists."),i({errorMsg:"Table doesn't exists."}))})).catch((function(e){i(e)}))})),r;o.log("error",_NOT_SUPPORTED_MSG)},_getTables=function(e){var n=kony.$kwebfw$.utils;if(n.log({api:"kony.nosql.getTables",enter:!0}),_iDB)return new Promise((function(t,o){var r;e instanceof _DataBase?(r=e.db,n.log({api:"kony.nosql.getTables",exit:!0}),t(_getObjectValues(r.objectStoreNames))):(n.log("error","Pass proper database object."),o({errorMsg:"Pass proper database object."}))}));n.log("error",_NOT_SUPPORTED_MSG)},_openDatabase=function(e,n,t){var o=kony.$kwebfw$.utils;if(o.log({api:"kony.nosql.openDatabase",enter:!0}),_iDB)return new Promise((function(r,i){var a,s;(a=n?_iDB.open(_getDataBaseName(e),n):_iDB.open(_getDataBaseName(e))).onerror=function(e){i(e.target.error)},a.onsuccess=function(){var e=a.result;s=s||new _DataBase(e,"indexedDB",a),o.log({api:"kony.nosql.openDatabase",exit:!0}),r(s)},a.onupgradeneeded=function(e){var n=e.target.result;s=new _DataBase(n,"indexedDB",a),t&&t(s)}}));o.log("error",_NOT_SUPPORTED_MSG)},_openTransaction=function(e,n,t,o){var r=kony.$kwebfw$.utils;if(r.log({api:"kony.nosql.openTransaction",enter:!0}),_iDB)return new Promise((function(i,a){var s=e.db.transaction(n,t),l=new _Transaction(s);o(l),s.oncomplete=function(){r.log({api:"kony.nosql.openTransaction",exit:!0}),i(l)},s.onerror=function(e){r.log("error","unknown error"+e),a(e.target.error)},s.onabort=function(e){r.log("error","unknown error"+e),a(e.target.error)}}));r.log("error",_NOT_SUPPORTED_MSG)},_replaceRecords=function(e,n,t,o){var r=kony.$kwebfw$.utils;if(r.log({api:"kony.nosql.replaceRecords",enter:!0}),_iDB)return new Promise((function(i,a){kony.nosql.fetchRecords(e,n,o).then((function(o){var s,l=0,c=null,u=o.data,y=function(e){a(e.target.error)},p=function(){var e,n;l<u.length?(e=u[l],n="string"==typeof s.keyPath?[s.keyPath]:s.keyPath,e=_replaceRecordValues(t,e,n),(c=s.put(e)).onsuccess=p,c.onerror=y,++l):(r.log({api:"kony.nosql.replaceRecords",exit:!0}),i())};e instanceof _Transaction||(r.log("error","Pass proper transaction object."),a({errorMsg:"Pass proper transaction object."})),s=e.tx.objectStore(n),p()})).catch((function(e){r.log("error","unknown error"+e),a(e)}))}));r.log("error",_NOT_SUPPORTED_MSG)},_tableExists=function(e,n){var t=kony.$kwebfw$.utils;if(t.log({api:"kony.nosql.tableExists",enter:!0}),_iDB)return new Promise((function(o,r){var i;e instanceof _DataBase?kony.nosql.getTables(e).then((function(e){i=-1!==e.indexOf(n),t.log({api:"kony.nosql.tableExists",exit:!0}),o(i)})).catch((function(e){r(e)})):(t.log("error","Pass proper database object."),r({errorMsg:"Pass proper database object."}))}));t.log("error",_NOT_SUPPORTED_MSG)},_updateRecords=function(e,n,t,o){var r=kony.$kwebfw$.utils;if(r.log({api:"kony.nosql.updateRecords",enter:!0}),_iDB)return new Promise((function(i,a){var s,l,c,u;e instanceof _Transaction||(r.log("error","Pass proper transaction object."),a({errorMsg:"Pass proper transaction object"})),l=e.tx.objectStore(n),_isConditionOptimizable(o,l)?(c=o.data[0],s=l.index(c.column),(u=_getKeyRangeValue(c))&&_updateAllByIndex(l,s,u,t).then((function(){r.log({api:"kony.nosql.updateRecords",exit:!0}),i()})).catch((function(e){r.log("error","unknown"+e.message),a({errorMsg:e.message})}))):l.openCursor().onsuccess=function(e){var n,s,l=e.target.result;l?(n=l.value,o&&!_isConditionMatched(n,o.data)||(n=_replaceRecordValues(n,t),(s=l.update(n)).onsuccess=function(){r.log("info","Successfully deleting record.")},s.onerror=function(){a()}),l.continue()):i()}}));r.log("error",_NOT_SUPPORTED_MSG)},_Condition=function(e){var n=kony.$kwebfw$.utils,t=null;_iDB?this instanceof _Condition&&(t=[],Object.defineProperty(this,"data",{configurable:!0,enumerable:!1,get:function(){return this.passReference?t:t.slice(0)}}),Object.defineProperty(this,"data",{configurable:!1,enumerable:!1,set:function(){}}),e instanceof _Rule?t.push({column:e.column,operator:e.operator,value:e.value}):e instanceof _Condition&&t.push(e.data)):n.log("error",_NOT_SUPPORTED_MSG)};Object.defineProperty(_Condition.prototype,"addCondition",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){return _validTypes.indexOf(e)>=0&&n instanceof _Condition&&(this.passReference=!0,this.data.push(e),this.data.push(n.data),delete this.passReference),this}}),Object.defineProperty(_Condition.prototype,"addRule",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){return _validTypes.indexOf(e)>=0&&n instanceof _Rule&&(this.passReference=!0,this.data.push(e),this.data.push({column:n.column,operator:n.operator,value:n.value}),delete this.passReference),this}}),Object.defineProperty(_Condition.prototype,"toString",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e=function(t){var o="",r=0,i=t.length;for(r=0;r<i;r++)t[r]instanceof Array?o+=e(t[r]):"string"==typeof t[r]?o+=" "+t[r]+" ":"object"==typeof t[r]&&t[r]&&(o+=n(t[r]));return"("+o+")"},n=function(e){var n=e.column+" "+e.operator+" ";return"string"==typeof e.value?n+="'"+e.value+"'":n+=e.value,n};return e(this.data)}});var _DataBase=function(e,n,t){var o=kony.$kwebfw$.utils;_iDB?(Object.defineProperty(this,"db",{configurable:!1,enumerable:!1,writable:!1,value:e}),Object.defineProperty(this,"dbType",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(this,"dbOpenRequest",{configurable:!0,enumerable:!1,writable:!1,value:t})):o.log("error",_NOT_SUPPORTED_MSG)},_Result=function(e){var n=kony.$kwebfw$.utils,t=-1,o=-1;_iDB?(e=e instanceof Array?e:[],Object.defineProperty(this,"data",{configurable:!0,enumerable:!1,get:function(){return this.passReference?e:e.slice(0)}}),Object.defineProperty(this,"data",{configurable:!1,enumerable:!1,set:function(){}}),Object.defineProperty(this,"length",{configurable:!0,enumerable:!1,get:function(){return-1===o&&(o=e.length),o}}),Object.defineProperty(this,"length",{configurable:!1,enumerable:!1,set:function(){}}),Object.defineProperty(this,"next",{configurable:!0,enumerable:!1,get:function(){return++t>=0&&t<e.length}}),Object.defineProperty(this,"next",{configurable:!1,enumerable:!1,set:function(){}}),Object.defineProperty(this,"record",{configurable:!0,enumerable:!1,get:function(){return t>=0&&t<e.length?e[t]:null}}),Object.defineProperty(this,"record",{configurable:!1,enumerable:!1,set:function(){}})):n.log("error",_NOT_SUPPORTED_MSG)};Object.defineProperty(_Result.prototype,"groupBy",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){var t;this.passReference=!0,t=this.data,delete this.passReference;var o={};if(e instanceof Array)try{return function(){var n,r,i,a;for(i=0;i<t.length;i++){for(n=t[i],r="",a=0;a<e.length;a++)r+=n[e[a]],a<e.length-1&&(r+="&_");r in o?o[r].push(n):o[r]=[n]}}(),function(){var e,t,r=[],i=[];for(t in o)r.push(o[t]);if("number"==typeof n){for(e=0;e<r.length;e++)n>=0?i.push(r[e][n]):(t=r[e].length+n,i.push(r[e][t]));return i}return r}()}catch(e){throw e}}}),Object.defineProperty(_Result.prototype,"limit",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){var t=null,o=null,r=0,i=0;if("number"==typeof e&&"number"==typeof n&&e>=0&&n>=0)for(this.passReference=!0,t=this.data,delete this.passReference,i=(o=t.splice(0)).length,r=e;r<=n&&r<i;r++)t.push(o[r]);return this}}),Object.defineProperty(_Result.prototype,"sort",{configurable:!1,enumerable:!1,writable:!1,value:function(e,n){var t=null;if(this.passReference=!0,t=this.data,delete this.passReference,"function"==typeof e)t.sort(e);else if("string"==typeof e&&_validOrders.indexOf(n)>=0)t.sort((function(t,o){return t=t[e],o=o[e],n===kony.nosql.ASCENDING?t>o?1:t<o?-1:0:t>o?-1:t<o?1:0}));else if(e instanceof Array&&_validOrders.indexOf(n)>=0){var o,r=[];for(r=function n(t,o,r){var i,a=[],s=[];if(o>=e.length)return t;for(function(e,n,t){e.sort((function(e,o){return e=e[n],o=o[n],t===kony.nosql.ASCENDING?e>o?1:e<o?-1:0:e>o?-1:e<o?1:0}))}(t,e[o],r),a=function(e,n){var t,o,r=[],i=[];for(i.push(e[0]),o=e[0][n],t=1;t<e.length;t++)e[t][n]===o||(1===i.length?r.push(i[0]):r.push(i),i=[],o=e[t][n]),i.push(e[t]);return r.push(i),r}(t,e[o]),i=0;i<a.length;i++)a[i]instanceof Array&&(s=n(a[i],o+1,r),a[i]=s);return a=function(e){var n,t,o=[];for(n=0;n<e.length;n++)if(e[n]instanceof Array)for(t=0;t<e[n].length;t++)o.push(e[n][t]);else o.push(e[n]);return o}(a),a}(r=this.data,0,n),t.splice(0,t.length),o=0;o<r.length;o++)t.push(r[o])}return this}});var _Rule=function(e,n,t){var o=kony.$kwebfw$.utils;if(_iDB)if(this instanceof _Rule){if(!(n!==_REGEXP||t instanceof RegExp))throw Error("Invalid arguments.");3===arguments.length&&"string"==typeof e&&e&&_validOperators.indexOf(n)>=0&&(Object.defineProperty(this,"column",{configurable:!0,enumerable:!0,get:function(){return e}}),Object.defineProperty(this,"column",{configurable:!1,enumerable:!0,set:function(n){e=n}}),Object.defineProperty(this,"operator",{configurable:!0,enumerable:!0,get:function(){return n}}),Object.defineProperty(this,"operator",{configurable:!1,enumerable:!0,set:function(e){n=e}}),Object.defineProperty(this,"value",{configurable:!0,enumerable:!0,get:function(){return t}}),Object.defineProperty(this,"value",{configurable:!1,enumerable:!0,set:function(e){t=e}}))}else;else o.log("error",_NOT_SUPPORTED_MSG)},_Transaction=function(e){var n=kony.$kwebfw$.utils;_iDB?Object.defineProperty(this,"tx",{configurable:!1,enumerable:!1,writable:!1,value:e}):n.log("error",_NOT_SUPPORTED_MSG)};return _iDB&&(_validTypes=[_AND,_OR],_validOrders=[_ASCENDING,_DESCENDING],_validOperators=[_EQ,_GT,_GTE,_LT,_LTE,_NEQ,_REGEXP]),$K.defKonyProp(_ns,[{keey:"addOrReplaceRecords",value:_addOrReplaceRecords},{keey:"addRecords",value:_addRecords},{keey:"clearTable",value:_clearTable},{keey:"closeDatabase",value:_closeDatabase},{keey:"Condition",value:_Condition},{keey:"createIndices",value:_createIndices},{keey:"createTable",value:_createTable},{keey:"databaseExists",value:_databaseExists},{keey:"databaseVersion",value:_databaseVersion},{keey:"deleteDatabase",value:_deleteDatabase},{keey:"deleteIndices",value:_deleteIndices},{keey:"deleteRecords",value:_deleteRecords},{keey:"deleteTable",value:_deleteTable},{keey:"fetchRecords",value:_fetchRecords},{keey:"getPrimaryKeys",value:_getPrimaryKeys},{keey:"getTables",value:_getTables},{keey:"openDatabase",value:_openDatabase},{keey:"openTransaction",value:_openTransaction},{keey:"replaceRecords",value:_replaceRecords},{keey:"Rule",value:_Rule},{keey:"tableExists",value:_tableExists},{keey:"updateRecords",value:_updateRecords},{keey:"AND",value:_AND},{keey:"ASCENDING",value:_ASCENDING},{keey:"DESCENDING",value:_DESCENDING},{keey:"EQ",value:_EQ},{keey:"GT",value:_GT},{keey:"GTE",value:_GTE},{keey:"LT",value:_LT},{keey:"LTE",value:_LTE},{keey:"NEQ",value:_NEQ},{keey:"OR",value:_OR},{keey:"READ",value:_READ},{keey:"READ_WRITE",value:_READ_WRITE},{keey:"REGEXP",value:_REGEXP}]),_ns}()}),Object.defineProperty(kony,"os",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={};return kony.$kwebfw$.defKonyProp(e,[{keey:"deviceInfo",value:function(){var e=kony.$kwebfw$,n=e.utils,t={};return n.log({api:"kony.os.deviceInfo",enter:!0}),t.category=n.browser("name"),"msie"===t.category?t.category="IE":t.category=t.category[0].toUpperCase()+t.category.substr(1),t.deviceid=function(){var e=kony.$kwebfw$,n=e.utils,t=e.app,o="",r=null,i=null;if(window.localStorage&&"function"==typeof localStorage.getItem){if("string"==typeof(i=localStorage.getItem(t.id))&&i)try{r=JSON.parse(i)}catch(e){r=i}"object"==typeof r&&r&&("string"==typeof r.deviceId&&r.deviceId?o=r.deviceId:(r.deviceId=o=n.uuid(),localStorage.setItem(t.id,JSON.stringify(r))))}else"string"==typeof t.id&&t.id&&(o=n.uuid());return o}(),t.deviceHeight=screen.availHeight,t.deviceWidth=screen.availWidth,t.hascamera=n.browser("supports","usermedia"),t.hasgps=n.browser("supports","geolocation"),t.hastouchsupport=n.browser("supports","touch"),t.hasorientationsupport=n.browser("supports","orientation"),t.httpheaders="//TODO::",t.imagecat=e.device.resolution,t.ip="",t.iswifiavailable=!n.is(navigator.onLine,"boolean")||navigator.onLine,t.model="",t.name="thinclient",t.screenHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t.screenWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t.type="spa",t.userAgent=navigator.userAgent,t.version=n.browser("version"),n.log({api:"kony.os.deviceInfo",exit:!0}),t}},{keey:"userAgent",value:function(){var e=kony.$kwebfw$.utils;return e.log({api:"kony.os.userAgent",enter:!0}),e.log({api:"kony.os.userAgent",exit:!0}),navigator.userAgent}}]),e}()}),Object.defineProperty(kony.$kwebfw$,"store",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={},n=kony.$kwebfw$,t={local:{clear:function(){window.localStorage&&localStorage.clear()},fetch:function(e){var n=kony.$kwebfw$.utils,t=null;return window.localStorage&&(t=localStorage.getItem(e),t=n.is(t,"string")?t:null),t},put:function(e,n){var t=!0;if(window.localStorage)try{localStorage.setItem(e,n)}catch(e){t=!1,"QUOTA_EXCEEDED_ERR"!==e.name&&"QuotaExceededError"!==e.name||localStorage.length}else t=!1;return t},remove:function(e){window.localStorage&&localStorage.removeItem(e)}},session:{clear:function(){window.sessionStorage&&sessionStorage.clear()},fetch:function(e){return window.sessionStorage?sessionStorage.getItem(e):null},put:function(e,n){if(window.sessionStorage)try{sessionStorage.setItem(e,n)}catch(e){"QUOTA_EXCEEDED_ERR"!==e.name&&"QuotaExceededError"!==e.name||sessionStorage.length}},remove:function(e){window.sessionStorage&&sessionStorage.removeItem(e)}}};return n.defKonyProp(e,[{keey:"clear",value:function(e){t[e]&&t[e].clear()}},{keey:"fetch",value:function(e,n){return t[e]?t[e].fetch(n):null}},{keey:"put",value:function(e,n,o){return!!t[e]&&t[e].put(n,o)}},{keey:"remove",value:function(e,n){t[e]&&t[e].remove(n)}}]),e}()}),Object.defineProperty(kony,"timer",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e={},n={},t=kony.$kwebfw$,o=function(e){var t=kony.$kwebfw$.utils,o=null,r=null;if(t.log({api:"kony.timer.cancel",enter:!0}),t.is(e,"string")&&e||t.is(e,"number")){if(e=""+e,!Object.prototype.hasOwnProperty.call(n,e))return t.log("warn",'No timer found with id="'+e+'".'),t.log({api:"kony.timer.cancel",exit:!0}),null;r=(o=n[e]).repeat?"clearInterval":"clearTimeout",window[r](o.id),delete n[e],t.log({api:"kony.timer.cancel",exit:!0})}else t.log({api:"kony.timer.cancel",exit:!0})};return t.defKonyProp(e,[{keey:"cancel",value:o},{keey:"schedule",value:function(e,t,r,i){var a=kony.$kwebfw$.utils,s=null;a.log({api:"kony.timer.schedule",enter:!0}),(a.is(e,"string")&&e||a.is(e,"number"))&&a.is(t,"function")&&a.is(r,"number")&&(e=""+e,a.is(i,"boolean")||(i=!1),n[e]={callback:t,repeat:i},s=i?"setInterval":"setTimeout",n[e].id=window[s]((function(){n[e]&&n[e].callback(),!i&&o(e)}),1e3*r)),a.log({api:"kony.timer.schedule",exit:!0})}},{keey:"setCallBack",value:function(e,t){var o=kony.$kwebfw$.utils,r=null;o.log({api:"kony.timer.setCallBack",enter:!0}),(o.is(e,"string")&&e||o.is(e,"number"))&&o.is(t,"function")&&(r=n[""+e])&&(r.callback=t),o.log({api:"kony.timer.setCallBack",exit:!0})}}]),e}()}),kony.license={},kony.license.disableMetricReporting=function(){kony.ds.save(["true"],"LicenseDisableFlag")},kony.licensevar={},kony.licensevar.didAppWentInBackground=!1,kony.license.timeoutValue=14400,kony.license.version="9.3.0.3",kony.licensevar.currentSessionId="",kony.licensevar.latestSessionCreationTimestamp="",kony.licensevar.maxSessionCountLimit=100,kony.licensevar.changeHandlers=[],kony.licensevar.isLicenseUrlAvailable=!0,kony.licensevar.isISTNetworkCallProcessingInProgress=!1,kony.licensevar.deferredNewSessionsCounter=0,kony.licensevar.isInteractive=!1,kony.licensevar.isPostAppInitCalled=!1,kony.licensevar.timesAppBecomeInteractive=0,kony.licensevar.maxDeferSessionCount=15,kony.licensevar.appLaunch="appLaunch",kony.licensevar.appStateCallbackFunction=function(){kony.licensevar.timesAppBecomeInteractive++,kony.license.log("appStateCallbackFunction:: isPostAppInitCalled :"+kony.licensevar.isPostAppInitCalled+" ,isInteractive :"+kony.licensevar.isInteractive),!1===kony.licensevar.isInteractive?(kony.licensevar.isInteractive=!0,kony.license.log("App is in interactive state"),!0===kony.licensevar.isPostAppInitCalled&&(kony.license.log("Creating and sending a new interactive session details."),kony.license.sendNewIST())):kony.license.log("Warning: appStateCallbackFunction is called "+kony.licensevar.timesAppBecomeInteractive+" times, ignoring the interactive app state event")},kony.licensevar.callbacksObjList={},kony.licensevar.callbacksObjList.isAppLaunchedForInteraction={},kony.licensevar.callbacksObjList.isAppLaunchedForInteraction.appStateCallbackFunction=kony.licensevar.appStateCallbackFunction,kony.license.maxWaitTimeToHandleMultipleNewSessions=60,kony.license.constants={},kony.license.constants.THIN_CLIENT="thinclient",kony.license.constants.LAUNCH_PARAMS="launchparams",kony.license.constants.REUSABLE_SESSION_ID="reusable_session_id",kony.license.constants.KEY_KONY_LICENSE_TIMEOUT="konyLicenseTimeout",kony.license.setLogging=function(e){!0===e?kony.ds.save([!0],"LicenseLoggingFlag"):kony.ds.save([!1],"LicenseLoggingFlag")},kony.license.log=function(e){try{var n=kony.ds.read("LicenseLoggingFlag")}catch(e){}null!=n&&null!=n[0]&&null!=n[0]&&!0===n[0]&&kony.print("[License] :"+e)},kony.license.isLicenseUrlAvailable=function(){return kony.licensevar.isLicenseUrlAvailable},kony.license.setIsLicenseUrlAvailable=function(e){kony.licensevar.isLicenseUrlAvailable=e},kony.license.getSessionId=function(){return kony.licensevar.currentSessionId};var konyUserID=function(){var e={encryptedKonyuserId:"konyUserID_ENC",konyuserId:"konyUserID"},n="konyUserID_ENC",t="aes",o=function(o){if(null!=o&&null!=o&&"string"==typeof o){o=function(e,n,t){var o=kony.os.deviceInfo().name.toString().toLowerCase(),i=r([n]),a=kony.crypto.encrypt(t,i,e,{});"thinclient"!==o&&(a=kony.convertToBase64(a));return a}(o,n,t);var i=new Array;i.push(o),kony.ds.save(i,e.encryptedKonyuserId)}};function r(e){var n=e;return null==e&&null==e||(n=kony.crypto.newKey("passphrase",128,{passphrasetext:e,subalgo:t,passphrasehashalgo:"md5"})),n}return{set:o,get:function(){var i=new Array,a=kony.ds.read(e.encryptedKonyuserId);if(null==a||void 0===a[0]){if(null==(a=kony.ds.read(e.konyuserId))||null==a||null==a[0])return null;a=a[0],o(a),kony.ds.remove(e.konyuserId)}else a=function(e,n,t){var o=kony.os.deviceInfo().name.toString().toLowerCase(),i=r([n]),a=e;"thinclient"!==o&&(a=kony.convertToRawBytes(e));var s=kony.crypto.decrypt(t,i,a,{});return s}(a[0],n,t);return i.push(a),i}}};function cloudSessionCallback(){kony.license.log("Cloud session timed out."),kony.ds.remove("konyLastAccessTime"),kony.ds.remove("konyUUID"),kony.ds.remove("konyCustomReportData"),kony.ds.remove("konyOfflineAccessData"),kony.license.pushKonySessionsToServer(),kony.cloud.appevents.unregisterforidletimeout(),kony.cloud.appevents.registerforidletimeout(30,cloudSessionCallback)}kony.license.registerChangeListener=function(e){if(e){var n={},t=konyUserID().get.call(this);n.sessionId=kony.licensevar.currentSessionId,null!=t&&null!=t[0]&&null!=t[0]&&(n.userId=t[0]),kony.license.isNullOrUndefined(kony.licensevar.currentSessionId)||e(n),kony.licensevar.changeHandlers.push(e)}},kony.license.notifyChangesToListeners=function(){for(var e=0;e<kony.licensevar.changeHandlers.length;e++){var n={},t=konyUserID().get.call(this);n.sessionId=kony.licensevar.currentSessionId,null!=t&&null!=t[0]&&null!=t[0]&&(n.userId=t[0]),(0,kony.licensevar.changeHandlers[e])(n)}},kony.license.processDeferredNewSessions=function(){kony.license.log("sending deferred launch date - "+kony.licensevar.currentSessionId),kony.licensevar.isISTNetworkCallProcessingInProgress=!1,kony.licensevar.deferredNewSessionsCounter=0,kony.license.pushKonySessionsToServer(!0)},kony.license.isNullOrUndefined=function(e){var n=!1;return null==e&&(n=!0),n},kony.license.startLicenseService=function(){"use strict";var e=kony.os.deviceInfo();function n(n,t){if(!n)return null;if(kony.license.log("Entering into getfromserverurl when IST-base url is not defined"),"thinclient"===e.name)return(n=n.replace(/mwservlet\/*$/i,""))+t;var o=n.match(/mwservlet/i),r=null;if(o){var i="mwservlet".length,a=n.lastIndexOf(o),s=n.slice(0,a),l=a+i,c=n.slice(l,n.length);r=/[a-zA-Z0-9]/.test(c)?n:s}else r=n;return r+t}kony.license.log("startLicenseService deviceInfo "+JSON.stringify(e)),kony.setUserID=function(e,n){null!=n&&null!=n||(n=!1);var t=kony.ds.read("userIDFromLicenseFlag");if(!t||"true"!=t[0]||!n){if(!n){var o=new Array;o.push("true"),kony.ds.save(o,"userIDFromLicenseFlag")}konyUserID().set.call(this,e),kony.license.notifyChangesToListeners()}},kony.license.generateUUID=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(new Date).getTime()+"-"+e()+"-"+e()+"-"+e()},kony.license.isCloud=function(){var e=!0,n=kony.ds.read("LicenseDisableFlag");return!n||"true"!==n[0]&&"true"!==n||(e=!1),!1===kony.license.isLicenseUrlAvailable()&&(e=!1),e},kony.license.getCurrentDateTime=function(){var e,n;return kony.license.log("getCurrentDateTime.."),n=(e=new Date).getUTCMonth()+1,("00"+e.getUTCFullYear()).slice(-4)+"-"+("00"+n).slice(-2)+"-"+("00"+e.getUTCDate()).slice(-2)+" "+("00"+e.getUTCHours()).slice(-2)+":"+("00"+e.getUTCMinutes()).slice(-2)+":"+("00"+e.getUTCSeconds()).slice(-2)},kony.license.appendLicenseTrackingKeys=function(n,t){kony.license.log("appendLicenseTrackingKeys deviceinfo ---\x3e "+JSON.stringify(e));var o={};if(!0===kony.license.isCloud()){if(o.plat=e.name,void 0!==kony.sdk?(o.chnl=kony.sdk.getChannelType(),o.did=kony.sdk.getDeviceId(),o.plat=kony.sdk.getPlatformName()):(o.chnl="fpApp",o.did="fp-"+kony.license.generateUUID(),o.plat="fp"),o.aid=appConfig.appId,o.aver=appConfig.appVersion,o.aname=appConfig.appName,"undefined"!=typeof konyRef&&null!=konyRef&&konyRef.mainRef&&(o.mfaid=konyRef.mainRef.appId,o.mfbaseid=konyRef.mainRef.baseId,o.mfaname=konyRef.mainRef.name),kony.application.getCurrentForm()){var r=kony.application.getCurrentForm().id;r&&(o.fid=r)}o.atype=function(e){if("thinclient"===e)return"spa";var n=kony.application.getApplicationMode();return n===constants.APPLICATION_MODE_NATIVE?"native":n===constants.APPLICATION_MODE_HYBRID?"hybrid":n===constants.APPLICATION_MODE_WRAPPER?"mixedmode":""}(e.name),o.os=e.version,o.stype="b2c",o.dm=e.model,o.ua=kony.os.userAgent(),o.sessiontype=!0===kony.licensevar.isInteractive?"I":"NI";var i=konyUserID().get.call(this);if(null!=i&&i.length>0?o.kuid=i[0]:o.kuid="","session"===n){if(kony.license.checkAndCreateSession(),!0===kony.licensevar.isISTNetworkCallProcessingInProgress||kony.licensevar.deferredNewSessionsCounter>0){if(kony.licensevar.deferredNewSessionsCounter>0)try{kony.license.log("cancelling the previous timer, as in span of "+kony.license.maxWaitTimeToHandleMultipleNewSessions+" seconds, a new IST was fired immediately"),kony.timer.cancel("konySession"+(kony.licensevar.deferredNewSessionsCounter-1))}catch(e){kony.license.log("error - "+JSON.stringify(e)+",  while cancelling the deferred session timer to send launch dates with timer id"+(kony.licensevar.deferredNewSessionsCounter-1))}return kony.timer.schedule("konySession"+kony.licensevar.deferredNewSessionsCounter++,kony.license.processDeferredNewSessions,kony.license.maxWaitTimeToHandleMultipleNewSessions,!1),kony.license.log("another session is in progress , we will try again"),{}}var a=kony.license.getStoredSession();o.launchDates=a,kony.licensevar.isISTNetworkCallProcessingInProgress=!0,o.svcid="RegisterKonySession",kony.license.log("----------\x3eLaunchDates : "+o.launchDates)}else{var s=kony.ds.read("konyUUID");null!=s&&s.length>0?o.rsid=s[0]:o.rsid=kony.license.generateUUID().toString()}}return kony.license.log("input params in appendLicenseTrackingKeys are "+JSON.stringify(o)),o},kony.license.checkAndCreateSession=function(){kony.license.log("check and create session..");var e=kony.ds.read("konyUUID");null!=e&&e.length>0?kony.licensevar.currentSessionId=e[0]:kony.license.createSession()},kony.licensevar.sdkTimerCounter=0,kony.license.prepare4HoursTimer=function(){if(kony.license.log("Entering prepare4HoursTimer, counter value-"+kony.licensevar.sdkTimerCounter),0!==kony.licensevar.sdkTimerCounter)try{var e=kony.license.constants.KEY_KONY_LICENSE_TIMEOUT+(kony.licensevar.sdkTimerCounter-1);kony.timer.cancel(e)}catch(e){kony.license.log("the error object while cancelling the timer is"+e)}},kony.license.schedule4HoursTimer=function(){kony.license.log("Entering schedule4HoursTimer, counter value-"+kony.licensevar.sdkTimerCounter);var e=kony.license.constants.KEY_KONY_LICENSE_TIMEOUT+kony.licensevar.sdkTimerCounter++;kony.timer.schedule(e,kony.license.sendNewIST,kony.license.timeoutValue,!1)},kony.license.createSession=function(){kony.license.prepare4HoursTimer();var e=new Array;kony.licensevar.currentSessionId=kony.license.generateUUID().toString(),kony.licensevar.latestSessionCreationTimestamp=kony.license.getCurrentDateTime(),e.push(kony.licensevar.currentSessionId),kony.ds.save(e,"konyUUID"),kony.license.storeSession(),kony.license.notifyChangesToListeners(),kony.license.schedule4HoursTimer()},kony.license.storeSession=function(){var e=kony.licensevar.currentSessionId,n=kony.license.getStoredSession();null==n&&(n=new Array);var t=new Array;t.push(e),t.push(kony.licensevar.latestSessionCreationTimestamp);var o=!0===kony.licensevar.isInteractive?"I":"NI";if(t.push(o),0===n.length||n[n.length-1][0]!==t[0]?(n.length>0&&kony.licensevar.deferredNewSessionsCounter>0&&n.pop(),n.push(t)):(kony.license.log("Ignoring duplicate session: "+JSON.stringify(t)),n[n.length-1][2]=kony.licensevar.isInteractive.toString()),n.length>kony.licensevar.maxSessionCountLimit){kony.license.log("Trimming to latest "+kony.licensevar.maxSessionCountLimit+" records, total records found - "+n.length);var r=n.length-kony.licensevar.maxSessionCountLimit;n=n.slice(r)}kony.ds.save(n,"konyOfflineAccessData"),kony.license.log("offlineData saved")},kony.license.getStoredSession=function(){return kony.ds.read("konyOfflineAccessData")},kony.license.sendNewIST=function(){kony.license.createSession(),kony.license.pushKonySessionsToServer(!0)},kony.license.handleISTInvocation=function(e,n,t){var o=kony.license.getStoredSession();!kony.licensevar.isInteractive&&o&&o.length>=kony.licensevar.maxDeferSessionCount||kony.licensevar.isInteractive?kony.license.invokeIST(e,n,kony.license.licenseUsageServiceSuccessCallback,kony.license.licenseUsageServiceFailureCallback,t):kony.licensevar.isISTNetworkCallProcessingInProgress=!1},kony.license.licenseUsageServiceSuccessCallback=function(e){kony.licensevar.isISTNetworkCallProcessingInProgress=!1,kony.license.log("launch dates sent successfully. result - "+JSON.stringify(e)),kony.ds.remove("konyOfflineAccessData"),kony.ds.remove("konyOfflineSessionsCount")},kony.license.licenseUsageServiceFailureCallback=function(e){var n,t;kony.licensevar.isISTNetworkCallProcessingInProgress=!1,kony.license.log("launch dates weren't sent successfully. result - "+JSON.stringify(e)),null==(t=kony.ds.read("konyOfflineSessionsCount"))||t.length<1?(t=new Array).push(1):t[0]>=500||(n=t[0]+1,t[0]=n),kony.ds.save(t,"konyOfflineSessionsCount")},kony.license.captureKonyLicenseUsage=function(e){kony.license.pushKonySessionsToServer(e)},kony.license.pushKonySessionsToServer=function(t){var o,r,i;kony.license.log("capturing license information..");var a,s=!0;if((null==t||!0!==t)&&(t=!1),!1===kony.license.isCloud()&&(kony.license.log("session tracking is turned off"),s=!1),void 0!==kony.ds.read("konyLastAccessTime")&&null!==kony.ds.read("konyLastAccessTime")&&(o=new Date,r=new Date(kony.ds.read("konyLastAccessTime")[0]),o.getTime()-r.getTime()<18e5&&!1===t?s=!1:kony.ds.remove("konyLastAccessTime")),!0===s){var l={},c={};"thinclient"!==e.name&&(c.httpRequestOptions=[],c.httpRequestOptions.timeoutIntervalForRequest=60),a="",appConfig.isturlbase?a=appConfig.isturlbase+"/IST":appConfig.secureurl?a=n(appConfig.secureurl,"IST"):appConfig.url&&(a=n(appConfig.url,"IST")),i=a,l.konyreportingparams=JSON.stringify(kony.license.appendLicenseTrackingKeys("session"),null),c.disableIntegrity=!0,"{}"!==l.konyreportingparams&&kony.license.handleISTInvocation(i,l,c)}},kony.license.backgroundTimeCapture=function(){if(kony.license.log("app is going to background.."),!0===kony.license.isCloud()){var e=new Array;e.push((new Date).toString()),kony.ds.save(e,"konyLastAccessTime")}},kony.license.clearLastAccess=function(){kony.license.log("clear last access.."),!0===kony.license.isCloud()&&kony.ds.remove("konyLastAccessTime")},kony.license.setAppCallbacksOverride=function(){kony.license.log("overriding kony.application.setApplicationCallbacks..");var n=kony.application.setApplicationCallbacks;if(kony.application.setApplicationCallbacks=function(t){if(!0===kony.license.isCloud()&&null!=t){if(void 0!==t.onforeground&&null!==t.onforeground){var o=t.onforeground;t.onforeground=function(){!0===kony.licensevar.didAppWentInBackground&&kony.license.pushKonySessionsToServer(!1),"thinclient "!==e.name&&void 0!==kony.sync&&(kony.sync.isAppInBackground=!1),kony.licensevar.didAppWentInBackground=!1,o()}}if(void 0!==t.onbackground&&null!==t.onbackground){var r=t.onbackground;t.onbackground=function(){kony.licensevar.didAppWentInBackground=!0,kony.license.backgroundTimeCapture(),void 0!==kony.sdk&&void 0!==kony.sdk.metric&&kony.sdk.metric.saveInDS(),"thinclient "!==e.name&&void 0!==kony.sync&&(kony.sync.isAppInBackground=!0),r()}}if(void 0!==t.onappterminate&&null!==t.onappterminate){var i=t.onappterminate;t.onappterminate=function(){kony.license.clearLastAccess(),void 0!==kony.sdk&&void 0!==kony.sdk.metric&&kony.sdk.metric.saveInDS(),i()}}}return n(t)},"thinclient "!==e.name){kony.application.setApplicationCallbacks({onforeground:function(){},onbackground:function(){},onappterminate:function(){}})}},kony.license.invokeServiceAsyncOverride=function(){kony.license.log("overriding kony.net.invokeServiceAsync..");var e=kony.net.invokeServiceAsync;kony.net.invokeServiceAsync=function(n,t,o,r,i,a){return!0===kony.license.isCloud()&&(null==t&&(t={}),null==t||function(e){if(e&&e.httpconfig&&e.httpconfig.method&&"get"===e.httpconfig.method)return!0;return!1}(t)||(t.konyreportingparams=null!=i?s(t.konyreportingparams,i,a):s(t.konyreportingparams,null,null))),e(n,t,o,r);function s(e,n,t){var o=kony.license.appendLicenseTrackingKeys(n,t);if(!e)return JSON.stringify(o);try{for(var r in"string"==typeof e&&(e=JSON.parse(e)),o)void 0===e[r]&&(e[r]=o[r]);return JSON.stringify(e)}catch(n){return kony.license.log("unable to parse params "+e),JSON.stringify(o)}}}},kony.license.invokeServiceSyncOverride=function(){kony.license.log("overriding kony.net.invokeServiceSync..");var e=kony.net.invokeServiceSync;kony.net.invokeServiceSync=function(n,t,o){return!0===kony.license.isCloud()&&(null==t&&(t={}),null!=t&&(t.konyreportingparams=JSON.stringify(kony.license.appendLicenseTrackingKeys(null)))),e(n,t,o)}},kony.os.deviceInfo().name===kony.license.constants.THIN_CLIENT&&(kony.license.doesLaunchParamsHaveCode=function(e){kony.license.log("Entering doesLaunchParamsHaveCode");var n=!kony.license.isNullOrUndefined(e)&&!kony.license.isNullOrUndefined(e[kony.license.constants.LAUNCH_PARAMS])&&!kony.license.isNullOrUndefined(e[kony.license.constants.LAUNCH_PARAMS].code);return n||(kony.license.log("code was not present in launch params"),kony.license.removeReusableSession()),kony.license.log("code was present in launch params"),n},kony.license.saveCurrentSessionForReuse=function(){kony.license.log("Entering saveCurrentSessionForReuse");var e=[kony.licensevar.currentSessionId];kony.ds.save(e,kony.license.constants.REUSABLE_SESSION_ID)},kony.license.reuseLastSession=function(){kony.license.log("Entering reuseLastSession");var e=!1,n=kony.ds.read(kony.license.constants.REUSABLE_SESSION_ID);return kony.license.isNullOrUndefined(n)||kony.license.isNullOrUndefined(n[0])||(kony.license.log("successfully reused session"),kony.license.prepare4HoursTimer(),kony.licensevar.currentSessionId=n[0],kony.license.notifyChangesToListeners(),e=!0,kony.license.schedule4HoursTimer()),kony.license.removeReusableSession(),e},kony.license.removeReusableSession=function(){kony.license.log("removing reusable session"),kony.ds.remove(kony.license.constants.REUSABLE_SESSION_ID)}),kony.license.prepareLicenseSessionOnPostAppInit=function(e){if((kony.license.log("Entering prepareLicenseSessionOnPostAppInit"),kony.ds.save([!0],kony.licensevar.appLaunch),kony.os.deviceInfo().name===kony.license.constants.THIN_CLIENT&&kony.license.doesLaunchParamsHaveCode(e))&&kony.license.reuseLastSession())return void kony.license.log("last session reused inside postappinit");kony.license.log("creating new session inside postappinit"),kony.license.createSession(),kony.license.pushKonySessionsToServer(!0)},kony.license.setAppInitializationEventsOverride=function(){var e=kony.application.setApplicationInitializationEvents;kony.application.setApplicationInitializationEvents=function(n){if(kony.license.log("setApplicationInitializationEvents events "+n),kony.licensevar.isPostAppInitCalled=!0,!0===kony.license.isCloud()&&null!=n){var t=n.postappinit;if(kony.license.isNullOrUndefined(t))n.postappinit=kony.license.prepareLicenseSessionOnPostAppInit;else{n.postappinit=function(e){kony.license.prepareLicenseSessionOnPostAppInit(e);var n=t.apply(this,arguments);if(void 0!==n||null!==n)return n}}if(kony.os.deviceInfo().name===kony.license.constants.THIN_CLIENT){function o(e,n){if(kony.license.log("Entering doLoginWithCode"),kony.license.doesLaunchParamsHaveCode(e)){kony.license.log("code launch param found, requesting sdk to complete login");var t=e[kony.license.constants.LAUNCH_PARAMS].code;kony.sdk.completeSingleWindowLogin(t,n)}else kony.license.log("no code launch param found, skipping login for same window login"),n()}n.appServiceAsync=function(e,n){kony.license.log("Entering appServiceAsyncFunction"),o(e,(function(t){kony.license.isNullOrUndefined(t)||(kony.license.log("appending loginResponse in eventObject"),e.loginResponse=t),kony.license.log("Exiting appServiceAsyncFunction"),n(e)}))}}}return e(n)}},kony.license.apiOverride=function(){kony.license.log("Entering apiOverride.."),"thinclient"!==e.name?kony.license.setAppCallbacksOverride():kony.licensevar.isInteractive=!0,kony.license.invokeServiceAsyncOverride(),kony.license.invokeServiceSyncOverride(),kony.license.setAppInitializationEventsOverride()},kony.license.apiOverride(),kony.application.addApplicationCallbacks(kony.licensevar.callbacksObjList),"thinclient"!==e.name&&(Object.seal(kony.license),Object.freeze(kony.license)),kony.license.log("license loading completed")},kony.license.invokeIST=function(e,n,t,o,r){if(void 0!==e&&null!=e&&""!==e){var i={"Content-Type":"application/x-www-form-urlencoded"};kony.hasOwnProperty("sdk")&&kony.sdk.getCurrentInstance&&kony.sdk.getCurrentInstance()&&(e=kony.sdk.getCurrentInstance().appendGlobalParams(e,i,n));var a=new kony.net.HttpRequest;for(var s in r&&r.httpRequestOptions&&r.httpRequestOptions instanceof Object&&r.httpRequestOptions.timeoutIntervalForRequest&&(a.timeout=1e3*r.httpRequestOptions.timeoutIntervalForRequest),a.open("POST",e),paramsTable=new kony.net.FormData,n)void 0!==n[s]&&("string"!=typeof n[s]&&(n[s]=JSON.stringify(n[s])),paramsTable.append(s,n[s]));for(var l in kony.license.log("paramsTable formed is "+paramsTable.toString()),i)i.hasOwnProperty(l)&&a.setRequestHeader(l,i[l]);a.onReadyStateChange=function(n){var r=Number(a.readyState.toString()),i=Number(a.status.toString());kony.license.log("localRequestCallback in state :"+r+" with status :"+i);var s=null;if(4===r){var l=!0;if(i>=200&&i<300||504===i)if(504!==i)try{"string"==typeof(s=JSON.parse(JSON.stringify(a.response)))&&(s=JSON.parse(s)),s.url=e,!s||void 0!==s.opstatus&&0!=s.opstatus||(l=!1)}catch(e){kony.license.log("error while extracting response :"+e)}else l=!1;if(!0===l)o({error:"failure in sending IST call with status as :"+i,url:e});else t(s)}},a.hasOwnProperty("disableIntegrityCheck")&&(a.disableIntegrityCheck=!0),a.send(paramsTable)}else o("license url can't be null or empty")},kony.license.startLicenseService();function getLatestServiceDocIfAvailable(e,n){if(kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_IDE||kony.sdk.isNullOrUndefined(konyRef.mainRef.config))kony.sdk.verifyAndCallClosure(n);else{var o=konyRef.mainRef.config.service_doc_etag,t=e.service_doc_etag;if(kony.sdk.isNullOrUndefined(t)||!kony.sdk.isNullOrUndefined(o)&&o==t)kony.sdk.verifyAndCallClosure(n);else{kony.sdk.logsdk.info("Service doc update found.");var s=new konyNetworkProvider,r=stripTrailingCharacter(konyRef.rec.url,"/")+"/appconfig",i={};i[kony.sdk.constants.APP_KEY_HEADER]=konyRef.mainRef.appKey,i[kony.sdk.constants.APP_SECRET_HEADER]=konyRef.mainRef.appSecret,i["X-HTTP-Method-Override"]="GET",populateHeaderWithFabricAppVersion(i),kony.sdk.logsdk.perf("Executing network call for getLatestServiceDocIfAvailable"),setIntegrityParams.call(konyRef);var k={};k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,k[kony.sdk.constants.IS_APP_CONFIG_CALL]=!0,s.post(r,null,i,(function(e){kony.sdk.util.checkAndUpdateIntegrityKey(e),kony.sdk.util.saveMetadatainDs(konyRef.mainRef.appKey,konyRef.mainRef.appSecret,e),kony.sdk.logsdk.perf("Executing Finished network call for getLatestServiceDocIfAvailable"),kony.sdk.verifyAndCallClosure(n)}),(function(e){kony.sdk.logsdk.perf("Executing Finished network call for getLatestServiceDocIfAvailable"),kony.sdk.logsdk.error("Refresh of serviceDoc failed:"+JSON.stringify(e)),kony.sdk.verifyAndCallClosure(n)}),null,k)}}}function setIntegrityParams(){var e={algo:kony.sdk.constants.HASHING_ALGORITHM,headerName:kony.sdk.constants.INTEGRITY_HEADER,validateResp:!0,passthroughHeaderName:kony.sdk.constants.PASSTHROUGH_RESPONSE_HEADER};kony.sdk.isNullOrUndefined(konyRef.getAppSecurityKey())?e.salt=konyRef.mainRef.appSecret:e.salt=konyRef.getAppSecurityKey(),konyRef.mainRef.integrityParams=e}function resetIntegrityParams(){konyRef.mainRef.integrityKey=!1,konyRef.mainRef.integrityParams={}}function setIntegrityParamsHandler(){setIntegrityParams();try{kony.sdk.getAType()!==kony.sdk.constants.SDK_ATYPE_SPA&&"watch"!==kony.sdk.getAType()&&kony.sdk.httpIntegrity.setIntegrityCheck(konyRef.mainRef.integrityParams)}catch(e){throw kony.sdk.logsdk.warn("Invalid Integrity properties received"),new Exception(kony.sdk.errorConstants.INTEGRITY_FAILURE,"Invalid Integrity properties")}}function ConfigurationService(e){var n=e.mainRef.config.reportingsvc.session.split("/IST")[0];kony.sdk.logsdk.debug("IST url fetched from service doc is :"+n);var o=n+kony.sdk.constants.GET_CLIENT_PROPERTY_URL;kony.sdk.logsdk.debug("Configuration url formed is :"+o);var t=new konyNetworkProvider;this.getAllClientAppProperties=function(n,s){function r(){!function(n,s){kony.sdk.logsdk.trace("Entering into _getAllClientAppProperties");var r=kony.sdk.getDefaultHeaders();if(!kony.sdk.skipAnonymousCall){var i=e.currentClaimToken;i||(i=kony.sdk.getCurrentInstance().currentClaimToken),r[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=i}var k={};k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,t.get(o,null,r,(function(e){kony.sdk.logsdk.trace("Entering Configuration service network success"),kony.sdk.logsdk.debug("response from server for client properties is :"+JSON.stringify(e));var o=["httpresponse",kony.sdk.constants.MF_OPSTATUS],t={};for(var s in e)o.indexOf(s.toLowerCase())>-1||(t[s]=e[s]);kony.sdk.verifyAndCallClosure(n,t)}),(function(e,n,o){kony.sdk.logsdk.trace("Entering Configuration service network error"),!e||n&&o||(o=e),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getObjectServiceErrObj(o))}),null,k)}(n,s)}kony.sdk.skipAnonymousCall?r():kony.sdk.claimsRefresh(r,s)}}function getAuthErrorMessage(e){return kony.sdk.logsdk.trace("Entering into getAuthErrorMessage"),"Auth-4"===e?kony.sdk.errormessages.invalid_user_credentials:"Auth-9"===e?kony.sdk.errormessages.invalid_app_credentials:"Auth-3"===e?kony.sdk.errormessages.invalid_user_app_credentials:"Auth-5"===e||"Auth-6"===e||"Gateway-31"===e||"Gateway-33"===e||"Gateway-35"===e||"Gateway-36"===e||"Auth-46"===e||"Auth-55"===e?kony.sdk.errormessages.invalid_session_or_token_expiry:"Auth-7"===e||"Auth-27"===e?kony.sdk.errormessages.invalid_user_app_services:e+":"+kony.sdk.errormessages.default_message}function IdentityService(e,n){kony.sdk.logsdk.perf("Executing IdentityService");var o=new konyNetworkProvider,t=new konyDataStore,s=n;e.rec=n;var r=!1;kony.sdk.isNullOrUndefined(n[kony.sdk.constants.IS_MFA_ENABLED])||(r=n[kony.sdk.constants.IS_MFA_ENABLED]);var i={};kony.sdk.isNullOrUndefined(n[kony.sdk.constants.MFA_META])||(i=n[kony.sdk.constants.MFA_META]);var k=e.mainRef,a={},d=!1,l=!1;if(void 0===s||null==s.prov||null==s.type)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"Invalid service url and service type");var c=s.type,y=stripTrailingCharacter(s.url,"/"),u=s.prov,g=!0===s.enable_identity_pkce,f=!1,p=kony.sdk.util.getRefreshLoginTokenStoreUtility(),E=kony.sdk.util.getMetaDataManagerForLoginInSameWindow(),v=n[kony.sdk.constants.LOGIN_PROVIDER_TYPE];function O(){return!(!(kony.sdk.getCurrentInstance()&&kony.sdk.getCurrentInstance().tokens&&kony.sdk.getCurrentInstance().tokens.hasOwnProperty(u))||kony.sdk.isNullOrUndefined(kony.sdk.getCurrentInstance().tokens[u])||0===Object.keys(kony.sdk.getCurrentInstance().tokens[u]).length)}kony.sdk.logsdk.debug("### AuthService:: initialized for provider "+u+" with type "+c);var h=y+"::"+u+"::"+c+"::RAW";function _(e,n){kony.sdk.resetProviderKeys(e,n)}function m(n,o){var t=T(n,e,!1);kony.sdk.isNullOrUndefined(t.mfa_response)||kony.sdk.isNullOrUndefined(t.mfa_response[kony.sdk.constants.IS_MFA_ENABLED])||(r=t.mfa_response[kony.sdk.constants.IS_MFA_ENABLED],i=t.mfa_response[kony.sdk.constants.MFA_META],delete t.mfa_response),getLatestServiceDocIfAvailable(n,(function(){f&&(e.refreshLoginProvidersSet.add(u),function(n){if(kony.sdk.logsdk.info("Entering storeRefreshLoginTokens"),!function(n){if(kony.sdk.isNullOrUndefined(e.currentRefreshToken)||kony.sdk.isNullOrUndefined(n[kony.sdk.constants.BACKEND_REFRESH_TOKENS])||kony.sdk.isNullOrUndefined(n[kony.sdk.constants.BACKEND_REFRESH_TOKENS][u]))return!1;return!0}(n)){kony.sdk.logsdk.error("required refresh tokens doesn't exist in data store to enable refresh login");var o=kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.refresh_login_tokens_null_or_undefined,kony.sdk.errormessages.refresh_login_tokens_null_or_undefined);return void Object.assign(t,o)}var s={};if(s[kony.sdk.constants.INTERNAL_REFRESH_TOKEN]=e.currentRefreshToken,s[kony.sdk.constants.BACKEND_REFRESH_TOKEN]=n[kony.sdk.constants.BACKEND_REFRESH_TOKENS][u],kony.sdk.logsdk.info("storing provider specific internal and backend refresh tokens"),p.storeTokens(u,s),!kony.sdk.isNullOrUndefined(n[kony.sdk.constants.LOGIN_PROFILES])){var r=Object.keys(n[kony.sdk.constants.LOGIN_PROFILES]);p.setInternalRefreshToken(r,e.currentRefreshToken)}}(n)),kony.sdk.verifyAndCallClosure(o,t)}))}this.register=function(n,t,s,r){function i(e){kony.sdk.logsdk.perf("Register finished with Failure"),kony.sdk.verifyAndCallClosure(s,e)}function a(e){kony.sdk.logsdk.perf("Register finished with Success");var n={};n.status=e.status,kony.sdk.verifyAndCallClosure(t,n)}kony.sdk.logsdk.perf("Executing Register"),kony.sdk.logsdk.debug("### AuthService:: Invoked Register call  for provider "+u);var d=null;if(kony.sdk.isNullOrUndefined(n))throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Missing required params to register function");kony.sdk.claimsRefresh((function(){var t=y+"/signup/register?provider="+u;d=kony.sdk.getEncodedReportingParamsForSvcid("register_"+u),n.provider=u,function(n,t,s){(s=kony.sdk.addDefaultHeaders(s))[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=e.currentClaimToken,s[kony.sdk.constants.APP_KEY_HEADER]=k.appKey,s[kony.sdk.constants.APP_SECRET_HEADER]=k.appSecret,s[kony.sdk.constants.SDK_TYPE_HEADER]=kony.sdk.getSdkType(),s[kony.sdk.constants.SDK_VERSION_HEADER]=kony.sdk.version,s[kony.sdk.constants.PLATFORM_TYPE_HEADER]=kony.sdk.getPlatformName(),s[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,s[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,populateHeaderWithFabricAppVersion(s),e.reportingheaders_allowed&&(kony.sdk.isNullOrUndefined(d)||(s[kony.sdk.constants.REPORTING_HEADER]=d));var l=kony.sdk.util.checkAndFetchNetworkProviderOptions(r,!1);o.post(n,t,s,a,i,null,l)}(t,n,null)}),s)},this.login=function(n,r,i){kony.sdk.logsdk.perf("Executing Login"),kony.sdk.pkceUtilityInstance=null;var a,p=!0,O=null,h=null,S=!1,C=null;function R(t,s,a){if(a=kony.sdk.addDefaultHeaders(a),kony.sdk.util.populateAuthorizationHeaderForLogin(a,u),kony.sdk.isNullOrUndefined(k.appKey)||kony.sdk.isNullOrUndefined(k.appSecret)){var l="P:"+c,p="AK:"+k.appKey+",  AS:"+k.appSecret;kony.sdk.util.recordAndFlushCustomEvent("INVALID APP CREDENTIALS",l,p,"Login Call",null)}if(a[kony.sdk.constants.APP_KEY_HEADER]=k.appKey,a[kony.sdk.constants.APP_SECRET_HEADER]=k.appSecret,a[kony.sdk.constants.SDK_TYPE_HEADER]=kony.sdk.getSdkType(),a[kony.sdk.constants.SDK_VERSION_HEADER]=kony.sdk.version,a[kony.sdk.constants.PLATFORM_TYPE_HEADER]=kony.sdk.getPlatformName(),a[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,a[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,populateHeaderWithFabricAppVersion(a),v===kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&kony.sdk.util.populateCustomOAuthParams(s,h),e.reportingheaders_allowed){var E=kony.sdk.getEncodedReportingParamsForSvcid("login_"+u);if(null!=E&&null!=E)try{a[kony.sdk.constants.REPORTING_HEADER]=E}catch(e){kony.sdk.logsdk.error("### login::error while parsing metrics payload"+e)}}var O=null;if("anonymous"===c?O=y+t:(O=y+t+"?provider="+u,s.provider=u),kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_IDE||!("basic"===c||n&&n.userid&&n.password)||!0!==d||(kony.sdk.offline.saveTempUserCredentials(n),kony.sdk.isNetworkAvailable())){var S={};kony.sdk.isNullOrUndefined(n)||(!kony.sdk.isNullOrUndefined(n.httpRequestOptions)&&n.httpRequestOptions instanceof Object&&(S.httpRequestOptions=n.httpRequestOptions),!kony.sdk.isNullOrUndefined(n.xmlHttpRequestOptions)&&n.xmlHttpRequestOptions instanceof Object&&(S.xmlHttpRequestOptions=n.xmlHttpRequestOptions),kony.sdk.isNullOrUndefined(n.include_profile)||(s.include_profile=s.include_profile?s.include_profile:n.include_profile),f?(s[kony.sdk.constants.ENABLE_REFRESH_LOGIN]=!0,e.refreshLoginProvidersSet.add(u)):e.refreshLoginProvidersSet.has(u)&&e.refreshLoginProvidersSet.delete(u)),g&&(kony.sdk.isNullOrUndefined(S[kony.sdk.constants.KEY_XML_HTTP_REQUEST_OPTIONS])&&(S[kony.sdk.constants.KEY_XML_HTTP_REQUEST_OPTIONS]={}),S[kony.sdk.constants.KEY_XML_HTTP_REQUEST_OPTIONS][kony.sdk.constants.ENABLE_WITH_CREDENTIALS]=!0),o.post(O,s,a,(function(e){m(e,r)}),(function(n){A(n,e,!0,i)}),null,S)}else kony.sdk.offline.loginOffline(u,(function(n){kony.sdk.logsdk.info("successfully authenticated offline"),T(n,e,!0,r)}),(function(n){kony.sdk.logsdk.error("offline authentication also failed"),_(e,u),i&&i(kony.sdk.error.getAuthErrObj(n))}))}function N(n,o,t,s,r){if(kony.sdk.logsdk.trace("Entering loginHelper, isError = "+s),s){var k={};return kony.sdk.isNullOrUndefined(r)?(k.message="Login Failed",k.opstatus=kony.sdk.errorcodes.transient_login_fail,k.code=o&&o.error?o.error:""):k=r,void kony.sdk.verifyAndCallClosure(i,k)}kony.sdk.isNullOrUndefined(e.currentClaimToken)||e.isAnonymousProvider?(kony.sdk.logsdk.info("### AuthService::login Claims token unavailable, performing regular login"),R(n,o,t)):kony.sdk.claimsRefresh((function(e){R(n,o,t)}),(function(e){p?(kony.sdk.logsdk.error("### AuthService::login claimsRefresh failed, performing force login"),R(n,o,t)):(kony.sdk.logsdk.error("### AuthService::login claimsRefresh failed, invoking failurecallback"),e.message=kony.sdk.errormessages.transient_login_fail,e.opstatus=kony.sdk.errorcodes.transient_login_fail,kony.sdk.verifyAndCallClosure(i,e))}))}function I(e){if(!1===kony.sdk.sso.isSSOEnabled&&"basic"==c){var n=["userid","password"];s.mandatory_fields&&kony.sdk.isArray(s.mandatory_fields)&&(n=s.mandatory_fields);for(var o=0;o<n.length;++o)if(kony.sdk.isNullOrUndefined(e[n[o]]))throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE," Require "+n[o])}var t={};for(var r in e)t[r]=e[r];N("/login",t,{})}if(kony.sdk.logsdk.debug("### AuthService::login Invoked login for provider "+u+" of type "+c),void 0===n)throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Missing required number of arguments to login function");null!==n?(a=n.loginOptions,kony.sdk.isNullOrUndefined(a)?kony.sdk.sso.isSSOEnabled=!1:(d=a.isOfflineEnabled||!1,kony.sdk.offline.isOfflineEnabled=kony.sdk.offline.isOfflineEnabled||d,kony.sdk.sso.isSSOEnabled=a.isSSOEnabled||!1,O=a[kony.sdk.constants.CUSTOM_QUERY_PARAMS_FOR_OAUTH],!1===a.continueOnRefreshError&&(p=!1),!0===a.persistLoginResponse&&(l=!0,t.setItem(kony.sdk.constants.PERSIST_LOGIN_RESPONSE_FLAG,!0),kony.sdk.offline.persistToken=!0),f=!1,v===kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&("boolean"==typeof a[kony.sdk.constants.ENABLE_REFRESH_LOGIN]?f=a[kony.sdk.constants.ENABLE_REFRESH_LOGIN]:kony.sdk.logsdk.warn("the value of "+kony.sdk.constants.ENABLE_REFRESH_LOGIN+" should be of boolean type"),h=a[kony.sdk.constants.CUSTOM_OAUTH_PARAMS],kony.sdk.util.isNullOrUndefinedOrEmptyObject(h)||(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u]={},kony.sdk.util.populateCustomOAuthParams(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u],h))),kony.sdk.getPlatformName()!==kony.sdk.constants.PLATFORM_THIN_CLIENT||!0!==a[kony.sdk.constants.NO_POP_UP]||kony.sdk.isNullOrUndefined(kony.license.saveCurrentSessionForReuse)||(S=!0,C=a[kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE],kony.sdk.util.isPlatformPlainJS()||kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_PHONEGAP||kony.license.saveCurrentSessionForReuse(),E.initialize(),E.setItem(kony.sdk.constants.LOGIN_OPTIONS,a),E.setItem(kony.sdk.constants.KEY_PROVIDER,u),E.setItem(kony.sdk.constants.URL_TYPE,"/"+c+"/token")))):n={},"anonymous"===c?(e.isAnonymousProvider=!0,N("/login",{},{})):"basic"==c?I(n):function(e){if(e.hasOwnProperty("userid")&&e.hasOwnProperty("password"))I(e);else if(kony.sdk.isSSOLoginSuccess&&1==kony.sdk.sso.isSSOEnabled&&!kony.sdk.util.isNullOrEmptyString(kony.sdk.util.getSSOToken()))N("oauth2"===c?"/oauth2/token":"saml"===c?"/saml/token":"/login",{},{});else if(kony.sdk.getPlatformName()!==kony.sdk.constants.PLATFORM_THIN_CLIENT||kony.sdk.isNullOrUndefined(e[kony.sdk.constants.SINGLE_WINDOW_LOGIN_BODY_PARAMS]))OAuthHandler(y,u,k.appKey,N,c,function(e){var n={};if(n[kony.sdk.constants.CUSTOM_QUERY_PARAMS_FOR_OAUTH]=O,n[kony.sdk.constants.IS_ENABLE_IDENTITY_PKCE]=!0===g,kony.sdk.util.isValidString(e[kony.sdk.constants.IE11_CROSS_DOMAIN_OAUTH_BASE_URL])&&(n[kony.sdk.constants.IE11_CROSS_DOMAIN_OAUTH_BASE_URL]=e[kony.sdk.constants.IE11_CROSS_DOMAIN_OAUTH_BASE_URL]),kony.sdk.util.hasBrowserWidget(e))n[kony.sdk.constants.BROWSER_WIDGET]=e[kony.sdk.constants.BROWSER_WIDGET];else if(e.UseDeviceBrowser&&(n.UseDeviceBrowser=e.UseDeviceBrowser),e[kony.sdk.constants.OAUTH_REDIRECT_SUCCESS_URL]){var o=e[kony.sdk.constants.OAUTH_REDIRECT_SUCCESS_URL];kony.sdk.getPlatformName()===kony.sdk.constants.PLATFORM_ANDROID&&(o=encodeURIComponent(decodeURIComponent(o))),n[kony.sdk.constants.OAUTH_REDIRECT_SUCCESS_URL]=o}return kony.sdk.getPlatformName()===kony.sdk.constants.PLATFORM_THIN_CLIENT&&!0===S&&(n[kony.sdk.constants.NO_POP_UP]=S,n[kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE]=C,n[kony.sdk.constants.METADATA_MANAGER_FOR_LOGIN_IN_SAME_WINDOW_OBJECT]=E),n}(e),!!(k&&k.config&&k.config.identity_meta&&k.config.identity_meta[u]&&k.config.identity_meta[u].success_url));else{var n=e[kony.sdk.constants.SINGLE_WINDOW_LOGIN_BODY_PARAMS],o=E.getItem(kony.sdk.constants.URL_TYPE);E.destroy(),N(o,n,{})}}(n)},this.validateMfa=function(n,t,s,r){if(kony.sdk.logsdk.debug("AuthService::validateMfa Invoked login for provider "+u+" of type "+c),kony.sdk.isNullOrUndefined(n))throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE," mfaParams are null");var i={};for(var a in i.provider=u,n)i[a]=n[a];kony.sdk.isNullOrUndefined(e.currentClaimToken)||e.isAnonymousProvider?(kony.sdk.logsdk.error("AuthService::validateMfa Claims token unavailable, please login"),err.message=kony.sdk.errormessages.offline_auth_failed,err.opstatus=kony.sdk.errorcodes.offline_auth_failedl,kony.sdk.verifyAndCallClosure(s,err)):kony.sdk.claimsRefresh((function(n){!function(n,i){var a=kony.sdk.getDefaultHeaders();a[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=e.currentClaimToken,a[kony.sdk.constants.APP_KEY_HEADER]=k.appKey,a[kony.sdk.constants.APP_SECRET_HEADER]=k.appSecret,a[kony.sdk.constants.SDK_TYPE_HEADER]=kony.sdk.getSdkType(),a[kony.sdk.constants.SDK_VERSION_HEADER]=kony.sdk.version,a[kony.sdk.constants.PLATFORM_TYPE_HEADER]=kony.sdk.getPlatformName(),a[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,a[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,populateHeaderWithFabricAppVersion(a),e.reportingheaders_allowed&&(a[kony.sdk.constants.REPORTING_HEADER]=kony.sdk.getEncodedReportingParamsForSvcid("login_"+u));var d=y+n+"?provider="+u,l=kony.sdk.util.checkAndFetchNetworkProviderOptions(r);o.post(d,i,a,(function(n){var o=T(n,e,!1);kony.sdk.verifyAndCallClosure(t,o)}),(function(n){A(n,e,!0,s)}),null,l)}("/login/mfa",i)}),(function(e){kony.sdk.logsdk.error("AuthService::validateMfa claimsRefresh failed, invoking failurecallback"),e.message=kony.sdk.errormessages.transient_login_fail,e.opstatus=kony.sdk.errorcodes.transient_login_fail,kony.sdk.verifyAndCallClosure(s,e)}))},this.getMfaDetails=function(){var e={};return e[kony.sdk.constants.IS_MFA_ENABLED]=r,e[kony.sdk.constants.MFA_META]=i,e},this.usePersistedLogin=function(){kony.sdk.logsdk.perf("Executing usePersistedLogin");var n=kony.sdk.offline.getUserAuthInformation(kony.sdk.constants.PERSISTED_AUTH_RESPONSE);if(n&&kony.sdk.isJson(n)){kony.sdk.logsdk.debug("### PersistLogin: Persisted auth response retrieved succcessfully");var o=JSON.parse(n);if(o&&o.profiles&&o.profiles[u])return e.isAnonymousProvider=!1,S(o,u),kony.sdk.logsdk.perf("Executing Finished usePersistedLogin"),!0}else kony.sdk.logsdk.debug("### PersistLogin: Failed to retrieve persisted auth response");return kony.sdk.logsdk.perf("Executing Finished usePersistedLogin"),!1};var S=function(n,o){if(n&&n.profiles)for(var t in e.isAnonymousProvider=!1,n.profiles)e.tokens[t]||(e.tokens[t]={}),e.tokens[t].profile=n.profiles[t];else n&&o&&n.profile&&(e.isAnonymousProvider=!1,e.tokens[o].profile=n.profile);if(n&&o&&n.provider_token&&(e.tokens[o].provider_token=n.provider_token),n&&n.provider_tokens)for(var t in n.provider_tokens)e.tokens[t]||(e.tokens[t]={}),e.tokens[t].provider_token||(e.tokens[t].provider_token={}),e.tokens[t].provider_token.value=n.provider_tokens[t];if(e.currentClaimToken=n.claims_token.value,e.claimTokenExpiry=n.claims_token.exp,e.currentRefreshToken=n.refresh_token,kony.sdk.isNullOrUndefined(n.claims_token.session_id)||(e.idSid=n.claims_token.session_id),!e.isAnonymousProvider&&!kony.sdk.isNullOrUndefined(n.claims_token[kony.sdk.constants.IS_MFA_ENABLED]))for(var s=0;s<e.login.length;s++)if(e.login[s].prov===o){e.login[s][kony.sdk.constants.IS_MFA_ENABLED]=n.claims_token[kony.sdk.constants.IS_MFA_ENABLED],e.login[s][kony.sdk.constants.MFA_META]=n.claims_token[kony.sdk.constants.MFA_META];var r={};return r[kony.sdk.constants.IS_MFA_ENABLED]=n.claims_token[kony.sdk.constants.IS_MFA_ENABLED],r[kony.sdk.constants.MFA_META]=n.claims_token[kony.sdk.constants.MFA_META],r}},T=function(e,n,o,t){kony.sdk.logsdk.perf("Executing processLoginSuccessResponse");var s={};e=kony.sdk.formatSuccessResponse(e),"anonymous"===c||n.tokens[u]||(n.tokens[u]={}),kony.sdk.logsdk.info("### AuthService::login successful. Retrieved Data::");var r=S(e,u);(kony.sdk.isNullOrUndefined(r)||kony.sdk.isNullOrUndefined(r[kony.sdk.constants.IS_MFA_ENABLED])||(s.mfa_response=r),kony.sdk.logsdk.info("### AuthService::login extracted token. Calling success callback"),!0===kony.sdk.sso.isSSOEnabled)&&(e.sso_token?!0===kony.sdk.util.saveSSOToken(kony.sdk.util.addOrUpdateSSOTokenWithProvider(e.sso_token,u))?(kony.sdk.isSSOLoginSuccess=!0,kony.sdk.logsdk.info("### SSOLoginService::SSOToken being saved successfully.")):kony.sdk.logsdk.info("### SSOLoginService::Failed to save SSOToken.This might result in failure of corresponding sso Logins. Please check the configuration params"):kony.sdk.logsdk.info("### SSOLoginService::Unable to fetch sso token."));if(e.profile&&null!=e.profile&&null!=e.profile.user_attributes&&(a=e.profile.user_attributes),e.profile&&kony.sdk.overrideUserId(e.profile.userid),kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE&&(!0===kony.sdk.offline.isOfflineEnabled&&(kony.sdk.isNetworkAvailable()&&d&&"basic"===c&&kony.sdk.offline.updateSuccessUserCredentials(u),kony.sdk.offline.saveUserAuthInformation("authResponse",e)),"anonymous"!==c&&(l||kony.sdk.offline.persistToken||kony.sdk.offline.isPersistentLoginResponseEnabled())&&kony.sdk.offline.saveUserAuthInformation(kony.sdk.constants.PERSISTED_AUTH_RESPONSE,e)),kony.logger.setClaimsToken(),!o)return s;t&&(delete s.mfa_response,kony.sdk.verifyAndCallClosure(t,s))},A=function(e,n,o,t){if(kony.sdk.logsdk.perf("Executing processLoginErrorResponse"),kony.sdk.logsdk.info("### AuthService::login Calling failure callback"),_(n,u),!0===kony.sdk.sso.isSSOEnabled&&("Auth-55"==e.mfcode&&kony.sdk.util.deleteSSOToken(),kony.sdk.isSSOLoginSuccess=!1),!o)return kony.sdk.error.getAuthErrObj(e);t&&t(kony.sdk.error.getAuthErrObj(e))};this.anonymousLoginSync=function(n){kony.sdk.logsdk.perf("Executing anonymousLoginSync"),e.isAnonymousProvider=!1;var t=kony.sdk.getEncodedReportingParamsForSvcid("login_"+u);if(kony.sdk.logsdk.debug("### AuthService::login Invoked login for provider "+u+" of type "+c),void 0===n)throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Missing required number of arguments to login function");e.isAnonymousProvider=!0,kony.sdk.logsdk.info("### AuthService::login Adapter type is anonymous");var s=kony.sdk.getDefaultHeaders();s[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED;var r=function(n,s,r){if((r=kony.sdk.addDefaultHeaders(r))[kony.sdk.constants.APP_KEY_HEADER]=k.appKey,r[kony.sdk.constants.APP_SECRET_HEADER]=k.appSecret,r[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,e.reportingheaders_allowed&&null!=t&&null!=t)try{r[kony.sdk.constants.REPORTING_HEADER]=t}catch(e){kony.sdk.logsdk.error("### anonymousLoginSync::error while parsing metrics payload"+e)}var i=null;"anonymous"===c?i=y+n:(i=y+n+"?provider="+u,s.provider=u);var a=o.postSync(i,s,r);return 0==a.opstatus?T(a,e,!1):A(a,e,!1)}("/login",{},s);return kony.sdk.logsdk.perf("Executing Finished anonymousLoginSync"),r},this.logout=function(n,s,r){function i(){!function(n,s,r){var i=null;function a(e){kony.sdk.util.isNullOrUndefinedOrEmptyObject(e)||v===kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&(i=e[kony.sdk.constants.CUSTOM_OAUTH_PARAMS])}function g(n,t,r){var k=null,a=kony.sdk.getEncodedReportingParamsForSvcid("logout_"+u);kony.sdk.isNullOrUndefined(e.currentClaimToken)||(k=e.currentClaimToken),h.provider=u;var d="";d=c==kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&kony.sdk.getSdkType()==kony.sdk.constants.SDK_TYPE_IDE?y+"/oauth2/logout?provider="+u:y+"/logout?provider="+u;var l=kony.sdk.getDefaultHeaders();if(l[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=k,l[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]="*/*",l[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,e.reportingheaders_allowed&&null!=a&&null!=a)try{l[kony.sdk.constants.REPORTING_HEADER]=a}catch(e){kony.sdk.logsdk.error("### login::error while parsing metrics payload"+e)}v===kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&kony.sdk.util.populateCustomOAuthParams(n,i),populateHeaderWithFabricAppVersion(l),o.post(d,h,l,(function(e){function n(){f(e)}kony.sdk.logsdk.info("AuthService::logout successfully logged out. Calling success callback"),getLatestServiceDocIfAvailable(e,n)}),(function(e){kony.sdk.isOAuthLogoutInProgress=!1,kony.sdk.logsdk.error("### AuthService::logout logged out Failed. Calling failure callback"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(e))}))}function f(r){kony.sdk.logsdk.trace("Entering logoutSuccess from Identity."),r=kony.sdk.formatSuccessResponse(r),delete e.tokens[u];var i=e.currentClaimToken,k=!0;if(e.refreshLoginProvidersSet.has(u)&&e.refreshLoginProvidersSet.delete(u),kony.sdk.resetCurrentKeys(e,u),r&&r.claims_token&&(S(r),e.isAnonymousProvider=!1,k=!1,!kony.sdk.isNullOrUndefined(r[kony.sdk.constants.LOGIN_PROFILES]))){var a=Object.keys(r[kony.sdk.constants.LOGIN_PROFILES]);p.setInternalRefreshToken(a,e.currentRefreshToken)}if(d&&(kony.sdk.offline.isOfflineEnabled=!1,kony.sdk.offline.removeUserAuthInformation(),kony.sdk.offline.removeUserCredentials(u)),(l||kony.sdk.offline.persistToken||kony.sdk.offline.isPersistentLoginResponseEnabled())&&(kony.sdk.offline.removePersistedUserAuthInformation(),l=!1,kony.sdk.offline.persistToken=!1,t.setItem(kony.sdk.constants.PERSIST_LOGIN_RESPONSE_FLAG,!1)),!0===E||"true"===E?kony.sdk.util.deleteSSOToken():kony.sdk.util.isNullOrEmptyString(kony.sdk.util.getSSOTokenForProvider(u))||kony.sdk.util.deleteSSOTokenForProvider(u),v!==kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2||kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u])||(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u]={}),k){var c=e[kony.sdk.constants.INTEGRATION_SERVICE_KEY][kony.sdk.constants.INTEGRATION_INTERNAL_LOGOUT_URL]+"/"+kony.sdk.constants.INTEGRATION_INTERNAL_CLEAR_SESSION_ENDPOINT,y={};y[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=i;var g={};g[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,o.post(c,null,y,(function(e){kony.sdk.logsdk.trace("Entering logoutSuccess from Middleware with message"+e[kony.sdk.constants.KEY_MESSAGE]),kony.sdk.isOAuthLogoutInProgress=!1,kony.sdk.verifyAndCallClosure(n,{})}),(function(e){kony.sdk.isOAuthLogoutInProgress=!1,kony.sdk.logsdk.error("Entering logoutFailure from Middleware with error message -"+e[kony.sdk.constants.MF_ERROR_MSG]);var n=kony.sdk.error.getAuthErrObj(e);n[kony.sdk.constants.KEY_MESSAGE]="Failed to invalidate session with middleware, It's good idea to close all browser windows.",kony.sdk.verifyAndCallClosure(s,n)}),null,g)}else kony.sdk.isOAuthLogoutInProgress=!1,kony.sdk.verifyAndCallClosure(n,{})}kony.sdk.logsdk.debug("### AuthService::logout invoked on provider "+u+" of type "+c);var E=!1;kony.sdk.isNullOrUndefined(r)||!0!==r.slo&&!1!==r.slo||(E=r.slo);var h={};h={slo:E},kony.sdk.util.isNullOrUndefinedOrEmptyObject(r)||a(r[kony.sdk.constants.LOGOUT_OPTIONS]);if(O()){if(c!=kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&c!=kony.sdk.constants.AUTH_PROVIDER_TYPE_SAML||kony.sdk.getSdkType()!=kony.sdk.constants.SDK_TYPE_IDE){if(1==kony.sdk.offline.isOfflineEnabled&&kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE&&"basic"===c&&!kony.sdk.isNetworkAvailable())return kony.sdk.logsdk.info("AuthService::offline logout successfully logged out. Calling success callback"),void f();g(h,f,s)}else if(!kony.sdk.isOAuthLogoutInProgress){kony.sdk.isOAuthLogoutInProgress=!0;var _,m=!0;function T(e){_=e,m&&(m=!1,kony.timer.schedule("oAuthCallbackHandle",(function(){_?g(h,f,s):kony.sdk.verifyAndCallClosure(s,{})}),3,!1))}var A={logout:!0};A.slo=E,kony.sdk.util.hasBrowserWidget(r)&&(A[kony.sdk.constants.BROWSER_WIDGET]=r[kony.sdk.constants.BROWSER_WIDGET]),OAuthHandler(y,u,k.appKey,T,c,A)}}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getIdentitySessionInactiveErrObj())}(n,s,r)}kony.sdk.logsdk.trace("Entering logout"),1!=d||kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_IDE||"basic"!==c||kony.sdk.isNetworkAvailable()?kony.sdk.claimsRefresh(i,(function(){kony.sdk.logsdk.error("### AuthService::logout claimsRefresh failed"),i()})):i()},this.getBackendToken=function(n,o,t,s){function r(n){if(kony.sdk.logsdk.perf("Executing Finished getBackendToken : status success"),kony.sdk.logsdk.trace("Entering _claimsRefreshSuccess with valid token"),S(n,u),kony.sdk.offline.isOfflineEnabled&&1==kony.sdk.offline.isOfflineEnabled&&kony.sdk.offline.updateAuthToken(n),(l||kony.sdk.offline.persistToken||kony.sdk.offline.isPersistentLoginResponseEnabled())&&kony.sdk.offline.updatePersistedToken(kony.sdk.constants.PERSISTED_AUTH_RESPONSE,n),!kony.sdk.isNullOrUndefined(p.getInternalRefreshToken(u))){if(p.setInternalRefreshToken(u,e.currentRefreshToken),!kony.sdk.isNullOrUndefined(n[kony.sdk.constants.LOGIN_PROFILES])){var o=Object.keys(n[kony.sdk.constants.LOGIN_PROFILES]);p.setInternalRefreshToken(o,e.currentRefreshToken)}if(a){var s=n[kony.sdk.constants.BACKEND_REFRESH_TOKENS];p.setBulkBackendRefreshTokens(s)}}kony.sdk.verifyAndCallClosure(t,e.tokens[u].provider_token)}function i(e){kony.sdk.logsdk.perf("Executing Finished getBackendToken : status failure"),kony.sdk.logsdk.trace("Entering _claimsRefreshFailure"),kony.sdk.logsdk.info("### AuthService::getBackendToken fetching refresh failed. Calling failure callback"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(e))}kony.sdk.logsdk.perf("Executing getBackendToken"),kony.sdk.logsdk.debug("### AuthService::getBackendToken called for provider "+u+" of type "+c),O()||kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getIdentitySessionInactiveErrObj());var k=null,a=!1;if(o&&o.refresh&&!0===o.refresh&&((k={requestParams:{refresh:"true"}})[kony.sdk.constants.BODY_PARAMS]={},kony.sdk.isNullOrUndefined(p.getBackendRefreshToken(u))||(a=!0,k[kony.sdk.constants.BODY_PARAMS][kony.sdk.constants.ENABLE_REFRESH_LOGIN]=!0),v===kony.sdk.constants.AUTH_PROVIDER_TYPE_OAUTH2&&(kony.sdk.util.isNullOrUndefinedOrEmptyObject(o[kony.sdk.constants.CUSTOM_OAUTH_PARAMS])||(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u]={},kony.sdk.util.populateCustomOAuthParams(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u],o[kony.sdk.constants.CUSTOM_OAUTH_PARAMS])),kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u])||kony.sdk.util.populateCustomOAuthParams(k[kony.sdk.constants.BODY_PARAMS],kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[u]))),null!=n&&!0===n)kony.sdk.logsdk.info("### AuthService::getBackendToken fromserver is enabled. Trying to login"),R(k,r,i);else if(e.tokens[u]){var d=e.tokens[u].provider_token.exp;kony.sdk.logsdk.debug("token expiry time: "+d),kony.sdk.logsdk.debug("Current time: "+(new Date).getTime()),d&&d<(new Date).getTime()?(kony.sdk.logsdk.info("### AuthService::getBackendToken Token expired. Fetching refresh from claims api"),R(k,r,i)):(kony.sdk.logsdk.info("### AuthService::getBackendToken present token is valid/doesn't have expiry time. Calling success callback"),kony.sdk.verifyAndCallClosure(t,e.tokens[u].provider_token))}else kony.sdk.logsdk.info("### AuthService::getBackendToken failed for find info for key "+h+"in database. calling failure callback"),kony.sdk.verifyAndCallClosure(s,null)},this.getProfile=function(n,o,t){if(kony.sdk.logsdk.trace("Entering getProfile"),O())if(n&&1==n)N((function(n){e.tokens[u].profile=n,kony.sdk.verifyAndCallClosure(o,n)}),t);else if(e.tokens[u]){var s=e.tokens[u];kony.sdk.verifyAndCallClosure(o,s.profile)}else kony.sdk.verifyAndCallClosure(t,null);else kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getIdentitySessionInactiveErrObj())},this.getProviderName=function(){return u},this.getProviderType=function(){return c},this.getUserData=function(e,n){if(kony.sdk.logsdk.trace("Entering getUserData (Get the generic session data type)"),O()){var o=y+"/session/user_data",t={};t.invokedFrom=kony.sdk.constants.GET_USER_DATA,C(o,e,n,t)}else kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getIdentitySessionInactiveErrObj())},this.getUserAttributes=function(n,o){if(kony.sdk.logsdk.trace("Entering getUserAttributes"),O())if(a&&0===Object.keys(a).length){var t=y+"/session/user_attributes?provider="+u,s={};s.invokedFrom=kony.sdk.constants.GET_USER_ATTRIBUTES,C(t,(function(e){a=e,kony.sdk.verifyAndCallClosure(n,a)}),o,s)}else null===e.currentClaimToken?kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getNullClaimsTokenErrObj()):kony.sdk.verifyAndCallClosure(n,a);else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getIdentitySessionInactiveErrObj())},this.getSecurityAttributes=function(e,n){if(kony.sdk.logsdk.trace("Entering getSecurityAttributes"),O()){var o=y+"/session/security_attributes?provider="+u,t={};t.invokedFrom=kony.sdk.constants.GET_SECURITY_ATTRIBUTES,C(o,e,n,t)}else kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getIdentitySessionInactiveErrObj())},this.refreshLogin=function(n,t,s){kony.sdk.logsdk.perf("Executing refreshLogin");var r=p.getInternalRefreshToken(u);if(kony.sdk.isNullOrUndefined(r))kony.sdk.logsdk.perf("Executing finished refreshLogin"),kony.sdk.logsdk.error("Tokens absent for refreshing login provider"+u),kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getIdentitySessionInactiveErrObj());else{var i={};i[kony.sdk.constants.KEY_URL]=null;var a=kony.sdk.getDefaultHeaders(),d={},l={};!function(n,o,t,i,a){function d(){if(kony.sdk.logsdk.perf("Executing setNetworkParameters"),o[kony.sdk.constants.APP_KEY_HEADER]=k.appKey,o[kony.sdk.constants.APP_SECRET_HEADER]=k.appSecret,o[kony.sdk.constants.SDK_TYPE_HEADER]=kony.sdk.getSdkType(),o[kony.sdk.constants.SDK_VERSION_HEADER]=kony.sdk.version,o[kony.sdk.constants.PLATFORM_TYPE_HEADER]=kony.sdk.getPlatformName(),o[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,o[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,populateHeaderWithFabricAppVersion(o),e.reportingheaders_allowed)try{var d=kony.sdk.getEncodedReportingParamsForSvcid("refreshLogin_"+u);kony.sdk.isNullOrUndefined(d)||(o[kony.sdk.constants.REPORTING_HEADER]=d)}catch(e){kony.sdk.logsdk.error("### login::error while parsing metrics payload in refresh login"+e)}kony.sdk.isNullOrUndefined(s)||(!kony.sdk.isNullOrUndefined(s[kony.sdk.constants.KEY_INCLUDE_PROFILE])&&s[kony.sdk.constants.KEY_INCLUDE_PROFILE]instanceof Object&&(i[kony.sdk.constants.KEY_INCLUDE_PROFILE]=s[kony.sdk.constants.KEY_INCLUDE_PROFILE]),!kony.sdk.isNullOrUndefined(s[kony.sdk.constants.KEY_HTTP_REQUEST_OPTIONS])&&s[kony.sdk.constants.KEY_HTTP_REQUEST_OPTIONS]instanceof Object&&(i[kony.sdk.constants.KEY_HTTP_REQUEST_OPTIONS]=s[kony.sdk.constants.KEY_HTTP_REQUEST_OPTIONS]),kony.sdk.isNullOrUndefined(s[kony.sdk.constants.KEY_INCLUDE_PROFILE])||(t[kony.sdk.constants.KEY_INCLUDE_PROFILE]=s[kony.sdk.constants.KEY_INCLUDE_PROFILE])),kony.sdk.util.isNullOrUndefinedOrEmptyObject(s)||kony.sdk.util.populateCustomOAuthParams(t,s[kony.sdk.constants.CUSTOM_OAUTH_PARAMS]),t[kony.sdk.constants.KEY_PROVIDER]=u,t[kony.sdk.constants.KEY_GRANT_TYPE]=kony.sdk.constants.KEY_REFRESH_TOKEN,t[kony.sdk.constants.KEY_BACKEND_REFRESH_TOKEN]=p.getBackendRefreshToken(u),t[kony.sdk.constants.KEY_AUTH_REFRESH_TOKEN]=r,t[kony.sdk.constants.ENABLE_REFRESH_LOGIN]=!0,f=!0,n[kony.sdk.constants.KEY_URL]=y+kony.sdk.constants.OAUTH_TOKEN_URL+"?"+kony.sdk.constants.KEY_PROVIDER+"="+u,kony.sdk.logsdk.perf("Executing finished setNetworkParameters & checkClaimsRefreshAndSetNetworkParameters"),a()}kony.sdk.logsdk.perf("Executing checkClaimsRefreshAndSetNetworkParameters"),kony.sdk.claimsRefresh((function(n){(o=kony.sdk.addDefaultHeaders(o))[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=e.currentClaimToken,d()}),(function(e){d()}))}(i,a,d,l,(function(){kony.sdk.logsdk.perf("Executing makeRefreshLoginCallToIdentity"),o.post(i[kony.sdk.constants.KEY_URL],d,a,(function(e){kony.sdk.logsdk.perf("Executing finished makeRefreshLoginCallToIdentity"),kony.sdk.logsdk.debug("refresh login success"),m(e,n),kony.sdk.logsdk.perf("Executing finished refreshLogin")}),(function(n){kony.sdk.logsdk.perf("Executing finished makeRefreshLoginCallToIdentity"),kony.sdk.logsdk.error("refresh login failed"),function(e){var n=!1;if(!kony.sdk.isNullOrUndefined(s)&&!kony.sdk.isNullOrUndefined(s[kony.sdk.constants.RETAIN_BACKEND_REFRESH_TOKEN])&&"boolean"==typeof s[kony.sdk.constants.RETAIN_BACKEND_REFRESH_TOKEN]&&s[kony.sdk.constants.RETAIN_BACKEND_REFRESH_TOKEN])return kony.sdk.logsdk.debug("Not deleting refresh token as retain_backend_refresh_token flag is set to true."),n;kony.sdk.isNullOrUndefined(e)||(e.hasOwnProperty(kony.sdk.constants.HTTP_STATUS_CODE)?e[kony.sdk.constants.HTTP_STATUS_CODE]==kony.sdk.constants.HTTP_CODE_400?(n=!0,kony.sdk.logsdk.error("got httpStatusCode as 400")):e[kony.sdk.constants.HTTP_STATUS_CODE]==kony.sdk.constants.HTTP_CODE_401&&(n=!0,kony.sdk.logsdk.error("got httpStatusCode as 401")):e.hasOwnProperty(kony.sdk.constants.KEY_HTTP_RESPONSE)&&e[kony.sdk.constants.KEY_HTTP_RESPONSE].hasOwnProperty(kony.sdk.constants.KEY_RESPONSE_CODE)&&(e[kony.sdk.constants.KEY_HTTP_RESPONSE][kony.sdk.constants.KEY_RESPONSE_CODE]==kony.sdk.constants.HTTP_CODE_400?(n=!0,kony.sdk.logsdk.error("got httpresponse.responsecode as 400")):e[kony.sdk.constants.KEY_HTTP_RESPONSE][kony.sdk.constants.KEY_RESPONSE_CODE]==kony.sdk.constants.HTTP_CODE_401&&(n=!0,kony.sdk.logsdk.error("got httpresponse.responsecode as 401"))));return n}(n)&&(kony.sdk.logsdk.debug("removing stored refresh tokens for provider -"+u),p.removeTokens(u)),A(n,e,!0,t),kony.sdk.logsdk.perf("Executing finished refreshLogin")}),null,l)}))}};var C=function(n,t,s,r){var i=null;i=r.invokedFrom==kony.sdk.constants.GET_USER_ATTRIBUTES?kony.sdk.constants.GET_USER_ATTRIBUTES:r.invokedFrom==kony.sdk.constants.GET_SECURITY_ATTRIBUTES?kony.sdk.constants.GET_SECURITY_ATTRIBUTES:kony.sdk.constants.GET_USER_DATA;var k=kony.sdk.getEncodedReportingParamsForSvcid(i);if(null===e.currentClaimToken)kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getNullClaimsTokenErrObj());else{var a=kony.sdk.getDefaultHeaders();if(a[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=e.currentClaimToken,e.reportingheaders_allowed&&null!=k&&null!=k)try{a[kony.sdk.constants.REPORTING_HEADER]=k}catch(e){kony.sdk.logsdk.error("### getSessionData::error while parsing metrics payload"+e)}populateHeaderWithFabricAppVersion(a),o.get(n,{},a,(function(e){e=kony.sdk.formatSuccessResponse(e),kony.sdk.verifyAndCallClosure(t,e)}),(function(e){kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(e))}))}},R=function(n,t,s){kony.sdk.logsdk.debug("### AuthService::_claimsRefresh fetching claims from server for provider "+u);var r=null,i=kony.sdk.getEncodedReportingParamsForSvcid(kony.sdk.constants.GET_BACKEND_TOKEN);kony.sdk.isNullOrUndefined(e.currentRefreshToken)||(r=e.currentRefreshToken);var k=y+"/claims";if(n&&null!=n.requestParams){for(var a in k+="?",n.requestParams)n.requestParams.hasOwnProperty(a)&&"function"!=typeof a&&(k=k+(a+"=")+n.requestParams[a]+"&");k=stripTrailingCharacter(k,"&")}var d={};if(!kony.sdk.isNullOrUndefined(n)&&kony.sdk.util.isJsonObject(n[kony.sdk.constants.BODY_PARAMS])&&(d=n[kony.sdk.constants.BODY_PARAMS]),r){kony.sdk.logsdk.info("### AuthService::_claimsRefresh making POST request to claims endpoint");var l=kony.sdk.getDefaultHeaders(l);if(l[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=r,l[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,e.reportingheaders_allowed&&null!=i&&null!=i)try{l[kony.sdk.constants.REPORTING_HEADER]=i}catch(e){kony.sdk.logsdk.error("### _claimsRefresh::error while parsing metrics payload"+e)}populateHeaderWithFabricAppVersion(l),o.post(k,d,l,(function(e){e=kony.sdk.formatSuccessResponse(e),kony.sdk.logsdk.info("### AuthService::_claimsRefresh Fetching claims succcessfull"),S(e),kony.sdk.logsdk.info("### AuthService::_claimsRefresh saved locally. Calling success callback"),kony.sdk.verifyAndCallClosure(t,e)}),(function(e,n,o){kony.sdk.logsdk.error("### AuthService::_claimsRefresh fetching claims failed. Calling failure callback"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(o))}))}else kony.sdk.logsdk.info("### AuthService::_claimsRefresh no refreshtoken found. calling failure callback"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getNullRefreshTokenErrObj())},N=function(n,t){kony.sdk.logsdk.trace("Entering profileRefresh"),kony.sdk.logsdk.debug("### AuthService::profileRefresh fetching profile from server for provider "+u);var s=kony.sdk.getEncodedReportingParamsForSvcid(kony.sdk.constants.GET_PROFILE),r=null;kony.sdk.isNullOrUndefined(e.currentRefreshToken)||(r=e.currentRefreshToken);var i=y+"/profile?provider="+u;if(r){kony.sdk.logsdk.info("### AuthService::profileRefresh making POST request to profile endpoint");var k=kony.sdk.getDefaultHeaders();if(k[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=r,k[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,e.reportingheaders_allowed&&null!=s&&null!=s)try{k[kony.sdk.constants.REPORTING_HEADER]=s}catch(e){kony.sdk.logsdk.error("### profileRefresh::error while parsing metrics payload"+e)}populateHeaderWithFabricAppVersion(k),o.get(i,null,k,(function(o){o=kony.sdk.formatSuccessResponse(o),e.tokens[u].profile=o,kony.sdk.logsdk.info("### AuthService::profileRefresh Fetching profile succcessfull, Calling success callback"),kony.sdk.verifyAndCallClosure(n,o)}),(function(e,n,o){kony.sdk.logsdk.error("### AuthService::profileRefresh fetching profile failed. Calling failure callback"),kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getAuthErrObj(o))}))}else kony.sdk.logsdk.info("### AuthService::profileRefresh no refreshtoken found. calling failure callback"),kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getNullRefreshTokenErrObj())}}function konySdkLogger(){this.INDIRECTIONLEVEL=1,this.trace=function(e,n){this.getInstance().trace(e,n)},this.debug=function(e,n){this.getInstance().debug(e,n)},this.info=function(e,n){this.getInstance().info(e,n)},this.perf=function(e,n){this.getInstance().perf(e,n)},this.warn=function(e,n){this.getInstance().warn(e,n)},this.error=function(e,n){this.getInstance().error(e,n)},this.fatal=function(e,n){this.getInstance().fatal(e,n)},this.loggerEngineInit=function(){KonySDKLoggerObj=kony.logger.createNewLogger(kony.sdk.constants.LOGGER_NAME,null),KonySDKLoggerObj.setIndirectionLevel(KonySDKLoggerObj.getIndirectionLevel()+this.INDIRECTIONLEVEL)},this.getInstance=function(){return"undefined"==typeof KonySDKLoggerObj&&this.loggerEngineInit(),KonySDKLoggerObj}}function _getMetadataUrl(e,n){var o=null;return e.objectsvc[n]?o=encodeURI(stripTrailingCharacter(e.objectsvc[n].metadata_url,"/")):e.offlineObjectsvc[n]&&(o=encodeURI(stripTrailingCharacter(e.offlineObjectsvc[n].metadata_url,"/"))),o}function _getVersion(e,n){var o=null;return e.objectsvc[n]?o=e.objectsvc[n].version:e.offlineObjectsvc[n]&&(o=e.offlineObjectsvc[n].version),o}function _getMetadataForObjectsOrServiceOnlineUtil(e,n,o,t,s,r){var i=_getMetadataUrl(e,n);function k(){_getMetadataForObjectOrService(e,n,o,t,i,s,r)}kony.sdk.isNullOrUndefined(t)||null==t.queryParams||null==t.queryParams||t.queryParams instanceof Object||kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance)),kony.sdk.skipAnonymousCall?k():kony.sdk.claimsRefresh(k,r)}function _getMetadataForObjectOrService(e,n,o,t,s,r,i){var k=!1,a=null,d=null;null!=t&&null!=t&&(k=t.getFromServer,a=t.headers,d=t.queryParams);var l=null;if(l=o?kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,o):kony.sdk.ObjectServiceUtil.getCachedMetadata(n),1!=k&&null!=l&&null!=l)kony.sdk.logsdk.debug("### OnlineObjectService::_getMetadataOfObject from KonyStore:",l),kony.sdk.verifyAndCallClosure(r,l);else{var c=!1;if(null!=(a=kony.sdk.addDefaultHeaders(a))){for(var y in a)null!==y&&"undefined"!==y&&y.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(c=!0);c||(a[kony.sdk.constants.API_VERSION_HEADER]=_getVersion(e,n))}var u=s,g="metadata";o&&(u=u+"/"+o,g=g+"_"+o),null!=d&&null!=d&&(u=u+"?"+kony.sdk.util.objectToQueryParams(d)),invokeObjectOperation(u,g,a,null,kony.sdk.constants.HTTP_METHOD_GET,(function(e){if(kony.sdk.logsdk.debug("### OnlineObjectService::_getMetadataForObjectOrService::invokeSuccessCallback Response:",e),o){var t=e.Metadata.table;kony.sdk.ObjectServiceUtil.cacheObjectMetadata(n,t);var s=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,o);kony.sdk.verifyAndCallClosure(r,s)}else{var i=e.Metadata.tables;kony.sdk.ObjectServiceUtil.cacheMetadata(n,i);var k=kony.sdk.ObjectServiceUtil.getCachedMetadata(n);kony.sdk.verifyAndCallClosure(r,k)}}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::_getMetadataForObjectOrService::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(i,e)}),kony.sdk.util.checkAndFetchNetworkProviderOptions(t))}}function objectServiceRetry(e,n,o,t,s,r,i,k){function a(){_invokeObjectOperation(e,n,o,!1,t,s,r,i,k)}kony.sdk.skipAnonymousCall?a():kony.sdk.claimsAndProviderTokenRefresh(a,i)}function retryServiceCall(e){if(e[kony.sdk.constants.HTTP_STATUS_CODE]&&401===e[kony.sdk.constants.HTTP_STATUS_CODE])return kony.sdk.logsdk.debug("### ObjectService::retryServiceCall received 401 from fabric, trying to refresh backend token"),!0}function invokeObjectOperation(e,n,o,t,s,r,i,k){_invokeObjectOperation(e,n,o,!0,t,s,r,i,k)}function _invokeObjectOperation(e,n,o,t,s,r,i,k,a){kony.sdk.logsdk.perf("Executing invokeObjectOperation");var d=new konyNetworkProvider,l=kony.sdk.getEncodedReportingParamsForSvcid(n),c=kony.sdk.getDefaultHeaders();r||(r="POST"),kony.sdk.skipAnonymousCall||(c[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken),c[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON;var y=kony.sdk.getDeviceId();if(kony.sdk.isNullOrUndefined(y)||(c[kony.sdk.constants.DEVICEID_HEADER]=y),null!=l&&null!=l)try{c[kony.sdk.constants.REPORTING_HEADER]=l}catch(e){kony.sdk.logsdk.error("### invokeObjectOperation::error while parsing metrics payload"+e)}if(o){var u="";for(var g in o)kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT.toLowerCase()===g.toLowerCase()?c[u=kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT].toLowerCase()!==o[g].toLowerCase()&&(c[g]=c[u]+","+o[g]):kony.sdk.constants.KONY_AUTHORIZATION_HEADER.toLowerCase()===g.toLowerCase()?c[u=kony.sdk.constants.KONY_AUTHORIZATION_HEADER]!==o[g]&&(c[u]=o[g]):"content-type"===g.toLowerCase()?c[u=kony.sdk.constants.HTTP_CONTENT_HEADER].toLowerCase()!==o[g].toLowerCase()&&(c[u]=o[g]):c[g]!==o[g]&&(c[g]=o[g])}function f(e){kony.sdk.logsdk.perf("Executing Finished invokeObjectOperation"),kony.sdk.verifyAndCallClosure(i,e)}function p(d,l,c){if(kony.sdk.logsdk.trace("Entering networkerror"),!d||l&&c||(c=d),!0!==t||!0!==retryServiceCall(c)){if(c[kony.sdk.constants.MF_CODE]){kony.sdk.getCurrentInstance();kony.sdk.isSessionOrTokenExpired(c[kony.sdk.constants.MF_CODE])&&kony.sdk.logsdk.warn("###ObjectService::invokeObjectOperationFailure  Session/Token expired. Authenticate and Try again")}kony.sdk.logsdk.perf("Executing Finished invokeObjectOperation"),kony.sdk.verifyAndCallClosure(k,kony.sdk.error.getObjectServiceErrObj(c))}else objectServiceRetry(e,n,o,s,r,i,k,a)}"GET"===r?d.get(e,null,c,f,p,"formdata",a):d.post(e,s,c,f,p,"formdata",a)}function Exception(e,n){return kony.sdk.logsdk.error("Exception --\x3e "+e+": "+n),{code:e,message:n}}function cacheResponseForKey(e,n,o,t){var s=null;if(s=e.cacheID?e.cacheID:kony.sdk.util.generateHashcodeForURL(n,o)){"string"!=typeof s&&(s=s.toString());var r=e.expiryTime?e.expiryTime:kony.sdk.constants.DEFAULT_CACHE_EXPIRY_TIME;t.cacheID=s,(new kony.sdk.ClientCache).add(s,t,r)}}function doesMFSupportsAppversioning(){return kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_IDE||kony.sdk.isNullOrUndefined(appConfig)?kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_PHONEGAP:!kony.sdk.isNullOrUndefined(appConfig.svcDoc)&&!kony.sdk.isNullOrUndefined(appConfig.svcDoc.service_doc_etag)||!appConfig.isMFApp}function populateHeaderWithFabricAppVersion(e){!doesMFSupportsAppversioning()||kony.sdk.isNullOrUndefined(e)||kony.sdk.isNullOrUndefined(kony.sdk.getFabricAppVersion())||(e[kony.sdk.constants.APP_VERSION_HEADER]=kony.sdk.getFabricAppVersion())}function IntegrationService(e,n){var o="",t=e.integsvc[n];o="object"==typeof t?t.url:t;var s=new konyNetworkProvider;if(kony.sdk.util.isNullOrEmptyString(n)||kony.sdk.util.isNullOrEmptyString(o))throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"Invalid serviceUrl and serviceName");function r(n,i,k,a,d,l,c){kony.sdk.logsdk.perf("Executing _invokeOperation : "+n);var y=kony.sdk.getEncodedReportingParamsForSvcid(n),u={};for(var g in k)k.hasOwnProperty(g)&&(u[g]=k[g]);var f=kony.sdk.getDefaultHeaders();if(f[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,f["X-Kony-ReportingParams"]=y,!kony.sdk.skipAnonymousCall){var p=e.currentClaimToken;p||(p=kony.sdk.getCurrentInstance().currentClaimToken),f[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=p}var E=kony.sdk.getDeviceId();if(kony.sdk.isNullOrUndefined(E)||(f["X-Kony-DeviceId"]=E),"object"==typeof t&&t.version&&(f["X-Kony-API-Version"]=t.version),!kony.sdk.isNullOrUndefined(i)&&0!==Object.keys(i).length&&"object"==typeof i){var v=Object.keys(f),O=v.map((function(e){return e.toLowerCase()}));for(var h in i){var _=h;if(-1!==O.indexOf(_.toLowerCase()))for(var m=0;m<v.length;m++){var S=v[m];S.toLowerCase()===_.toLowerCase()&&(f[S]=i[h])}else f[h]=i[h]}}if(c&&c.useCache&&c.cacheID){var T=(new kony.sdk.ClientCache).get(c.cacheID);if(T)return kony.sdk.logsdk.debug("Key found in hash, returning cached response."),void kony.sdk.verifyAndCallClosure(d,T)}kony.sdk.logsdk.perf("Executing network call for _invokeOperation : "+n),s.post(o+"/"+n,u,f,(function(e){c&&c.useCache&&cacheResponseForKey(c,o+"/"+n,y,e),kony.sdk.logsdk.perf("Executing Finished network call for _invokeOperation : "+n),kony.sdk.logsdk.perf("Executing Finished _invokeOperation : "+n),kony.sdk.verifyAndCallClosure(d,e)}),(function(e,o,t){if(!e||o&&t||(t=e),!0===a&&!0===function(e){if(e[kony.sdk.constants.MF_CODE]);else if(e[kony.sdk.constants.HTTP_STATUS_CODE]&&401===e[kony.sdk.constants.HTTP_STATUS_CODE])return kony.sdk.logsdk.debug("### IntegrationService::retryServiceCall received 401 from fabric, trying to refresh backend token"),!0}(t))return kony.sdk.logsdk.debug("errorCallback, retrying the operation: "+n),void function(e,n,o,t,s,i){function k(){r(e,n,o,!1,t,s,i)}kony.sdk.skipAnonymousCall?k():kony.sdk.claimsAndProviderTokenRefresh(k,s)}(n,i,k,d,l);kony.sdk.logsdk.perf("Executing Finished network call for _invokeOperation : "+n),kony.sdk.logsdk.perf("Executing Finished _invokeOperation : "+n),kony.sdk.processIntegrationErrorResponse(t,!0,l)}),null,c)}o=stripTrailingCharacter(o,"/"),this.getUrl=function(){return o},this.invokeOperation=function(e,n,o,t,s,i){function k(){r(e,n,o,!0,t,s,i)}kony.sdk.skipAnonymousCall?k():kony.sdk.claimsRefresh(k,s)},this.uploadBinaryData=function(e,n,t,s,r,i,k){kony.sdk.isNullOrUndefined(k)&&((k={})[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0);var a=kony.sdk.binary.validateUploadParams(n);if(a)kony.sdk.verifyAndCallClosure(i,a);else{if(!kony.sdk.isNullOrUndefined(n[kony.sdk.constants.RAW_BYTES])){var d=kony.convertToBase64(n[kony.sdk.constants.RAW_BYTES]);n[kony.sdk.constants.RAW_BYTES]=d}kony.sdk.skipAnonymousCall?l():kony.sdk.claimsRefresh(l,i)}function l(){var a={};a.URL=o+"/"+e;var d=kony.sdk.getDefaultHeaders();kony.sdk.skipAnonymousCall||(d[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=kony.sdk.getCurrentInstance().currentClaimToken),a.headers=d,n[kony.sdk.constants.FILE_PATH]?(a[kony.sdk.constants.FILE_PATH]=n[kony.sdk.constants.FILE_PATH],delete n[kony.sdk.constants.FILE_PATH]):n[kony.sdk.constants.RAW_BYTES]?(a[kony.sdk.constants.RAW_BYTES]=n[kony.sdk.constants.RAW_BYTES],delete n[kony.sdk.constants.RAW_BYTES]):n[kony.sdk.constants.FILE_OBJECT]&&(a[kony.sdk.constants.FILE_OBJECT]=n[kony.sdk.constants.FILE_OBJECT],delete n[kony.sdk.constants.FILE_OBJECT]),a.uploadParams=n,kony.sdk.binary.uploadBinaryData(a,t,s,r,i,k)}},this.getBinaryData=function(e,n,o,t,s,i,k,a,d){function l(){r(e,t,n,!0,(function(e){if(kony.sdk.isNullOrUndefined(e)&&(e={}),d&&d.ChunkSize&&(e.ChunkSize=d.ChunkSize),t)for(var r in kony.sdk.isNullOrUndefined(e.headers)&&(e.headers={}),t)t.hasOwnProperty(r)&&(e.headers[r]=t[r]);kony.sdk.binary.getBinaryData(n,o,e,s,i,k,a,d)}),a,d)}kony.sdk.isNullOrUndefined(d)&&((d={})[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0),kony.sdk.skipAnonymousCall?l():kony.sdk.claimsRefresh(l,a)},kony.sdk.processIntegrationErrorResponse=function(e,n,o){if(e[kony.sdk.constants.MF_CODE]&&kony.sdk.isSessionOrTokenExpired(e[kony.sdk.constants.MF_CODE])&&kony.sdk.logsdk.info("###IntegrationService::invokeOperationFailure  Session/Token expired. Authenticate and Try again"),!n)return kony.sdk.error.getIntegrationErrObj(e);o&&kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getIntegrationErrObj(e))},this.invokeOperationSync=function(e,n,r){var i;return(i=kony.sdk.claimsRefreshSync())&&i.message&&"success"===i.message?function(e,n,r){var i={},k=kony.sdk.getCurrentInstance(),a=kony.sdk.getEncodedReportingParamsForSvcid(e);for(var d in r)r.hasOwnProperty(d)&&(i[d]=r[d]);for(var l in k.tokens)if(k.tokens.hasOwnProperty(l)&&"function"!=typeof l){k.tokens[l];break}i[kony.sdk.constants.REPORTING_PARAMS]=a;var c=kony.sdk.getDefaultHeaders();c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,c[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=k.currentClaimToken,"object"==typeof t&&t.version&&(c["X-Kony-API-Version"]=t.version);if(0!==Object.keys(n).length){var y=[];y=Object.keys(c);var u={};for(var g in u=y.map((function(e){return e.toLowerCase()})),n){var f=g;if(-1!==u.indexOf(f.toLowerCase()))for(var p=0;p<y.length;p++){var E=y[p];E.toLowerCase()===f.toLowerCase()&&(c[E]=n[g])}else c[g]=n[g]}}var v=null;return v=s.postSync(o+"/"+e,i,c),0==v.opstatus?v:kony.sdk.processIntegrationErrorResponse(v,!1)}(e,n,r):i}}"undefined"==typeof kony&&(kony={}),kony.sdk=function(){var e=this;KNYMobileFabric=this,this.mainRef={};var n={};this.tokens={},this.currentClaimToken=null,this.globalRequestParams={headers:{},queryparams:{},bodyparams:{}};var o="",t=null;if(this.reportingheaders_allowed=!1,this.enableWithCredentialsGloabally=!1,kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE&&"function"==typeof kony.setUserID){var s=kony.ds.read("userIDFromLicenseFlag");if(kony.sdk.isNullOrUndefined(s)){var r=[];r.push("false"),kony.ds.save(r,"userIDFromLicenseFlag")}}kony.internal&&kony.internal.sdk&&kony.internal.sdk.Services&&(this.internalSdkObject=new kony.internal.sdk.Services),this.getUserId=function(){return o},this.setCurrentUserId=function(e){o=e},this.getSessionId=function(){if(!konyRef.sessionId){var e=kony.ds.read(kony.sdk.constants.KONYUUID);e?konyRef.sessionId=e[0]:(kony.sdk.logsdk.error("Session id is not available"),konyRef.sessionId="")}return konyRef.sessionId},this.setSessionId=function(e){konyRef.sessionId=e},this.setClientParams=function(e){n=e},this.getClientParams=function(){return n},this.globalRequestParamType={headers:"headers",queryParams:"queryparams",bodyParams:"bodyparams"},this.getGlobalRequestParams=function(n){return kony.sdk.logsdk.trace("Entering getGlobalRequestParams"),kony.sdk.isNullOrUndefined(n)?e.globalRequestParams:n===e.globalRequestParamType.headers?e.globalRequestParams.headers:n===e.globalRequestParamType.queryParams?e.globalRequestParams.queryparams:n===e.globalRequestParamType.bodyParams?e.globalRequestParams.bodyparams:void 0},this.setGlobalRequestParam=function(n,o,t){kony.sdk.logsdk.trace("Entering setGlobalRequestParam"),"string"==typeof n&&"string"==typeof o&&"string"==typeof t&&(t===e.globalRequestParamType.headers?e.globalRequestParams.headers[n]=o:t===e.globalRequestParamType.queryParams?e.globalRequestParams.queryparams[n]=o:t===e.globalRequestParamType.bodyParams&&(e.globalRequestParams.bodyparams[n]=o),kony.sdk.getAType()!==kony.sdk.constants.SDK_ATYPE_SPA&&"watch"!==kony.sdk.getAType()&&(kony.sdk.sdkCommons.setGlobalRequestParam(n,o,t),kony.logger.setGlobalRequestParam(n,o,t)))},this.removeGlobalRequestParam=function(n,o){kony.sdk.logsdk.trace("Entering removeGlobalRequestParam"),"string"==typeof n&&"string"==typeof o&&(o!==e.globalRequestParamType.headers||kony.sdk.isNullOrUndefined(e.globalRequestParams.headers[n])?o!==e.globalRequestParamType.queryParams||kony.sdk.isNullOrUndefined(e.globalRequestParams.queryparams[n])?o!==e.globalRequestParamType.bodyParams||kony.sdk.isNullOrUndefined(e.globalRequestParams.bodyparams[n])||delete e.globalRequestParams.bodyparams[n]:delete e.globalRequestParams.queryparams[n]:delete e.globalRequestParams.headers[n],kony.sdk.getAType()!==kony.sdk.constants.SDK_ATYPE_SPA&&"watch"!==kony.sdk.getAType()&&(kony.sdk.sdkCommons.removeGlobalRequestParam(n,o),kony.logger.removeGlobalRequestParam(n,o)))},this.resetGlobalRequestParams=function(){kony.sdk.logsdk.trace("Entering resetGlobalRequestParams"),e.globalRequestParams={headers:{},queryparams:{},bodyparams:{}},kony.sdk.getAType()!==kony.sdk.constants.SDK_ATYPE_SPA&&"watch"!==kony.sdk.getAType()&&(kony.sdk.sdkCommons.resetGlobalRequestParams(),kony.logger.resetGlobalRequestParams())},this.appendGlobalHeaders=function(n){kony.sdk.logsdk.perf("Executing appendGlobalHeaders");var o=e.getGlobalRequestParams(e.globalRequestParamType.headers);if(!kony.sdk.isNullOrUndefined(o))for(var t in kony.sdk.isNullOrUndefined(n)&&(n={}),o)kony.sdk.isNullOrUndefined(n[t])&&(n[t]=o[t]);kony.sdk.logsdk.perf("Executing Finished appendGlobalHeaders")},this.appendGlobalBodyParams=function(n){kony.sdk.logsdk.perf("Executing appendGlobalBodyParams");var o=e.getGlobalRequestParams(e.globalRequestParamType.bodyParams);if(!kony.sdk.isNullOrUndefined(o))for(var t in kony.sdk.isNullOrUndefined(n)&&(n={}),o)kony.sdk.isNullOrUndefined(n[t])&&(n[t]=o[t]);kony.sdk.logsdk.perf("Executing Finished appendGlobalBodyParams")},this.appendGlobalQueryParams=function(n){kony.sdk.logsdk.perf("Executing appendGlobalQueryParams");var o=e.getGlobalRequestParams(e.globalRequestParamType.queryParams);return kony.sdk.isNullOrUndefined(o)||0===Object.keys(o).length||(n=n.indexOf("?")<0?n+"?"+kony.sdk.util.objectToQueryParams(o):n+"&"+kony.sdk.util.objectToQueryParams(o)),kony.sdk.logsdk.perf("Executing Finished appendGlobalQueryParams"),n},this.appendGlobalParams=function(n,o,t){kony.sdk.logsdk.perf("Executing appendGlobalParams"),e.appendGlobalHeaders(o),e.appendGlobalBodyParams(t);var s=e.appendGlobalQueryParams(n);return kony.sdk.logsdk.perf("Executing Finished appendGlobalParams"),s},this.setAppSecurityKey=function(e){if(kony.sdk.logsdk.perf("Executing setAppSecurityKey"),kony.sdk.isNullOrUndefined(e)||"string"!=typeof e){var n={};return n[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.invalid_security_key,n[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.invalid_security_key,kony.sdk.logsdk.error(kony.sdk.errormessages.invalid_security_key),kony.sdk.logsdk.perf("Executing Finished setAppSecurityKey"),n}return t=e,kony.sdk.logsdk.perf("Executing Finished setAppSecurityKey"),!0===konyRef.mainRef.integrityKey&&setIntegrityParamsHandler(),!0},this.getAppSecurityKey=function(){return t}},kony.mbaas=kony.sdk,kony.sdk.isDebugEnabled=!0,kony.sdk.isInitialized=!1,kony.sdk.currentInstance=null,kony.sdk.isLicenseUrlAvailable=!0,kony.sdk.isOAuthLogoutInProgress=!1,kony.sdk.constants=kony.sdk.constants||{},kony.sdk.version="202305.0.0",kony.sdk.logsdk=new konySdkLogger,kony.sdk.syncService=null,kony.sdk.dataStore=kony.sdk.dataStore||new konyDataStore,kony.sdk.skipAnonymousCall=!1,kony.sdk.convertPassthroughResponseToJson=!1,kony.sdk.getDefaultInstance=function(){return kony.sdk.currentInstance},kony.sdk.getCurrentInstance=function(){return kony.sdk.currentInstance},kony.sdk.skipAnonymousLoginCall=function(e){kony.sdk.skipAnonymousCall=e},kony.sdk.claimsRefresh=function(e,n){kony.sdk.logsdk.trace("Entering kony.sdk.claimsRefresh");var o=kony.sdk.getCurrentInstance(),t=(new konyNetworkProvider,function(e,n){o.getIdentityService("$anonymousProvider").login(null,(function(n){e()}),(function(e){kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getAuthErrObj(e))}))});null===o.currentClaimToken?(kony.sdk.logsdk.warn("claims Token is Unavialable"),o.isAnonymousProvider?t(e,n):kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getNullClaimsTokenErrObj())):kony.sdk.isClaimsTokenExpired(o.claimTokenExpiry)?o.isAnonymousProvider?t(e,n):kony.sdk.fetchClaimsTokenFromServer(!1,e,n):e()},kony.sdk.isClaimsTokenExpired=function(e){return!kony.sdk.isNullOrUndefined(e)&&Date.now()+6e4>e},kony.sdk.claimsAndProviderTokenRefresh=function(e,n){kony.sdk.logsdk.trace("Entering kony.sdk.claimsAndProviderTokenRefresh"),kony.sdk.fetchClaimsTokenFromServer(!0,e,n)},kony.sdk.fetchClaimsTokenFromServer=function(e,n,o){kony.sdk.logsdk.perf("Executing kony.sdk.fetchClaimsTokenFromServer");var t=kony.sdk.getCurrentInstance(),s=new konyNetworkProvider;kony.sdk.logsdk.debug("claims token has expired. fetching new token and isBackendTokenRefreshRequired :",e);var r=stripTrailingCharacter(t.rec.url,"/")+"/claims",i={},k=kony.sdk.util.getRefreshLoginTokenStoreUtility();if(e&&(kony.sdk.logsdk.debug("isBackendTokenRefreshRequired is "+e+" in claims refresh"),r+="?refresh=true",i[kony.sdk.constants.ENABLE_REFRESH_LOGIN]=!0,!kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh))){var a={};for(var d in kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh)for(var l in kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[d])a[l]=kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh[d][l];kony.sdk.util.populateCustomOAuthParams(i,a)}if(kony.sdk.logsdk.debug("service url is "+r),null===t.currentRefreshToken)kony.sdk.logsdk.perf("Executing Finished network call for fetchClaimsTokenFromServer"),kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getNullRefreshTokenErrObj());else{var c={};c[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=t.currentRefreshToken,c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,kony.sdk.logsdk.perf("Executing network call for fetchClaimsTokenFromServer"),s.post(r,i,c,(function(o){kony.sdk.logsdk.perf("Executing Finished network call for fetchClaimsTokenFromServer"),kony.sdk.logsdk.perf("Executing Finished kony.sdk.fetchClaimsTokenFromServer : refresh success");var s=kony.sdk.processClaimsSuccessResponse(o,t,!1);getLatestServiceDocIfAvailable(o,(function(){if(!kony.sdk.isNullOrUndefined(o[kony.sdk.constants.LOGIN_PROFILES])){kony.sdk.logsdk.debug("login profiles present in claims refresh");var r=Object.keys(o[kony.sdk.constants.LOGIN_PROFILES]);k.setInternalRefreshToken(r,t.currentRefreshToken)}if(e&&!kony.sdk.isNullOrUndefined(o[kony.sdk.constants.BACKEND_REFRESH_TOKENS])){kony.sdk.logsdk.debug("trying to update backend tokens securely");var i=k.getAllPersistedRefreshLoginProviderTokens();if(!kony.sdk.isNullOrUndefined(i)){kony.sdk.logsdk.debug("retrieved local tokens securely");var a=o[kony.sdk.constants.BACKEND_REFRESH_TOKENS];k.setBulkBackendRefreshTokens(a)}}kony.sdk.verifyAndCallClosure(n,s)}))}),(function(e){kony.sdk.logsdk.perf("Executing Finished network call for fetchClaimsTokenFromServer"),kony.sdk.logsdk.error("failed to acquire refresh token",e),kony.sdk.processClaimsErrorResponse(e,t,!0,o)}))}},kony.sdk.processClaimsSuccessResponse=function(e,n,o,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.processClaimsSuccessResponse"),e=kony.sdk.formatSuccessResponse(e),n.currentClaimToken=e.claims_token.value,n.claimTokenExpiry=e.claims_token.exp,n.currentRefreshToken=e.refresh_token,kony.logger.setClaimsToken(),kony.sdk.offline.isOfflineEnabled&&1==kony.sdk.offline.isOfflineEnabled&&kony.sdk.offline.updateAuthToken(e),(kony.sdk.offline.persistToken||kony.sdk.offline.isPersistentLoginResponseEnabled())&&kony.sdk.offline.updatePersistedToken(e),!o)return{message:"success"};t&&t()},kony.sdk.processClaimsErrorResponse=function(e,n,o,t){if(kony.sdk.logsdk.perf("Executing kony.sdk.processClaimsErrorResponse"),n.isAnonymousProvider=!0,!o){var s=kony.sdk.error.getAuthErrObj(e);return kony.sdk.logsdk.perf("Executing Finished kony.sdk.processClaimsErrorResponse"),s}t&&kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getAuthErrObj(e))},kony.sdk.prototype.init=function(e,n,o,t,s,r){if(kony.sdk.logsdk.perf("Executing kony.sdk.prototype.init"),kony.sdk.util.clearExistingWebsocketObject(),kony.sdk.util.deleteMetadatafromDs(),!(e&&n&&o))return kony.sdk.logsdk.error("### init:: Invalid credentials passed"),void kony.sdk.verifyAndCallClosure(s,"Invalid initialization parameters passed. Please check appKey, appSecret and ServiceUrl parameters");var i=new konyNetworkProvider;o=o.trim(),this.mainRef.serviceUrl=o,this.mainRef.appSecret=n,this.mainRef.appKey=e,konyRef=this,KNYMobileFabric=this,konyRef.mainRef.integrityKey=!1,kony.sdk.currentInstance=konyRef;var k={};k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,k[kony.sdk.constants.IS_APP_CONFIG_CALL]=!0,setIntegrityParams.call(konyRef),kony.sdk.logsdk.trace("### init:: calling GET on appConfig to retrieve servicedoc");var a=kony.sdk.getDefaultHeaders();a[kony.sdk.constants.APP_KEY_HEADER]=e,a[kony.sdk.constants.APP_SECRET_HEADER]=n,a["X-HTTP-Method-Override"]="GET",kony.sdk.setFabricAppVersion(null),!kony.sdk.isNullOrUndefined(r)&&r.MFAppVersion&&kony.sdk.setFabricAppVersion(r.MFAppVersion),populateHeaderWithFabricAppVersion(a),kony.sdk.logsdk.perf("Executing network call for fetching servicedoc"),i.post(o,null,a,(function(o){o=kony.sdk.formatSuccessResponse(o),kony.sdk.logsdk.info("### init::_doInit fetched servicedoc successfuly"),kony.sdk.logsdk.debug("### init:: retrieved data from service doc",o),konyRef.mainRef.config=o,konyRef.servicedoc=o,konyRef.mainRef.appId=o.appId;var r=konyRef.initWithServiceDoc(e,n,o);!0===r?(kony.sdk.logsdk.info("### init::_doInit processing service document successful"),kony.sdk.logsdk.debug("### init::_doInit saving done. Calling success callback",o),kony.sdk.initiateSession(konyRef),void 0!==KNYMetricsService&&kony.sdk.currentInstance.getMetricsService&&(KNYMetricsService=kony.sdk.currentInstance.getMetricsService())&&"undefined"!=typeof appConfig&&kony.sdk.util.isJsonObject(appConfig)&&appConfig.hasOwnProperty("eventTypes")&&kony.sdk.isArray(appConfig.eventTypes)&&0!==appConfig.eventTypes.length&&KNYMetricsService.setEventTracking(appConfig.eventTypes),kony.sdk.skipAnonymousCall?(kony.sdk.logsdk.info("### init::skipping anonymous login call"),konyRef.isAnonymousProvider=!0,kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.init"),kony.sdk.verifyAndCallClosure(t,konyRef.mainRef)):kony.sdk.getCurrentInstance().getIdentityService("$anonymousProvider").login(null,(function(e){kony.sdk.logsdk.perf("Executing Finished network call for fetching servicedoc"),kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.init"),kony.sdk.verifyAndCallClosure(t,konyRef.mainRef)}),(function(e){kony.sdk.logsdk.perf("Executing Finished network call for fetching servicedoc"),kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.init"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(e))}))):(kony.sdk.logsdk.error("### init::_doInit processing servicedoc failed. Calling failure callback"),kony.sdk.logsdk.perf("Executing Finished network call for fetching servicedoc"),kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.init"),kony.sdk.verifyAndCallClosure(s,JSON.stringify(r)))}),(function(e){kony.sdk.logsdk.error("### init::_doInit fetching service document from Server failed",e),kony.sdk.logsdk.info("### init::_doInit  calling failure callback"),kony.sdk.logsdk.perf("Executing Finished network call for fetching servicedoc"),kony.sdk.isInitialized=!1,kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.init"),kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getAuthErrObj(e))}),null,k)},kony.sdk.prototype.initWithServiceDoc=function(e,n,o){kony.sdk.logsdk.perf("Executing kony.sdk.prototype.initWithServiceDoc"),konyRef=this;var t="";konyRef.idSid="",konyRef.refreshLoginProvidersSet=new Set,KNYMobileFabric=this,kony.sdk.currentInstance=this;var s=kony.sdk.cloneObject(o);if(kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE?kony.sdk.isNullOrUndefined(o)||kony.sdk.util.checkAndUpdateIntegrityKey(o):konyRef.mainRef.integrityKey=!1,!(o instanceof kony.sdk.serviceDoc))return r(o);function r(r){for(var i in r)(kony.sdk.isNullOrUndefined(r[i])||kony.sdk.isEmptyObject(r[i]))&&delete r[i];kony.sdk.logsdk.debug("### init::_doInit::_processServiceDoc",r);try{konyRef.mainRef.appKey=e,konyRef.mainRef.appSecret=n,konyRef.mainRef.appId=r.appId,konyRef.mainRef.config=o,konyRef.mainRef.baseId=r.baseId,konyRef.mainRef.name=r.name,r.login?konyRef.login=r.login:konyRef.login=[];var k=r.selflink;if(k){var a=k.indexOf("/appconfig");if(-1==a)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"invalid self link");k=k.slice(0,a);var d={type:"anonymous"};d.url=k,d.prov="$anonymousProvider",konyRef.login.push(d)}if(void 0!==r.integsvc&&(kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing Integration services"),konyRef.integsvc=r.integsvc,kony.sdk.logsdk.debug("### init::_doInit::konyRef integration Services",konyRef.integsvc)),"object"==typeof r.services_meta&&(kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing Object services"),kony.sdk.util.populateIndividualServiceLists(r,konyRef)),void 0!==r.messagingsvc&&(kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing Messaging services"),konyRef.messagingsvc=r.messagingsvc),void 0!==r.logicsvc&&(kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing Logic services"),konyRef.logicsvc=r.logicsvc),void 0!==r.sync&&(konyRef.sync=r.sync),r.identity_features&&r.identity_features.reporting_params_header_allowed&&(kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing Identity features"),konyRef.reportingheaders_allowed=r.identity_features.reporting_params_header_allowed),kony.sdk.isLicenseUrlAvailable){if(!(r.reportingsvc&&r.reportingsvc.custom&&r.reportingsvc.session))throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"invalid url for reporting service");if(konyRef.customReportingURL=r.reportingsvc.custom,konyRef.sessionReportingURL=r.reportingsvc.session,t=konyRef.sessionReportingURL){var l=t.lastIndexOf("/");if(-1!==l){var c=t.substring(0,l+1);if(kony.serverEvents&&(konyRef.serverEventsUrl=(c+kony.sdk.constants.SERVER_EVENTS_URL_ENDPOINT).replace("http","ws"),initializeServerEvents()),kony.logger.isNativeLoggerAvailable()){var y=kony.logger.createNetworkPersistor();y.URL=c+kony.logger.networkPersistorUrlEndpoint,kony.logger.setPersistorConfig(y)}}}}konyRef.internalSdkObject&&(konyRef.internalSdkObject.initWithServiceDoc(e,n,r),konyRef.internalSdkObject.setClientParams&&(appConfig?konyRef.internalSdkObject.setClientParams({aid:appConfig.appId,aname:appConfig.appName,aversion:appConfig.appVersion}):konyRef.internalSdkObject.setClientParams(konyRef.getClientParams())),kony.sdk.logsdk.info("### init::internal sdk object initialized")),kony.sdk.logsdk.info("### init::_doInit::_processServiceDoc parsing service document done"),kony.sdk.isInitialized=!0,konyRef.isAnonymousProvider=!0,kony.sdk.metric&&kony.os.deviceInfo().name===kony.sdk.constants.PLATFORM_SPA&&kony.sdk.metric.flushEvents(),kony.sdk.isNullOrUndefined(r.reportingsvc)||kony.sdk.setLicenseCall(e,n,s),kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_PLAIN_JS&&kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_PHONEGAP&&(kony.sdk.getPlatformName()!==kony.sdk.constants.PLATFORM_ANDROID||!0!==appConfig.isSSOEnabled&&"true"!==appConfig.isSSOEnabled||kony.sdk.util.initializeSSO());var u=kony.sdk.getSdkType(),g=kony.sdk.getAType();kony.sdk.getPlatformName();return u!=kony.sdk.constants.SDK_TYPE_IDE||g!==kony.sdk.constants.SDK_ATYPE_NATIVE&&g!==kony.sdk.constants.SDK_ATYPE_SPA||kony.sdk.isNullOrUndefined(konyRef.offlineObjectsvc)||kony.sdk.isEmptyObject(konyRef.offlineObjectsvc)||(konyRef.OfflineObjects=new kony.sdk.OfflineObjects(konyRef.offlineObjectsvc)),kony.license&&kony.licensevar&&kony.licensevar.changeHandlers&&0==kony.licensevar.changeHandlers.length&&kony.license.registerChangeListener&&(kony.license.registerChangeListener(konyRef.sessionChangeHandler),konyRef.overrideUserIdFlag=!0),!0===konyRef.mainRef.integrityKey?setIntegrityParamsHandler():(resetIntegrityParams(),kony.sdk.getAType()!==kony.sdk.constants.SDK_ATYPE_SPA&&"watch"!==kony.sdk.getAType()&&kony.sdk.httpIntegrity.removeIntegrityCheck()),kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_PHONEGAP&&kony.sdk.util.checkAndGenerateClientUUID(),kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.initWithServiceDoc"),!0}catch(e){return kony.sdk.logsdk.error("### init::_doInit::_processServiceDoc failed with an exception: ",e),"processing the ServiceDoc failed with an exception: "+JSON.stringify(e)}}r(o.toJSON())},kony.sdk.prototype.sessionChangeHandler=function(e){kony.sdk.logsdk.perf("Executing kony.sdk.prototype.sessionChangeHandler");var n=kony.sdk.getCurrentInstance();n.getMetricsService();var o=null,t=null;kony.sdk.util.isNullOrEmptyString(e.sessionId)||(o=e.sessionId,n.setSessionId(o),n.internalSdkObject&&(o=o+","+kony.sdk.util.getSessionType()),n.metricsServiceObject&&n.metricsServiceObject.setSessionId&&n.metricsServiceObject.setSessionId(o)),null!=e.userId&&(n.overrideUserIdFlag=!0,t=e.userId,n.setCurrentUserId(t),n.metricsServiceObject&&n.metricsServiceObject.setUserId&&n.metricsServiceObject.setUserId(t)),kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.sessionChangeHandler")},kony.sdk.ClientCache=function(e){if("object"==typeof kony.sdk.ClientCache.instance)return kony.sdk.ClientCache.instance;var n=null;if(null==e)n=new lruCache(kony.sdk.constants.DEFAULT_CACHE_SIZE);else{if("number"!=typeof e||e<=0)return kony.sdk.logsdk.warn("cache cannot be created of size <= 0"),null;n=new lruCache(e)}this.get=function(e){return n.get(e)},this.has=function(e){return n.has(e)},this.add=function(e,o,t){n.add(e,o,t)},this.remove=function(e){n.remove(e)},kony.sdk.ClientCache.instance=this},lruCache=function(e){var n="SDK_CACHE ";if(null==e)this.capacity=kony.sdk.constants.DEFAULT_CACHE_SIZE;else{if("number"!=typeof e||e<=0)return kony.sdk.logsdk.warn("cache cannot be created of size <= 0"),null;this.capacity=e}function o(){return Math.floor((new Date).getTime()/1e3)}function t(e,n,t){this.key=e,this.val=n,this.newer=null,this.older=null,this.expiryTime=0,void 0!==t&&"number"==typeof t&&0!=t&&(this.expiryTime=o()+t)}function s(e){var n=this.map[e];this.head!==n&&(n.newer?n.newer.older=n.older:this.head=n.older,n.older?n.older.newer=n.newer:this.tail=n.newer,n.older=this.head,n.newer=null,this.head&&(this.head.newer=n),this.head=n)}this.length=0,this.map={},this.head=null,this.tail=null,this.getSize=function(){return this.length},this.add=function(e,o,r){if(void 0!==e&&void 0!==o&&null!==e&&null!==o){if(this.has(e))return this.map[e].val=o,kony.sdk.logsdk.debug(n+"Key: "+e+" updated"),void s.call(this,e);this.length>=this.capacity&&this.remove(this.tail.key);var i=new t(e,o,r);i.older=this.head,this.head&&(this.head.newer=i),this.head=i,this.tail||(this.tail=i),this.map[e]=i,this.length++,kony.sdk.logsdk.debug(n+"Key: "+e+" added")}},this.get=function(e){return this.has(e)?0!=this.map[e].expiryTime&&o()>this.map[e].expiryTime?(this.remove(e),kony.sdk.logsdk.debug(n+"Key: "+e+" expired"),null):(s.call(this,e),this.map[e].val):null},this.remove=function(e){if(this.has(e)){var n=this.map[e];n.newer?n.newer.older=n.older:this.head=n.older,n.older?n.older.newer=n.newer:this.tail=n.newer,delete this.map[e],n=null,this.length--}},this.clear=function(){this.map={},this.length=0},this.has=function(e){return this.map.hasOwnProperty(e)},this.setMaxCacheSize=function(e){kony.sdk.logsdk.debug(n+"updating cache size from "+this.capacity+" to "+e),this.capacity=e}},kony.sdk.prototype.getConfigurationService=function(){if(kony.sdk.logsdk.perf("Executing kony.sdk.prototype.getConfigurationService"),!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Configuration service.");var e=new ConfigurationService(this);if(kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getConfigurationService"),e)return e;throw new Exception(kony.sdk.errorConstants.CONFIGURATION_FAILURE,"Error in creating configuration object")},kony.sdk.constants={LOGGER_NAME:"MFSDK",SYNC_LOGGER_NAME:"SYNCV1",APP_LOGGER_NAME:"KonyLogger",LAUNCHMODE_DEEPLINK:3,DEEPLINK_VALID_PARAM:"code",HASHING_ALGORITHM:"SHA256",REMOVE_INTEGRITY_CHECK:"removeIntegrityCheck",SET_INTEGRITY_CHECK:"setIntegrityCheck",DISABLE_INTEGRITY_CHECK:"disableIntegrityCheck",DEFAULT_CACHE_SIZE:100,GET_CLIENT_PROPERTY_URL:"/metadata/configurations/client/properties",DEFAULT_CACHE_EXPIRY_TIME:0,QUERY_PARAMS:"queryParams",QUERY:"query",BODY_PARAMS:"bodyParams",OAUTH_SESSION_RESPONSE_TYPE:"oauth_session_response_type",GET_BACKEND_TOKEN:"getBackendToken",GET_SECURITY_ATTRIBUTES:"getSecurityAttributes",GET_USER_ATTRIBUTES:"getUserAttributes",GET_USER_DATA:"getUserData",GET_PROFILE:"getProfile",KEY_PROVIDER:"provider",KEY_INCLUDE_PROFILE:"include_profile",OAUTH_TOKEN_URL:"/oauth2/token",KEY_HTTP_REQUEST_OPTIONS:"httpRequestOptions",KEY_XML_HTTP_REQUEST_OPTIONS:"xmlHttpRequestOptions",ENABLE_WITH_CREDENTIALS:"enableWithCredentials",KEY_GRANT_TYPE:"grant_type",KEY_REFRESH_TOKEN:"refresh_token",KEY_BACKEND_REFRESH_TOKEN:"backend_refresh_token",KEY_AUTH_REFRESH_TOKEN:"auth_refresh_token",KEY_URL:"url",KEY_APP_CHALLENGE_METHOD:"app_challenge_method",APP_VERIFIER:"app_verifier",APP_CHALLENGE:"app_challenge",APP_CHALLENGE_METHOD_VALUE:"S256",PKCE_CODE_MAX_LENGTH:128,IS_ENABLE_IDENTITY_PKCE:"is_enable_identity_pkce",ENABLE_IDENTITY_PKCE:"enable_identity_pkce",OAUTH_REDIRECT_SUCCESS_URL:"success_url",ETAGID:"etagID",TOOLS_ETAG_ID:"tools_etagID",IS_APP_CONFIG_CALL:"isAppConfigCall",IS_MFA_ENABLED:"is_mfa_enabled",MFA_META:"mfa_meta",IE11_CROSS_DOMAIN_OAUTH_BASE_URL:"IE11CrossDomainOAuthBaseUrl",KNY_OAUTH_REDIRECT_HTML:"KNYOAuthRedirect.html",KNY_OAUTH_CALLBACK_HTML:"KNYOAuthCallback.html",KNY_OAUTH_REDIRECT_URL:"kny_oauth_redirect_url",KNY_OAUTH_PROTOCOL_PARAM:"kny_protocol_param",HTTP_METHOD_GET:"GET",HTTP_METHOD_POST:"POST",HTTP_METHOD_DELETE:"DELETE",HTTP_CONTENT_HEADER:"Content-Type",HTTP_REQUEST_HEADER_ACCEPT:"Accept",HEADER:"header",CONTENT_TYPE_FORM_URL_ENCODED:"application/x-www-form-urlencoded",CONTENT_TYPE_FORM_URL_ENCODED_CHARSET_UTF8:"application/x-www-form-urlencoded;charset=utf-8",CONTENT_TYPE_JSON:"application/json",CONTENT_TYPE_JSON_CHARSET_UTF8:"application/json;charset=utf-8",CONTENT_TYPE_OCTET_STREAM:"application/octet-stream",CONTENT_TYPE_TEXT_HTML:"text/html",CONTENT_TYPE_TEXT_PLAIN:"text/plain",SDK_TYPE_IDE:"js",SDK_TYPE_PHONEGAP:"phonegap",SDK_TYPE_PLAIN_JS:"plain-js",APP_SESSION_INTERACTIVE:"I",APP_SESSION_NON_INTERACTIVE:"NI",SDK_ATYPE_NATIVE:"native",SDK_ATYPE_SPA:"spa",PLATFORM_WINDOWS:"windows",PLATFORM_ANDROID:"android",PLATFORM_IOS:"ios",PLATFORM_THIN_CLIENT:"web",PLATFORM_SPA:"thinclient",REPORTING_PARAMS:"konyreportingparams",KEY_DEVICE_ID:"deviceID",KONY_METRICS_BUFFER:"konyMetricsBuffer",KONY_CUSTOM_REPORT_DATA:"konyCustomReportData",EVENT_BUFFER_MAX_COUNT:"eventBufferMaxCount",EVENT_BUFFER_AUTO_FLUSH_COUNT:"eventBufferAutoFlushCount",EVENT_SUB_TYPE:"evtSubType",FORM_ID:"formID",WIDGET_ID:"widgetID",FLOW_TAG:"flowTag",BUFFER:"BUFFER",CONFIG_TYPE:"confType",APP_KEY_HEADER:"X-Kony-App-Key",APP_SECRET_HEADER:"X-Kony-App-Secret",KONY_AUTHORIZATION_HEADER:"X-Kony-Authorization",AUTHORIZATION_HEADER:"Authorization",REPORTING_HEADER:"X-Kony-ReportingParams",INTEGRITY_HEADER:"X-Kony-Integrity",DEVICEID_HEADER:"X-Kony-DeviceId",API_VERSION_HEADER:"X-Kony-API-Version",APP_VERSION_HEADER:"X-Kony-App-Version",SDK_TYPE_HEADER:"X-Kony-SDK-Type",SDK_VERSION_HEADER:"X-Kony-SDK-Version",PLATFORM_TYPE_HEADER:"X-Kony-Platform-Type",REQUEST_ID_HEADER:"X-Kony-RequestId",HTTP_OVERRIDE_HEADER:"X-HTTP-Method-Override",HTTP_STATUS_CODE:"httpStatusCode",MF_OPSTATUS:"opstatus",MF_CODE:"mfcode",MF_ERROR_MSG:"errmsg",MF_ERROR_CODE:"errcode",MF_SERVICE:"service",KEY_RESPONSE_CODE:"responsecode",KEY_HTTP_RESPONSE:"httpresponse",HTTP_CODE_400:400,HTTP_CODE_401:401,SUBSCRIBE_AUDIENCE:"/subscribeaudience",BEACON_UPDATE:"/beaconupdate",RICH_PUSH_MESSAGE:"/messages/rich/",LAST_ACTIVE_DATE:"lastActiveDate",KSID:"ksid",AUTH_TOKEN:"authToken",DEVICE_AUTHTOKEN_HEADER:"X-Device-AuthToken",FUNCTION_STRING:"function",PROCESSED_TEMPLATE:"processedTemplate",MISSING_VARIABLES:"missingVariables",FILE_PATH:"FilePath",RAW_BYTES:"rawBytes",FILE_OBJECT:"fileObject",FILE_NAME:"fileName",KONYUUID:"konyUUID",BROWSER_WIDGET:"browserWidget",INIT_FAILURE_MESSAGE:"SDK is not initialized, call init before invoking any operation on",DISABLE_INTEGRITY:"disableIntegrity",PASSTHROUGH:"passthrough",BINARY_DATATYPE:"binary",JSON_DATA:"jsondata",IGNORE_MESSAGE_INTEGRITY:"ignoreMessageIntegrity",KEY_MESSAGE:"message",KEY_CODE:"code",EQUAL_TO:"=",LICENSE_SESSION_TIMEOUT_IN_MILLIS:144e5,LICENSE_BG_TO_FG_SESSION_TIMEOUT_IN_MILLIS:18e5,LICENSE_KONY_OFFLINE_ACCESS_DATA:"konyOfflineAccessData",DW_SSO_TOKEN_KEY:"ssoAuth",SSO_TOKEN_KEY:"ssoTokenKey",SSO_SECRET_KEY:"ssoSecretKey",SSO_ENCRYPTION_KEY:"ssoencryption",ENCRYPTION_ALGO_AES:"aes",HASH_FUNCTION_MD5:"md5",HASH_FUNCTION_SHA2:"sha2",ENC_TYPE_PASSPHRASE:"passphrase",ENC_PASSPHRASE_HASH_ALGO:"passphrasehashalgo",AES_ALGO_KEY_STRENGTH_128:128,AES_ALGO_KEY_STRENGTH_256:256,ENCRYPTION_APPCONFIG_FLAG:"appConfig_v1",SHARED_CLIENT_IDENTIFIER:"shared_client_identifier",MOBILE_FABRIC_SERVICE_DOC:"mobileFabricServiceDoc",AUTH_PROVIDER_TYPE_SAML:"saml",AUTH_PROVIDER_TYPE_OAUTH2:"oauth2",PERSISTED_AUTH_RESPONSE:"persistedAuthResponse",PERSIST_LOGIN_RESPONSE_FLAG:"persistLoginResponseFlag",CUSTOM_DATA_SAVE_HANDLE:"customDataSaveHandle",NO_POP_UP:"noPopup",LOGIN_OPTIONS:"loginOptions",URL_TYPE:"url_type",METADATA_MANAGER_FOR_LOGIN_IN_SAME_WINDOW_OBJECT:"metadata_manager_for_login_in_same_window_object",APP_VERIFIER_MW_STORE_ENDPOINT:"/ClientState",IS_ERROR:"isError",LOGIN_RESPONSE:"LOGIN_RESPONSE",SINGLE_WINDOW_LOGIN_BODY_PARAMS:"single_window_login_body_params",KEY_IS_SAME_WINDOW:"isSameWindow",KEY_METADATA_SDK_LOGIN_FOR_SAME_WINDOW:"key_metadata_sdk_login_for_same_window",KEY_APPCONFIG_FOR_SINGLE_WINDOW_LOGIN:"appConfigForSingleWindowLogin",OFFLINE_LOGIN_AUTH_RESPONSE:"authResponse",PASSTHROUGH_RESPONSE_HEADER:"X-Kony-Passthrough",SERVER_EVENTS_URL_ENDPOINT:"ServerEvents/Stream",SERVER_EVENTS_CLOSE_CONNECTION:"closeConnection",PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS:"persistedRefreshLoginProviderTokens",INTERNAL_REFRESH_TOKEN:"internalRefreshToken",BACKEND_REFRESH_TOKEN:"backendRefreshToken",ENABLE_REFRESH_LOGIN:"enable_refresh_login",BACKEND_REFRESH_TOKENS:"backend_refresh_tokens",RETAIN_BACKEND_REFRESH_TOKEN:"retain_backend_refresh_token",LOGIN_PROFILES:"profiles",LOGIN_PROVIDER_TYPE:"provider_type",INTEGRATION_SERVICE_KEY:"integsvc",INTEGRATION_INTERNAL_LOGOUT_URL:"_internal_logout",INTEGRATION_INTERNAL_CLEAR_SESSION_ENDPOINT:"clearSession",CLIENT_SDK_UUID:"clientUUID",CLIENT_SDK_UNIVERSAL_SALT:"sdkIdentifier",CUSTOM_QUERY_PARAMS_FOR_OAUTH:"customQueryParamsForOAuth",CUSTOM_OAUTH_PARAMS:"customOAuthParams",LOGOUT_OPTIONS:"logoutOptions"},void 0===kony.sdk&&(kony.sdk={}),void 0===kony.sdk.error&&(kony.sdk.error={}),kony.sdk.error.getAuthErrObj=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getAuthErrObj"),e&&e.httpresponse&&delete e.httpresponse,e&&e[kony.sdk.constants.MF_ERROR_MSG]&&(e.message=e[kony.sdk.constants.MF_ERROR_MSG],delete e.errmsg);try{var n=e[kony.sdk.constants.MF_CODE],o=e.message,t=e.details;return n?kony.sdk.error.getMFcodeErrObj(n,o,t,""):e}catch(n){return e}},kony.sdk.error.getNullClaimsTokenErrObj=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getNullClaimsTokenErrObj");var e={};return e.opstatus=kony.sdk.errorcodes.cliams_token_null,e.message=kony.sdk.errormessages.cliams_token_null,e.details={},e.mfcode="",e},kony.sdk.error.getIdentitySessionInactiveErrObj=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getIdentitySessionInactiveErrObj");var e={};return e.opstatus=kony.sdk.errorcodes.identity_session_inactive,e.message=kony.sdk.errormessages.identity_session_inactive,e.details={},e.mfcode="",e},kony.sdk.error.getNullRefreshTokenErrObj=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getNullRefreshTokenErrObj");var e={};return e.opstatus=kony.sdk.errorcodes.invalid_session_or_token_expiry,e.message=kony.sdk.errormessages.invalid_session_or_token_expiry,e.details={},e.mfcode="",e},kony.sdk.error.getIntegrationErrObj=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getIntegrationErrObj");try{var n=e[kony.sdk.constants.MF_CODE],o=e[kony.sdk.constants.MF_ERROR_MSG],t=e.mferrmsg,s=e[kony.sdk.constants.MF_SERVICE];s||(s=""),t||(t="");var r="";return r=s?"Integration Service Request Failed for "+s+":":"Integration Service Request Failed:",n?kony.sdk.error.getMFcodeErrObj(n,o,t,r):e}catch(n){return e}},kony.sdk.error.getLogicErrObj=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getLogicErrObj");try{var n=e[kony.sdk.constants.MF_CODE],o=e[kony.sdk.constants.MF_ERROR_MSG],t=e.mferrmsg,s=e[kony.sdk.constants.MF_SERVICE];s||(s=""),t||(t="");var r="";return r=s?"Logic Service Request Failed for "+s+":":"Logic Service Request Failed:",n?kony.sdk.error.getMFcodeErrObj(n,o,t,r):e}catch(n){return e}},kony.sdk.error.getMFcodeErrObj=function(e,n,o,t){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getMFcodeErrObj");var s={details:{}};return o&&(s.details=o),s.mfcode=e,"Auth-4"===e?(n||(n=kony.sdk.errormessages.invalid_user_credentials),s.opstatus=kony.sdk.errorcodes.invalid_user_credentials,s.message=t+n):"Auth-9"===e?(n||(n=kony.sdk.errormessages.invalid_app_credentials),s.opstatus=kony.sdk.errorcodes.invalid_app_credentials,s.message=t+n):"Auth-3"===e?(n||(n=kony.sdk.errormessages.invalid_user_app_credentials),s.opstatus=kony.sdk.errorcodes.invalid_user_app_credentials,s.message=t+n):"Auth-5"===e||"Auth-6"===e||"Gateway-31"===e||"Gateway-33"===e||"Gateway-35"===e||"Gateway-36"===e||"Auth-46"===e||"Auth-55"===e?(s.opstatus=kony.sdk.errorcodes.invalid_session_or_token_expiry,s.message=t+kony.sdk.errormessages.invalid_session_or_token_expiry):"Auth-7"===e||"Auth-27"===e?(n||(n=t+kony.sdk.errormessages.invalid_user_app_services),s.opstatus=kony.sdk.errorcodes.invalid_user_app_services,s.message=n):"Auth-128"===e?(s.message=kony.sdk.errormessages.invalid_pkce_params,s.opstatus=kony.sdk.errorcodes.invalid_pkce_params):"Auth-129"===e?(s.details.errmsg=kony.sdk.errormessages.CORS_disabled_at_identity,s.details.message=kony.sdk.errormessages.CORS_disabled_at_identity,s.message=kony.sdk.errormessages.CORS_disabled_at_identity,s.opstatus=kony.sdk.errorcodes.CORS_disabled_at_identity):(s.opstatus=kony.sdk.errorcodes.default_code,s.message=t+kony.sdk.errormessages.default_message),s},kony.sdk.error.getSingleWindowLoginErrObj=function(e,n){var o={};return o[kony.sdk.constants.KEY_CODE]=e,o[kony.sdk.constants.KEY_MESSAGE]=n,o},kony.sdk.error.getErrObj=function(e,n){var o={};return o[kony.sdk.constants.KEY_CODE]=e,o[kony.sdk.constants.KEY_MESSAGE]=n,o},kony.sdk.error.getObjectServiceErrObj=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getObjectServiceErrObj");try{var n=e[kony.sdk.constants.MF_CODE],o=e[kony.sdk.constants.MF_ERROR_MSG],t=e.mferrmsg,s=e[kony.sdk.constants.MF_SERVICE];s||(s=""),t||(t="");var r="";return r=s?"Object Service Request Failed for "+s+":":"Object Service Request Failed:",n?kony.sdk.error.getMFcodeErrObj(n,o,t,r):e}catch(n){return e}},kony.sdk.error.getClientErrObj=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getClientErrObj");var o=new Object;return o.opstatus=kony.sdk.errorcodes.clientvalidation_error_opstatus,o.errmsg=n,o.errcode=e,o},kony.sdk.error.getMessagingError=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getMessagingError");var n=new Object;return n.opstatus=kony.sdk.errorcodes.messaging_service_fail,n.errmsg=kony.sdk.errormessages.messaging_service_fail+e,n.errcode=kony.sdk.errorcodes.messaging_service_fail,n},kony.sdk.error.getConfigServiceErrObject=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getConfigServiceErrObject");try{var n=e[kony.sdk.constants.MF_CODE],o=e[kony.sdk.constants.MF_ERROR_MSG],t=e.mferrmsg,s=e[kony.sdk.constants.MF_SERVICE];s||(s=""),t||(t="");var r="";return r=s?"Configuration Service Request Failed for "+s+":":"Configuration Service Request Failed:",n?kony.sdk.error.getMFcodeErrObj(n,o,t,r):e}catch(n){return e}},kony.sdk.error.getIntegrityErrorMessage=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getIntegrityErrorMessage");var o={httpresponse:{}};return o[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.integrity_check_failed,o[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.integrity_check_failed,o[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.integrity_check_failed,o[kony.sdk.constants.HTTP_STATUS_CODE]=e.status.toString(),o.httpresponse.response=e.response,o.httpresponse.headers=e.getAllResponseHeaders(),o.httpresponse.url=n,o.httpresponse.responsecode=e.status.toString(),o},kony.sdk.error.getOperationFailedErrorMessage=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.error.getOperationFailedErrorMessage");var o={};o[kony.sdk.constants.MF_OPSTATUS]=e.response.opstatus,o[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.server_operation_failed,o[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.server_operation_failed,o[kony.sdk.constants.HTTP_STATUS_CODE]=e.status.toString();var t={};return t.response=e.response,t.headers=e.getAllResponseHeaders(),t.responsecode=e.status.toString(),t.url=n,o.httpResponse=t,o},void 0===kony.sdk&&(kony.sdk={}),void 0===kony.sdk.errorcodes&&(kony.sdk.errorcodes={}),void 0===kony.sdk.errormessages&&(kony.sdk.errormessages={}),kony.sdk.errorcodes.invalid_user_credentials=101,kony.sdk.errormessages.invalid_user_credentials="Invalid User Credentials.",kony.sdk.errorcodes.invalid_app_credentials=102,kony.sdk.errormessages.invalid_app_credentials="Invalid App Credentials.",kony.sdk.errorcodes.invalid_user_app_credentials=103,kony.sdk.errormessages.invalid_user_app_credentials="Invalid User/App Credentials.",kony.sdk.errorcodes.invalid_session_or_token_expiry=104,kony.sdk.errormessages.invalid_session_or_token_expiry="Session/Token got invalidated in the backend.Please login.",kony.sdk.errorcodes.invalid_user_app_services=105,kony.sdk.errormessages.invalid_user_app_services="Invalid provider in appServices.",kony.sdk.errorcodes.cliams_token_null=106,kony.sdk.errormessages.cliams_token_null="Claims Token is Unavialable",kony.sdk.errorcodes.identity_session_inactive=107,kony.sdk.errormessages.identity_session_inactive="Identity Provider's sessions is not active. Please login",kony.sdk.errorcodes.refresh_login_tokens_null_or_undefined=108,kony.sdk.errormessages.refresh_login_tokens_null_or_undefined="Required refresh tokens to enable refresh login are null or undefined",kony.sdk.errorcodes.app_verifier_save_failed=109,kony.sdk.errormessages.app_verifier_save_failed="Unable to store app verifier at middleware server",kony.sdk.errorcodes.app_verifier_retrieve_failed=110,kony.sdk.errormessages.app_verifier_retrieve_failed="Unable to retrieve app verifier from middleware server",kony.sdk.errorcodes.invalid_custom_data_save_handle=111,kony.sdk.errormessages.invalid_custom_data_save_handle="CustomDataSaveHandle should be function and should accept successCallback and failureCallback",kony.sdk.errorcodes.custom_data_save_handle_failed=112,kony.sdk.errormessages.custom_data_save_handle_failed="CustomDataSaveHandle failed by user",kony.sdk.errorcodes.partial_login_error=113,kony.sdk.errormessages.partial_login_error="The application was launched with code query param but is not a continued login process",kony.sdk.errorcodes.CORS_disabled_at_identity=114,kony.sdk.errormessages.CORS_disabled_at_identity="Login Failed. PKCE parameters are missing, please check if CORS setting is properly configured in Fabric Identity",kony.sdk.errorcodes.invalid_pkce_params=115,kony.sdk.errormessages.invalid_pkce_params="Invalid PKCE params",kony.sdk.errorcodes.invalid_appconfig=116,kony.sdk.errormessages.invalid_appconfig="Appconfig is null or undefined.",kony.sdk.errorcodes.error_no_metadata_found=117,kony.sdk.errormessages.error_no_metadata_found="No metadata was found to continue with single window login",kony.sdk.errorcodes.invalid_auth_code=118,kony.sdk.errormessages.invalid_auth_code="No Auth Code found in the Url.",kony.sdk.errorcodes.pkce_params_generation_failed=119,kony.sdk.errormessages.pkce_params_generation_failed="Login Failed. Error occured while generating PKCE parameters.",kony.sdk.errorcodes.default_code=100,kony.sdk.errormessages.default_message="UnhandledMFcode",kony.sdk.errorcodes.unknown_error_code=1e3,kony.sdk.errormessages.unknown_error_message="An unknown error has occured",kony.sdk.errorcodes.connectivity_error_code=1011,kony.sdk.errormessages.connectivity_error_message="An error occurred while making the request. Please check device connectivity, server url and request parameters",kony.sdk.errorcodes.invalid_json_code=1013,kony.sdk.errormessages.invalid_json_message="Invalid Json response was returned",kony.sdk.errorcodes.request_timed_out_code=1014,kony.sdk.errormessages.request_timed_out_message="Request to server has timed out",kony.sdk.errorcodes.offline_auth_failed=1015,kony.sdk.errormessages.offline_auth_failed="Offline Authentication failed, User should atleast login once when network connectivity is available.",kony.sdk.errorcodes.servicedoc_unavailable=1016,kony.sdk.errormessages.servicedoc_unavailable="MBAAS app is not initialized properly. Service document is unavailable.",kony.sdk.errorcodes.transient_login_fail=1017,kony.sdk.errormessages.transient_login_fail="Transient Login failed, Previous Identity Token expired in backend.",kony.sdk.errorcodes.messaging_service_fail=1018,kony.sdk.errormessages.messaging_service_fail="Failure in Messaging Service. ",kony.sdk.errorcodes.integrity_check_failed=1019,kony.sdk.errormessages.integrity_check_failed="Http message Body Integrity Check failed.",kony.sdk.errorcodes.invalid_security_key=1023,kony.sdk.errormessages.invalid_security_key="Security key should be a non empty string.",kony.sdk.errorcodes.server_operation_failed=1020,kony.sdk.errormessages.server_operation_failed="Operation Failed on server",kony.sdk.errorcodes.populating_template_failed=1021,kony.sdk.errormessages.populating_template_failed="Template population failed, template parameters are invalid or template is malformed",kony.sdk.errorcodes.service_unavailable=1022,kony.sdk.errormessages.service_unavailable_message="Service unavailable or cannot connect to host",kony.sdk.errorcodes.connection_timeout=1023,kony.sdk.errormessages.connection_timeout_message="Network call failed due to connection timeout",kony.sdk.errorcodes.clientvalidation_error_opstatus=112233,kony.sdk.errorcodes.invalid_api=7e3,kony.sdk.errormessages.invalid_api="Invalid Operation name, Operation Failed.",kony.sdk.errorcodes.invalid_dataobject_instance=90001,kony.sdk.errormessages.invalid_dataobject_instance="Provided dataobject is invalid and should be instance of kony.sdk.dto.DataObject",kony.sdk.errorcodes.primarykey_unavailable=90002,kony.sdk.errormessages.primarykey_unavailable="Primary Keys missing, Operation Failed",kony.sdk.errorcodes.null_or_undefined=90003,kony.sdk.errormessages.null_or_undefined=" cannot be null or undefined",kony.sdk.errorcodes.transaction_failed=90004,kony.sdk.errormessages.transaction_failed="Some error occurred, Operation Failed",kony.sdk.errorcodes.norecords_to_delete=90005,kony.sdk.errormessages.norecords_to_delete="No records deleted with the specified criteria",kony.sdk.errorcodes.invalid_queryparams_instance=90006,kony.sdk.errormessages.invalid_queryparams_instance="Provided queryParams is invalid and should be a json object",kony.sdk.errorcodes.invalid_params_instance=90007,kony.sdk.errormessages.invalid_params_instance="Provided params are invalid",kony.sdk.errorcodes.invalid_object=90008,kony.sdk.errormessages.invalid_object="Invalid object name, Operation Failed.",kony.sdk.errorcodes.invalid_blob=90009,kony.sdk.errormessages.invalid_blob="Failed to read from binary file, either the file does not exist or invalid",kony.sdk.errorConstants={INIT_FAILURE:"INIT_FAILURE",DATA_STORE_EXCEPTION:"DATASTORE_FAILURE",AUTH_FAILURE:"AUTH_FAILURE",INTEGRATION_FAILURE:"INTEGRATION_FAILURE",MESSAGING_FAILURE:"MESSAGING_FAILURE",SYNC_FAILURE:"SYNC_FAILURE",METRICS_FAILURE:"METRICS_FAILURE",MISC_FAILURE:"MISCELLANEOUS_FAILURE",OBJECT_FAILURE:"OBJECT_FAILURE",LOGIC_SERVICE_FAILURE:"LOGIC_SERVICE_FAILURE",SYNC_V2_FAILURE:"SYNC_V2_FAILURE",CONFIGURATION_URL_FAILURE:"CONFIGURATION_URL_FAILURE",CONFIGURATION_FAILURE:"CONFIGURATION_FAILURE",INTEGRITY_FAILURE:"INTEGRITY_FAILURE",INVALID_API_FAILURE:"INVALID_API_FAILURE"},kony.sdk.offline=kony.sdk.offline||{},kony.sdk.sso=kony.sdk.sso||{},kony.sdk.pkceUtilityInstance=null,kony.sdk.isSSOLoginSuccess=kony.sdk.isSSOLoginSuccess||!0,kony.sdk.customOAuthParmsForClaimsAndBackendTokenRefresh={},kony.sdk.performNoPopUpLogin=function(e,n){var o=kony.sdk.util.getMetaDataManagerForLoginInSameWindow();o.initialize(),o.loadSavedMetaData();var t=o.getItem(kony.sdk.constants.KEY_APPCONFIG_FOR_SINGLE_WINDOW_LOGIN),s=window.location.href.split("?")[1],r=null;if(!kony.sdk.isNullOrUndefined(s)&&-1!==s.indexOf(kony.sdk.constants.DEEPLINK_VALID_PARAM+kony.sdk.constants.EQUAL_TO))for(var i=s.split("&"),k=0;k<i.length;k++){var a=i[k].split(kony.sdk.constants.EQUAL_TO);if(a[0]===kony.sdk.constants.DEEPLINK_VALID_PARAM){r=a[1];break}}if(kony.application.removeQueryParamsByKey(kony.sdk.constants.DEEPLINK_VALID_PARAM),!kony.sdk.isNullOrUndefined(t)&&kony.sdk.isJson(t))if(appConfig=JSON.parse(t),(new kony.sdk).initWithServiceDoc(appConfig.appKey,appConfig.appSecret,appConfig.svcDoc),kony.sdk.isNullOrUndefined(r)){kony.sdk.logsdk.error("kony.sdk.performNoPopUpLogin: No Auth Code found in Url.");var d=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.invalid_auth_code,kony.sdk.errormessages.invalid_auth_code);o.destroy(),kony.sdk.verifyAndCallClosure(n,d)}else kony.sdk.logsdk.info("kony.sdk.performNoPopUpLogin: Auth Code found in url, completing single window login."),kony.sdk.completeSingleWindowLogin(r,(function(o){kony.sdk.isNullOrUndefined(o)?(kony.sdk.logsdk.error("kony.sdk.performNoPopUpLogin: Single window login failed."),kony.sdk.verifyAndCallClosure(n)):o.isError?(kony.sdk.logsdk.error("kony.sdk.performNoPopUpLogin: Single window login failed with error : "+JSON.stringify(o)),kony.sdk.verifyAndCallClosure(n,o[kony.sdk.constants.LOGIN_RESPONSE])):(kony.sdk.logsdk.info("kony.sdk.performNoPopUpLogin: Single window login completed successfully."),kony.sdk.verifyAndCallClosure(e,o[kony.sdk.constants.LOGIN_RESPONSE]))}));else if(kony.sdk.isNullOrUndefined(r))o.destroy();else{kony.sdk.logsdk.error("kony.sdk.performNoPopUpLogin: No metadata found.");d=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.invalid_appconfig,kony.sdk.errormessages.invalid_appconfig);o.destroy(),kony.sdk.verifyAndCallClosure(n,d)}},kony.sdk.completeSingleWindowLogin=function(e,n){if(kony.sdk.logsdk.info("Entering completeSingleWindowLogin"),kony.application.removeQueryParamsByKey(kony.sdk.constants.DEEPLINK_VALID_PARAM),kony.sdk.isNullOrUndefined(e))return kony.sdk.logsdk.info("code is undefined"),n();var o={},t=null,s=kony.sdk.util.getMetaDataManagerForLoginInSameWindow();function r(n){kony.sdk.logsdk.info("Entering performTokenCall"),!0!==is_enable_identity_pkce||kony.sdk.isNullOrUndefined(n[kony.sdk.constants.APP_VERIFIER])||(o[kony.sdk.constants.APP_VERIFIER]=n[kony.sdk.constants.APP_VERIFIER]),o[kony.sdk.constants.DEEPLINK_VALID_PARAM]=e,delete t[kony.sdk.constants.NO_POP_UP];var r={};r[kony.sdk.constants.LOGIN_OPTIONS]=t,r[kony.sdk.constants.SINGLE_WINDOW_LOGIN_BODY_PARAMS]=o;var a=s.getItem(kony.sdk.constants.KEY_PROVIDER);kony.sdk.getDefaultInstance().getIdentityService(a).login(r,i,k)}function i(e){var o={};o[kony.sdk.constants.IS_ERROR]=!1,o[kony.sdk.constants.LOGIN_RESPONSE]=e,kony.sdk.logsdk.info("Exiting completeSingleWindowLogin with success"),kony.sdk.verifyAndCallClosure(n,o)}function k(e){var o={};o[kony.sdk.constants.IS_ERROR]=!0,o[kony.sdk.constants.LOGIN_RESPONSE]=e,s.destroy(),kony.sdk.logsdk.info("Exiting completeSingleWindowLogin with failure"),kony.sdk.verifyAndCallClosure(n,o)}if(s.initialize(),s.loadSavedMetaData(),t=s.getItem(kony.sdk.constants.LOGIN_OPTIONS),is_enable_identity_pkce=s.getItem(kony.sdk.constants.ENABLE_IDENTITY_PKCE),kony.sdk.isNullOrUndefined(t)){kony.sdk.logsdk.error(kony.sdk.errormessages.partial_login_error);var a=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.partial_login_error,kony.sdk.errormessages.partial_login_error);kony.sdk.verifyAndCallClosure(k,a)}else!0===is_enable_identity_pkce?s.retrieveAppVerifier(r,k):r({})},kony.sdk.prototype.getIdentityService=function(e){if(kony.sdk.logsdk.perf("Executing kony.sdk.prototype.getIdentityService"),!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Identity service.");var n=null;if(!e)throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Invalid providerName");if(null!=this.login){for(var o=0;o<this.login.length;o++){var t=this.login[o];if(t.alias&&t.alias.toUpperCase()===e.toUpperCase()||t.prov.toUpperCase()===e.toUpperCase()){n=new IdentityService(this,t);break}}if(null===n)throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Invalid providerName");return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getIdentityService"),kony.sdk.logsdk.debug("### auth:: returning authService for providerName = "+n.getProviderName()),n}},kony.sdk.prototype.getLogicService=function(e){if(kony.sdk.logsdk.perf("Executing kony.sdk.prototype.getLogicService"),!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Logic service - "+e);if(null!=this.logicsvc&&null!=this.logicsvc[e])return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getLogicService"),kony.sdk.logsdk.debug("### getLogicService::found Logic service"+this.logicsvc[e]),new kony.sdk.LogicService(this,e);throw new Exception(kony.sdk.errorConstants.LOGIC_SERVICE_FAILURE,"Invalid serviceName:"+e)},kony.sdk.LogicService=function(e,n){this.konyRef=e,this.serviceName=n,this.logicServiceUrl=null,this.getLogicServiceUrl=function(){return null==this.logicServiceUrl&&(this.logicServiceUrl=stripTrailingCharacter(e.logicsvc[n],"/")),this.logicServiceUrl},kony.sdk.logsdk.info(" ###LogicService Created & LogicService Url = "+this.getLogicServiceUrl());var o=new konyNetworkProvider;function t(n,s,r,i,k,a,d,l,c){var y={};kony.sdk.logsdk.trace("Executing _invokeOperation servicePath: "+n+", methodType: "+r+", path"+s+", isRetryNeeded: "+a);var u=kony.sdk.getPayload(e),g=kony.ds.read(kony.sdk.constants.KONYUUID);for(var f in g&&(u.rsid=g[0]),u.rsid||kony.sdk.logsdk.warn("rsid is either empty,null or undefined"),kony.sdk.metric&&(0===kony.sdk.metric.reportEventBufferBackupArray.length&&kony.sdk.metric.readFromDS(),kony.sdk.metric.pushEventsToBufferArray(),y.events=kony.sdk.metric.reportEventBufferBackupArray),k)y[f]=k[f];u.svcid=n,y[kony.sdk.constants.REPORTING_PARAMS]=JSON.stringify(u);var p=kony.sdk.getDefaultHeaders();if(p[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,p[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=e.currentClaimToken,"object"==typeof svcObj&&svcObj.version&&(p[kony.sdk.constants.API_VERSION_HEADER]=svcObj.version),i)for(var E in i)p[E]=i[E];function v(e){kony.sdk.metric&&kony.sdk.metric.clearBufferEvents(),kony.sdk.logsdk.perf("Executing Finished network operation for methodType : "+r),kony.sdk.logsdk.trace("Executing Finished _invokeOperation servicePath: "+n+", methodType: "+r+", path"+s+", isRetryNeeded: "+a),kony.sdk.verifyAndCallClosure(d,e)}function O(e,o,y){!0!==a||!0!==function(e){if(e[kony.sdk.constants.MF_CODE]);else if(e[kony.sdk.constants.HTTP_STATUS_CODE]&&401===e[kony.sdk.constants.HTTP_STATUS_CODE])return!0}(e)?(kony.sdk.logsdk.perf("Executing Finished network operation for methodType : "+r),kony.sdk.logsdk.trace("Executing Finished _invokeOperation servicePath: "+n+", methodType: "+r+", path"+s+", isRetryNeeded: "+a),kony.sdk.processLogicErrorResponse(e,!0,l)):function(e,n,o,s,r,i,k,a){kony.sdk.claimsAndProviderTokenRefresh((function(){t(e,n,o,s,r,!1,i,k,a)}),k)}(n,s,r,i,k,d,l,c)}switch(kony.sdk.logsdk.perf("Executing network operation for methodType : "+r),r){case"GET":o.get(e.logicsvc[n]+s,y,p,v,O,null,c);break;case"PUT":o.put(e.logicsvc[n]+s,y,p,v,O,null,c);break;case"DELETE":o.invokeDeleteRequest(e.logicsvc[n]+s,y,p,v,O,null,c);break;default:o.post(e.logicsvc[n]+s,y,p,v,O,null,c)}}this.invokeOperation=function(e,n,o,s,r,i,k,a){kony.sdk.claimsRefresh((function(){t(e,n,o,s,r,!0,i,k,a)}),k)},kony.sdk.processLogicErrorResponse=function(e,n,o){if(kony.sdk.metric&&kony.sdk.metric.errorCodeMap[e.opstatus]&&kony.sdk.metric.saveInDS(),e[kony.sdk.constants.MF_CODE]){kony.sdk.getCurrentInstance();kony.sdk.isSessionOrTokenExpired(e[kony.sdk.constants.MF_CODE])&&kony.sdk.logsdk.warn("###LogicService::invokeOperationFailure  Session/Token expired. Authenticate and Try again")}if(!n)return kony.sdk.error.getLogicErrObj(e);o&&kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getLogicErrObj(e))}},kony.sdk.prototype.registerObjectService=function(e,n){kony.sdk.logsdk.trace("Entering kony.sdk.prototype.registerObjectService"),kony.sdk.registeredobjsvcs=kony.sdk.registeredobjsvcs||{},kony.sdk.registeredobjsvcs[e]=n},kony.sdk.prototype.getObjectService=function(e,n){if(kony.sdk.logsdk.perf("Executing kony.sdk.prototype.getObjectService"),!kony.sdk.isInitialized)throw kony.sdk.logsdk.perf("Executing finished kony.sdk.prototype.getObjectService with an exception"),new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Object service - "+e);var o;if(kony.sdk.isNullOrUndefined(n)||(o=n.access),null!=this.objectsvc&&null!=this.objectsvc[e]){if(kony.sdk.logsdk.debug("### getObjectService::found Object service"+this.objectsvc[e]),kony.sdk.util.isNullOrEmptyString(o)||"online"===o.toLowerCase())return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getObjectService"),new kony.sdk.OnlineObjectService(this,e,this.objectsvc[e]);if("offline"===o.toLowerCase())return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getObjectService"),new kony.sdk.OfflineObjectService(this,e)}else if(null!=this.offlineObjectsvc&&null!=this.offlineObjectsvc[e]){if(kony.sdk.util.isNullOrEmptyString(o)||"online"===o.toLowerCase())return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getObjectService"),new kony.sdk.OnlineObjectService(this,e,this.offlineObjectsvc[e]);if("offline"===o.toLowerCase())return kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getObjectService"),new kony.sdk.OfflineEnabledObjectService(this,e)}if(kony.sdk.registeredobjsvcs=kony.sdk.registeredobjsvcs||{},kony.sdk.logsdk.perf("Executing Finished kony.sdk.prototype.getObjectService"),null!=kony.sdk.registeredobjsvcs[o]&&null!=kony.sdk.registeredobjsvcs[o])return new kony.sdk.registeredobjsvcs[o](this,e);throw new Exception(kony.sdk.errorConstants.OBJECT_FAILURE,"Invalid serviceName:"+e+"or access type:"+o)},kony.sdk.OnlineObjectService=function(e,n,o){kony.sdk.logsdk.perf("Executing kony.sdk.OnlineObjectService"),this.konyRef=e,this.serviceName=n,this.serviceInfo=o,this.dataUrl=null,this.binaryUrl=null,this.fileStorageObjectServiceUrl=null,this.operationsUrl=null,this.metadataUrl=null,this.version=null;var t=this;this.create=function(e,n,o){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.create"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject){null!=e.queryParams&&null!=e.queryParams&&(e.queryParams instanceof Object||kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance)));var s=this.getDataUrl(),r=e.dataObject.objectName;kony.sdk.skipAnonymousCall?i():kony.sdk.claimsRefresh(i,o)}else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function i(){t.getMetadataOfObject(r,{},(function(r){!function(e,n,o,s){var r=e.dataObject,i=e.headers,k=n+"/"+r.objectName,a=r.getRecord(),d=e.queryParams;if(null==a||null==a)return void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"record "+kony.sdk.errormessages.null_or_undefined));i=kony.sdk.addDefaultHeaders(i);var l=!1;if(null!=i){for(var c in i)null!==c&&"undefined"!==c&&c.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(l=!0);l||(i[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}var y=new kony.sdk.getFormData(a);null!=d&&null!=d&&kony.sdk.updateFormData(y,"queryparams",d);function u(e){kony.sdk.logsdk.debug("### OnlineObjectService::_create::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(o,e)}function g(e){kony.sdk.logsdk.error("### OnlineObjectService::_create::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(s,e)}invokeObjectOperation(k,r.objectName,i,y,null,u,g,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,s,n,o)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::create Error:",e),kony.sdk.verifyAndCallClosure(o,e)}))}},this.fetch=function(e,n,o){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.fetch"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject){null!=e.queryParams&&null!=e.queryParams&&(e.queryParams instanceof Object||kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance)));var s=this.getDataUrl(),r=e.dataObject.objectName;kony.sdk.skipAnonymousCall?i():kony.sdk.claimsRefresh(i,o)}else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function i(){t.getMetadataOfObject(r,{},(function(r){!function(e,n,o,s){var r=e.dataObject,i=r.getOdataUrl(),k=e.headers,a=e.queryParams,d=n+"/"+r.objectName;null!=i&&null!=i?(d=d+"?"+encodeURI(i),null!=a&&null!=a&&(d=d+"&"+kony.sdk.util.objectToQueryParams(a))):null!=a&&null!=a&&(d=d+"?"+kony.sdk.util.objectToQueryParams(a));k=kony.sdk.addDefaultHeaders(k);var l=!1;if(null!=k){for(var c in k)null!==c&&"undefined"!==c&&c.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(l=!0);l||(k[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}if(e&&e.useCache&&e.cacheID){var y=(new kony.sdk.ClientCache).get(e.cacheID);if(y)return kony.sdk.logsdk.debug("### OnlineObjectService::_fetch:: key found in cache, invokeSuccessCallback Response:",y),void kony.sdk.verifyAndCallClosure(o,y)}function u(n){kony.sdk.logsdk.debug("### OnlineObjectService::_fetch::invokeSuccessCallback Response:",n),e&&e.useCache&&cacheResponseForKey(e,d,{objectName:r.objectName},n),kony.sdk.verifyAndCallClosure(o,n)}function g(e){kony.sdk.logsdk.error("### OnlineObjectService::_fetch::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(s,e)}invokeObjectOperation(d,r.objectName,k,null,kony.sdk.constants.HTTP_METHOD_GET,u,g,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,s,n,o)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::fetch Error:",e),kony.sdk.verifyAndCallClosure(o,e)}))}},this.update=function(e,n,o){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.update"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var s=this.getDataUrl(),r=e.dataObject.objectName;kony.sdk.skipAnonymousCall?i():kony.sdk.claimsRefresh(i,o)}else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function i(){t.getMetadataOfObject(r,{},(function(r){!function(e,n,o,s){var r=e.dataObject,i=e.headers,k=n+"/"+r.objectName,a=e.queryParams;i=kony.sdk.addDefaultHeaders(i);var d=!1;if(null!=i){for(var l in i)null!==l&&"undefined"!==l&&l.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(d=!0);d||(i[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}i["X-HTTP-Method-Override"]="PUT";var c=new kony.sdk.getFormData(r.getRecord());null!=a&&null!=a&&kony.sdk.updateFormData(c,"queryparams",a);function y(e){kony.sdk.logsdk.debug("### OnlineObjectService::_update::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(o,e)}function u(e){kony.sdk.logsdk.error("### OnlineObjectService::_update::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(s,e)}invokeObjectOperation(k,r.objectName,i,c,null,y,u,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,s,n,o)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::update Error:",e),kony.sdk.verifyAndCallClosure(o,e)}))}},this.partialUpdate=function(e,n,o){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.partialUpdate"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var s=this.getDataUrl(),r=e.dataObject.objectName;kony.sdk.skipAnonymousCall?i():kony.sdk.claimsRefresh(i,o)}else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function i(){t.getMetadataOfObject(r,{},(function(r){!function(e,n,o,s){var r=e.dataObject,i=e.headers,k=n+"/"+r.objectName,a=e.queryParams;(i=kony.sdk.addDefaultHeaders(i))["X-HTTP-Method-Override"]="PATCH";var d=!1;if(null!=i){for(var l in i)null!==l&&"undefined"!==l&&l.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(d=!0);d||(i[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}var c=new kony.sdk.getFormData(r.getRecord());null!=a&&null!=a&&kony.sdk.updateFormData(c,"queryparams",a);function y(e){kony.sdk.logsdk.debug("### OnlineObjectService::_partialUpdate::invokeSuccessCallback Success Response:",e),kony.sdk.verifyAndCallClosure(o,e)}function u(e){kony.sdk.logsdk.error("### OnlineObjectService::_partialUpdate::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(s,e)}invokeObjectOperation(k,r.objectName,i,c,null,y,u,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,s,n,o)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::partialUpdate Error:",e),kony.sdk.verifyAndCallClosure(o,e)}))}},this.deleteRecord=function(e,o,s){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.deleteRecord"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var r=this.getDataUrl(),i=e.dataObject.objectName;kony.sdk.skipAnonymousCall?k():kony.sdk.claimsRefresh(k,s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function k(){t.getMetadataOfObject(i,{},(function(i){!function(e,o,s,r){var i=e.dataObject,k=e.headers,a=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,i.objectName),d=o+"/"+i.objectName,l=e.queryParams,c="";if(null!=a.primaryKey&&null!=a.primaryKey)for(var y=a.primaryKey.length,u=0;u<y;u++){var g=a.primaryKey[u];if(null==i.getRecord()[g]||null==i.getRecord()[g])return kony.sdk.logsdk.error("### OnlineObjectService::_delete Error: Please provide all primary keys to process the request"),void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));c=0==u?"?$filter="+g+" eq '"+i.getRecord()[g]+"'":c+" and "+g+" eq '"+i.getRecord()[g]+"'"}d+=encodeURI(c),null!=l&&null!=l&&(d=c&&0!=c.length?d+"&"+kony.sdk.util.objectToQueryParams(l):d+"?"+kony.sdk.util.objectToQueryParams(l));k=kony.sdk.addDefaultHeaders(k);var f=!1;if(null!=k){for(var p in k)null!==p&&"undefined"!==p&&p.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(f=!0);f||(k[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}function E(e){kony.sdk.logsdk.debug("### OnlineObjectService::_delete::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(s,e)}function v(e){kony.sdk.logsdk.error("### OnlineObjectService::_delete::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(r,e)}k["X-HTTP-Method-Override"]="DELETE",invokeObjectOperation(d,i.objectName,k,null,kony.sdk.constants.HTTP_METHOD_GET,E,v,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,r,o,s)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::delete Error:",e),kony.sdk.verifyAndCallClosure(s,e)}))}},this.customVerb=function(e,n,o,s){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.customVerb"),null!=e&&null!=e)if(null!=n&&null!=n)if(n.dataObject instanceof kony.sdk.dto.DataObject)if(null==n.queryParams||null==n.queryParams||n.queryParams instanceof Object){var r=this.getOperationsUrl(),i=n.dataObject.objectName;kony.sdk.skipAnonymousCall?k():kony.sdk.claimsRefresh(k,s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"verbName"+kony.sdk.errormessages.null_or_undefined));function k(){t.getMetadataOfObject(i,{},(function(i){!function(e,n,o,s,r){var i=n.dataObject,k=n.headers,a=o+"/"+i.objectName+"/"+e,d=n.queryParams;k=kony.sdk.addDefaultHeaders(k);var l=!1;if(null!=k){for(var c in k)null!==c&&"undefined"!==c&&c.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(l=!0);l||(k[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}var y=new kony.sdk.getFormData(i.getRecord());null!=d&&null!=d&&kony.sdk.updateFormData(y,"queryparams",d);function u(e){kony.sdk.logsdk.debug("### OnlineObjectService::_customverb::invokeSuccessCallback Success Response:",e),kony.sdk.verifyAndCallClosure(s,e)}function g(e){kony.sdk.logsdk.error("### OnlineObjectService::_customverb::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(r,e)}invokeObjectOperation(a,i.objectName,k,y,null,u,g,kony.sdk.util.checkAndFetchNetworkProviderOptions(n))}(e,n,r,o,s)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::customverb Error:",e),kony.sdk.verifyAndCallClosure(s,e)}))}},this.getMetadataOfAllObjects=function(o,t,s){kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.getMetadataOfAllObjects"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,null,o,t,s),kony.sdk.logsdk.trace("Exiting kony.sdk.OnlineObjectService.getMetadataOfAllObjects")},this.getMetadataOfObject=function(o,t,s,r){kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.getMetadataOfObject"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,o,t,s,r),kony.sdk.logsdk.trace("Exiting kony.sdk.OnlineObjectService.getMetadataOfObject")},this.getDataUrl=function(){return kony.sdk.isNullOrUndefined(t.dataUrl)&&(t.dataUrl=encodeURI(stripTrailingCharacter(t.serviceInfo.url+"/objects/","/"))),t.dataUrl},this.getFileStorageObjectServiceUrl=function(){return kony.sdk.isNullOrUndefined(t.fileStorageObjectServiceUrl)&&(t.fileStorageObjectServiceUrl=encodeURI(stripTrailingCharacter(t.serviceInfo.url,"/"))),t.fileStorageObjectServiceUrl},this.getBinaryUrl=function(){return kony.sdk.isNullOrUndefined(t.binaryUrl)&&(t.binaryUrl=encodeURI(stripTrailingCharacter(t.serviceInfo.url+"/binary/","/"))),t.binaryUrl},this.getOperationsUrl=function(){return kony.sdk.isNullOrUndefined(t.operationsUrl)&&(t.operationsUrl=encodeURI(stripTrailingCharacter(t.serviceInfo.url+"/operations/","/"))),t.operationsUrl},this.getMetadataUrl=function(){return kony.sdk.isNullOrUndefined(t.metadataUrl)&&(t.metadataUrl=encodeURI(stripTrailingCharacter(t.serviceInfo.metadata_url,"/"))),t.metadataUrl},this.getVersion=function(){return kony.sdk.isNullOrUndefined(t.version)&&(t.version=t.serviceInfo.version),t.version},this.uploadBinaryData=function(e,n,o,s,r){var i=null,k=null,a=null,d=null,l=null;if(kony.sdk.isNullOrUndefined(n)||"function"!=typeof n?kony.sdk.logsdk.warn("### OnlineObjectService::uploadBinaryData onFileUploadStartedCallback is null or undefined or not a function"):i=n,kony.sdk.isNullOrUndefined(o)||"function"!=typeof o?kony.sdk.logsdk.warn("### OnlineObjectService::uploadBinaryData onChunkUploadCompletedCallback is null or undefined or not a function"):k=o,kony.sdk.isNullOrUndefined(s)||"function"!=typeof s?kony.sdk.logsdk.warn("### OnlineObjectService::uploadBinaryData onFileUploadCompletedCallback is null or undefined or not a function"):a=s,kony.sdk.isNullOrUndefined(r)||"function"!=typeof r?kony.sdk.logsdk.warn("### OnlineObjectService::uploadBinaryData onFileUploadFailureCallback is null or undefined or not a function"):d=r,kony.sdk.isNullOrUndefined(e))return kony.sdk.logsdk.error("### OnlineObjectService::uploadBinaryData options is null or undefined"),void kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options "+kony.sdk.errormessages.null_or_undefined));var c=e.dataObject;if(kony.sdk.isNullOrUndefined(c))kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else if(c instanceof kony.sdk.dto.DataObject){var y=c.getObjectName(),u=this.getDataUrl()+"/"+y;if(kony.sdk.isNullOrUndefined(c.getRecord()))return kony.sdk.logsdk.error("### OnlineObjectService::uploadBinaryData Error: Please provide record to upload Binary content."),void kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));l=c.getRecord();var g=kony.sdk.binary.validateUploadParams(l);if(g)kony.sdk.verifyAndCallClosure(d,g);else{if(!kony.sdk.isNullOrUndefined(l[kony.sdk.constants.RAW_BYTES])){var f=kony.convertToBase64(l[kony.sdk.constants.RAW_BYTES]);l[kony.sdk.constants.RAW_BYTES]=f}kony.sdk.skipAnonymousCall?p():kony.sdk.claimsRefresh(p,d)}}else kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));function p(){t.getMetadataOfObject(y,{},(function(e){!function(e,n,o,t,s,r){var i={};n&&(n[kony.sdk.constants.FILE_PATH]?(i[kony.sdk.constants.FILE_PATH]=n[kony.sdk.constants.FILE_PATH],delete n[kony.sdk.constants.FILE_PATH]):n[kony.sdk.constants.RAW_BYTES]?(i[kony.sdk.constants.RAW_BYTES]=n[kony.sdk.constants.RAW_BYTES],delete n[kony.sdk.constants.RAW_BYTES]):n[kony.sdk.constants.FILE_OBJECT]&&(i[kony.sdk.constants.FILE_OBJECT]=n[kony.sdk.constants.FILE_OBJECT],delete n[kony.sdk.constants.FILE_OBJECT]),i.uploadParams=n);var k=kony.sdk.getDefaultHeaders();kony.sdk.skipAnonymousCall||(k[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=kony.sdk.getCurrentInstance().currentClaimToken);i.headers=k,i.URL=e,kony.sdk.binary.uploadBinaryData(i,o,t,s,r)}(u,l,i,k,a,d)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::uploadBinaryData Error:",e),kony.sdk.verifyAndCallClosure(d,e)}))}},this.getBinaryData=function(e,o,s,r,i,k){var a=!0,d=null,l=null,c=null,y=null,u=null;if(kony.sdk.isNullOrUndefined(k)?(kony.sdk.isNullOrUndefined(o)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData fileDownloadStartedCallback is null or undefined"):"function"==typeof o?d=o:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for fileDownloadStartedCallback"),kony.sdk.isNullOrUndefined(s)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData chunkDownloadCompletedCallback is null or undefined"):"function"==typeof s?l=s:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for chunkDownloadCompletedCallback"),kony.sdk.isNullOrUndefined(r)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData fileDownloadCompletedCallback is null or undefined"):"function"==typeof r?c=r:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for fileDownloadCompletedCallback"),kony.sdk.isNullOrUndefined(i)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData downloadFailureCallback is null or undefined"):"function"==typeof i?y=i:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for downloadFailureCallback")):(u=o,a=!1,kony.sdk.isNullOrUndefined(s)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData fileDownloadStartedCallback is null or undefined"):"function"==typeof s?d=s:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for fileDownloadStartedCallback"),kony.sdk.isNullOrUndefined(r)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData chunkDownloadCompletedCallback is null or undefined"):"function"==typeof r?l=r:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for chunkDownloadCompletedCallback"),kony.sdk.isNullOrUndefined(i)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData fileDownloadCompletedCallback is null or undefined"):"function"==typeof i?c=i:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for fileDownloadCompletedCallback"),kony.sdk.isNullOrUndefined(k)?kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData downloadFailureCallback is null or undefined"):"function"==typeof k?y=k:kony.sdk.logsdk.warn("### OnlineObjectService::getBinaryData invalid param provided for downloadFailureCallback")),kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE||kony.sdk.getAType()===kony.sdk.constants.SDK_ATYPE_NATIVE)if(kony.sdk.isNullOrUndefined(e))kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));else{var g=null;g=a?this.getDataUrl():this.getBinaryUrl();var f=e.dataObject;if(f instanceof kony.sdk.dto.DataObject)if(kony.sdk.isNullOrUndefined(e.queryParams)||e.queryParams instanceof Object){var p=f.getObjectName(),E=!1;if(kony.sdk.isNullOrUndefined(e.streaming)||!0!==e.streaming||(E=!0),!a){if(kony.sdk.isNullOrUndefined(u)||"string"!=typeof u)return kony.sdk.logsdk.error("### OnlineObjectService::getBinaryData Error: Please provide column name to fetch binary content"),void kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj("90000","Please provide column name to fetch binary content"));e.binaryAttrName=u}if(kony.sdk.isNullOrUndefined(f.getRecord()))return kony.sdk.logsdk.error("### OnlineObjectService::_getBinaryData Error: Please provide primary key details or fileParams to get Binary content."),void kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));kony.sdk.skipAnonymousCall?v():kony.sdk.claimsRefresh(v,y)}else kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance))}else kony.sdk.verifyAndCallClosure(y,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_api,kony.sdk.errormessages.invalid_api+"platform :"+kony.sdk.getSdkType().toString()));function v(){t.getMetadataOfObject(p,{},(function(o){!function(e,o,s,r,i,k,a,d){var l=e.dataObject,c=e.headers,y=e.binaryAttrName,u=l.getObjectName(),g=e.queryParams,f=o+"/"+u,p=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,u);if(!s){if(kony.sdk.isNullOrUndefined(p.primaryKey))return void kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(0==p.primaryKey.length)return void kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));var E=p.primaryKey[0];if(kony.sdk.isNullOrUndefined(l.getRecord()[E]))return kony.sdk.logsdk.error("### OnlineObjectService::_getBinaryData Error: Please provide primary key details to get Binary content."),void kony.sdk.verifyAndCallClosure(d,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));f=f+"?"+E+"="+l.getRecord()[E],kony.sdk.isNullOrUndefined(y)||(f=f+"&fieldName="+y),f+="&type=bytes",kony.sdk.isNullOrUndefined(g)||(f=f+"&"+kony.sdk.util.objectToQueryParams(g))}c=kony.sdk.addDefaultHeaders(c);var v=!1;if(null!=c){for(var O in c)kony.sdk.isNullOrUndefined(O)||O.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(v=!0,c[kony.sdk.constants.API_VERSION_HEADER]=c[O]);v||(c[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion()),c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON}function h(n){kony.sdk.logsdk.debug("### OnlineObjectService::_getBinaryData::invokeSuccessCallback Response:",n);var o=n.records[0];o.httpStatusCode=n.httpStatusCode,e&&e.ChunkSize&&(o.ChunkSize=e.ChunkSize);var t=l.getRecord();kony.sdk.isNullOrUndefined(t.fileId)&&(t.fileId=(new Date).getTime().toString()),kony.sdk.binary.getBinaryData(t,r,o,i,k,a,d)}function _(e){kony.sdk.logsdk.error("### OnlineObjectService::_getBinaryData::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(d,e)}if(s)invokeObjectOperation(f,l.getObjectName(),c,null,kony.sdk.constants.HTTP_METHOD_GET,h,_,kony.sdk.util.checkAndFetchNetworkProviderOptions(e));else{var m=l.getRecord();kony.sdk.isNullOrUndefined(m.fileId)&&(m.fileId=l.getRecord()[E]),kony.sdk.skipAnonymousCall||(c[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=kony.sdk.getCurrentInstance().currentClaimToken);var S={};S.endpointUrl=f,S.headers=c,S.method=kony.sdk.constants.HTTP_METHOD_GET,S.httpStatusCode=kony.sdk.binary.constants.VALID_HTTP_REDIRECT_CODE,e&&e.ChunkSize&&(S.ChunkSize=e.ChunkSize),kony.sdk.binary.getBinaryData(m,r,S,i,k,a,d)}}(e,g,a,E,d,l,c,y)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::getBinaryData Error:",e),kony.sdk.verifyAndCallClosure(y,e)}))}},this.getBinaryContent=function(e,o,s){if(kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.getBinaryContent"),null!=e&&null!=e){var r=this.getBinaryUrl(),i=e.dataObject;if(i instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var k=i.getObjectName(),a=e.binaryAttrName;if(null==a||null==a)return kony.sdk.logsdk.error("### OnlineObjectService::getBinaryContent Error: Please provide column name to fetch binary content"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj("90000","Please provide column name to fetch binary content"));kony.sdk.skipAnonymousCall?d():kony.sdk.claimsRefresh(d,s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance))}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function d(){t.getMetadataOfObject(k,{},(function(i){!function(e,o,s,r){var i=e.dataObject,k=e.headers,a=e.binaryAttrName,d=i.getObjectName(),l=e.queryParams,c=o+"/"+d,y=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,d);if(null==y.primaryKey||null==y.primaryKey)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(0==y.primaryKey.length)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));var u=y.primaryKey[0];if(null==i.getRecord()[u]||null==i.getRecord()[u])return kony.sdk.logsdk.error("### OnlineObjectService::_getBinaryContent Error: Please provide primary key details to get Binary content."),void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));c=c+"?"+u+"="+i.getRecord()[u],null!=a&&null!=a&&(c=c+"&fieldName="+a),null!=l&&null!=l&&(c=c+"&"+kony.sdk.util.objectToQueryParams(l));k=kony.sdk.addDefaultHeaders(k);var g=!1;if(null!=k){for(var f in k)null!==f&&"undefined"!==f&&f.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(g=!0);g||(k[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}function p(e){kony.sdk.logsdk.debug("### OnlineObjectService::_getBinaryContent::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(s,e.data)}function E(e){kony.sdk.logsdk.error("### OnlineObjectService::_getBinaryContent::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(r,e)}invokeObjectOperation(c,i.getObjectName(),k,null,kony.sdk.constants.HTTP_METHOD_GET,p,E,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,r,o,s)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::getBinaryContent Error:",e),kony.sdk.verifyAndCallClosure(s,e)}))}},this.createBinaryContent=function(e,o,s){kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.createBinaryContent");var r=this.getBinaryUrl();if(null!=e&&null!=e){var i=e.dataObject;if(i instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var k=i.getObjectName(),a=e.binaryAttrName;if(null==a||null==a)return kony.sdk.logsdk.error("### OnlineObjectService::createBinaryContent Error: Please provide column name to create binary content"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj("900000","Please provide column name to create binary content"));kony.sdk.skipAnonymousCall?d():kony.sdk.claimsRefresh(d,s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance))}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function d(){t.getMetadataOfObject(k,{},(function(i){!function(e,o,s,r){var i,k=e.dataObject,a=e.headers,d=e.binaryAttrName,l=k.getObjectName(),c=e.queryParams,y=o+"/"+l,u=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,l),g={};if(null==u.primaryKey||null==u.primaryKey)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(0==u.primaryKey.length)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(i=u.primaryKey[0],null==k.getRecord()[i]||null==k.getRecord()[i])return kony.sdk.logsdk.error("### OnlineObjectService::_createBinaryContent Error: Please provide primary key details to create Binary content."),void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));g[i]=k.getRecord()[i],g.data=k.getRecord()[d],g.fieldName=d;a=kony.sdk.addDefaultHeaders(a);var f=!1;if(null!=a){for(var p in a)null!==p&&"undefined"!==p&&p.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(f=!0);f||(a[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}var E=new kony.sdk.getFormData(g);kony.sdk.isNullOrUndefined(c)||kony.sdk.updateFormData(E,"queryparams",c);function v(e){kony.sdk.logsdk.debug("### OnlineObjectService::_createBinaryContent::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(s,e[i])}function O(e){kony.sdk.logsdk.error("### OnlineObjectService::_createBinaryContent::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(r,e)}invokeObjectOperation(y,k.getObjectName(),a,E,null,v,O,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,r,o,s)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::createBinaryContent Error:",e),kony.sdk.verifyAndCallClosure(s,e)}))}},this.updateBinaryContent=function(e,o,s){kony.sdk.logsdk.trace("Entering kony.sdk.OnlineObjectService.updateBinaryContent");var r=this.getBinaryUrl();if(null!=e&&null!=e){var i=e.dataObject;if(i instanceof kony.sdk.dto.DataObject)if(null==e.queryParams||null==e.queryParams||e.queryParams instanceof Object){var k=i.getObjectName(),a=e.binaryAttrName;if(null==a||null==a)return kony.sdk.logsdk.error("### OnlineObjectService::updateBinaryContent Error: Please provide column name to create binary content"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj("90000","Please provide column name to create binary content"));kony.sdk.skipAnonymousCall?d():kony.sdk.claimsRefresh(d,s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_queryparams_instance,kony.sdk.errormessages.invalid_queryparams_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance))}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));function d(){t.getMetadataOfObject(k,{},(function(i){!function(e,o,s,r){var i,k=e.dataObject,a=e.headers,d=e.binaryAttrName,l=k.getObjectName(),c=e.queryParams,y=o+"/"+l,u=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,l),g={};if(null==u.primaryKey||null==u.primaryKey)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(0==u.primaryKey.length)return void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));if(i=u.primaryKey[0],null==k.getRecord()[i]||null==k.getRecord()[i])return kony.sdk.logsdk.error("### OnlineObjectService::_updateBinaryContent Error: Please provide primary key details to create Binary content."),void kony.sdk.verifyAndCallClosure(r,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));g[i]=k.getRecord()[i],g.data=k.getRecord()[d],g.fieldName=d;(a=kony.sdk.addDefaultHeaders(a))["X-HTTP-Method-Override"]="PUT";var f=!1;if(null!=a){for(var p in a)null!==p&&"undefined"!==p&&p.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(f=!0);f||(a[kony.sdk.constants.API_VERSION_HEADER]=t.getVersion())}var E=new kony.sdk.getFormData(g);null!=c&&null!=c&&kony.sdk.updateFormData(E,"queryparams",c);function v(e){kony.sdk.logsdk.debug("### OnlineObjectService::_updateBinaryContent::invokeSuccessCallback Response:",e),kony.sdk.verifyAndCallClosure(s,e[i])}function O(e){kony.sdk.logsdk.error("### OnlineObjectService::_updateBinaryContent::invokeFailureCallback Error:",e),kony.sdk.verifyAndCallClosure(r,e)}invokeObjectOperation(y,k.getObjectName(),a,E,null,v,O,kony.sdk.util.checkAndFetchNetworkProviderOptions(e))}(e,r,o,s)}),(function(e){kony.sdk.logsdk.error("### OnlineObjectService::updateBinaryContent Error:",e),kony.sdk.verifyAndCallClosure(s,e)}))}},this.getFileStorage=function(){return kony.sdk.FileStorageClasses.import(this.getFileStorageObjectServiceUrl())}},kony.sdk.util=kony.sdk.util||{},kony.sdk.ObjectServiceUtil=kony.sdk.ObjectServiceUtil||{},kony.sdk.dto=kony.sdk.dto||{},kony.sdk.constants.DateTimeType={TODAY:"TODAY",YESTERDAY:"YESTERDAY",TOMORROW:"TOMORROW",CURRENTWEEK:"CURRENTWEEK",LASTWEEK:"LASTWEEK",NEXTWEEK:"NEXTWEEK",CURRENTMONTH:"CURRENTMONTH",LASTMONTH:"LASTMONTH",NEXTMONTH:"NEXTMONTH"},kony.sdk.constants.Aggregation={NONE:"",COUNT:"COUNT",SUM:"SUM",MAX:"MAX",MIN:"MIN",AVG:"AVG"},kony.sdk.constants.OrderType={ASCENDING:"ASC",DESCENDING:"DESC"},kony.sdk.constants.MatchType={EQUALS:{value:"=",name:"EQUALS"},GREATER:{value:">",name:"GREATER"},GREATEREQUAL:{value:">=",name:"GREATEREQUAL"},LESS:{value:"<",name:"LESS"},LESSEQUAL:{value:"<=",name:"LESSEQUAL"},STARTSWITH:{value:"LIKE",name:"STARTSWITH"},CONTAINS:{value:"LIKE",name:"CONTAINS"},LIKE:{value:"LIKE",name:"LIKE"},ENDSWITH:{value:"LIKE",name:"ENDSWITH"},NOTEQUAL:{value:"<>",name:"NOTEQUAL"},ISNULL:{value:"IS NULL",name:"ISNULL"},ISNOTNULL:{value:"IS NOT NULL",name:"ISNOTNULL"}},kony.sdk.constants.JoinType={INNER:"INNER",LEFT:"LEFT",RIGHT:"RIGHT"},kony.sdk.constants.Operator={AND:"AND",OR:"OR"},kony.sdk.constants.ObjectServiceConstants={DATAOBJECT:"dataObject",QUERYPARAMS:"queryParams"},kony.sdk.util.matchIgnoreCase=function(e,n){return null!==e&&null!==n&&void 0!==e&&void 0!==n&&e.toUpperCase()===n.toUpperCase()},kony.sdk.util.isNull=function(e){return null==e||(e+="",kony.sdk.util.matchIgnoreCase(e,"null"))},kony.sdk.util.isValidNumberType=function(e){return!!kony.sdk.util.matchIgnoreCase(typeof e,"number")||!(!kony.sdk.util.matchIgnoreCase(typeof e,"string")||null==kony.sdk.util.toNumber(e))},kony.sdk.util.toNumber=function(e){if(1!=arguments.length)throw new Error("Invalid argument to kony.sdk.util.toNumber");if("number"==typeof e)return e;if("string"==typeof e){var n=e.replace(/^\s*/,"").replace(/\s*$/,"");if(""===n)return null;var o=n-0;return isNaN(o)?null:o}return null},kony.sdk.util.validateCriteriaObject=function(e){return null!=e&&(e instanceof kony.sdk.dto.Criteria||e instanceof kony.sdk.dto.Match||e instanceof kony.sdk.dto.Between||e instanceof kony.sdk.dto.LogicGroup||e instanceof kony.sdk.dto.And||e instanceof kony.sdk.dto.Or||e instanceof kony.sdk.dto.Not||e instanceof kony.sdk.dto.Expression||e instanceof kony.sdk.dto.InCriteria||e instanceof kony.sdk.dto.Exists||e instanceof kony.sdk.dto.Join)},kony.sdk.util.checkAndFetchNetworkProviderOptions=function(e,n){var o={};return kony.sdk.isNullOrUndefined(e)||(!kony.sdk.isNullOrUndefined(e.httpRequestOptions)&&e.httpRequestOptions instanceof Object&&(o.httpRequestOptions=e.httpRequestOptions),!kony.sdk.isNullOrUndefined(e.xmlHttpRequestOptions)&&e.xmlHttpRequestOptions instanceof Object&&(o.xmlHttpRequestOptions=e.xmlHttpRequestOptions),!1!==n&&(kony.sdk.isNullOrUndefined(e[kony.sdk.constants.PASSTHROUGH])||(o[kony.sdk.constants.PASSTHROUGH]=e[kony.sdk.constants.PASSTHROUGH]))),o},kony.sdk.ObjectServiceUtil.cacheMetadata=function(e,n){if(null!=n){kony.sdk.dataStore.removeItem(e);for(var o=0;o<n.length;o++){var t=n[o];kony.sdk.ObjectServiceUtil.cacheObjectMetadata(e,t)}}},kony.sdk.ObjectServiceUtil.cacheObjectMetadata=function(e,n){if(null!=n){var o=kony.sdk.dataStore.getItem(e),t=JSON.parse("{}");null!=o&&"{}"!==o&&(t=JSON.parse(o)),t[n.name]=n;var s=JSON.stringify(t);kony.sdk.dataStore.setItem(e,s)}},kony.sdk.ObjectServiceUtil.getCachedMetadata=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.ObjectServiceUtil.getCachedMetadata");var n=kony.sdk.util.getPackagedMetadata();if(null==n||null==n){var o=null,t=kony.sdk.dataStore.getItem(e);return null!=t&&"{}"!==t&&(o=JSON.parse(t)),o}return null!=e&&null!=e?n[e]:null},kony.sdk.ObjectServiceUtil.getCachedObjectMetadata=function(e,n){var o;if(kony.sdk.logsdk.trace("Entering into kony.sdk.ObjectServiceUtil.getCachedObjectMetadata"),null!=n){var t=kony.sdk.ObjectServiceUtil.getCachedMetadata(e);null!=t&&"{}"!==t&&(o=t[n])}return o},kony.sdk.dto.DataObject=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.DataObject"),this.objectName=e,this.record=null!=n&&null!=n?n:{},this.odataUrl=null,this.selectQueryObject=null,this.offlineObjectsOptions={},this.setOfflineObjectsOptions=function(e){this.offlineObjectsOptions=e},this.getOfflineObjectsOptions=function(){return this.offlineObjectsOptions},this.addField=function(e,n){this.record[e]=n},this.setRecord=function(e){this.record=e},this.getRecord=function(){return this.record},this.addChildDataObject=function(e){null!=this.record[e.objectName]&&null!=this.record[e.objectName]||(this.record[e.objectName]=[]),this.record[e.objectName].push(e.getRecord())},this.setOdataUrl=function(e){this.odataUrl=e},this.getOdataUrl=function(){return this.odataUrl},this.setSelectQueryObject=function(e){this.selectQueryObject=e},this.getSelectQueryObject=function(){return this.selectQueryObject},this.getObjectName=function(){return this.objectName}},kony.sdk.dto.RecordObject=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.RecordObject"),this.tableName="",this.columnValues={},this.childRecords=[]},kony.sdk.util.getSyncDbName=function(){return kony.sync.getDBName()},kony.sdk.util.getPrimarykeysFromMetadata=function(e){var n=null;if(null!=e.primaryKey&&null!=e.primaryKey&&e.primaryKey.length>0){n={};for(var o=e.primaryKey.length,t=0;t<o;t++){var s=e.primaryKey[t];n[s]=s}}return n},kony.sdk.util.replaceAll=function(e,n,o){kony.sdk.logsdk.trace("Entering into kony.sdk.util.replaceAll");for(var t=e,s=t.indexOf(n);-1!=s;)s=(t=t.replace(n,o)).indexOf(n);return t},kony.sdk.util.validateDateTypeInput=function(e){return kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.TODAY)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.TOMORROW)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.YESTERDAY)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.CURRENTWEEK)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.NEXTWEEK)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.LASTWEEK)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.CURRENTMONTH)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.NEXTMONTH)||kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.LASTMONTH)},kony.sdk.util.getDateRange=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.util.getDateRange");var n,o,t=[],s=new Date,r=new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds());if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.TODAY))o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);else if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.TOMORROW))r.setDate(r.getDate()+1),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);else if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.YESTERDAY))r.setDate(r.getDate()-1),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);else if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.CURRENTWEEK)){var i=(k=r.getDate()-r.getDay())+6;r.setDate(k),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),r.setDate(i),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59)}else if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.LASTWEEK)){r.setDate(r.getDate()-7);i=(k=r.getDate()-r.getDay())+6;r.setDate(k),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),r.setDate(i),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59)}else if(kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.NEXTWEEK)){r.setDate(r.getDate()+7);var k;i=(k=r.getDate()-r.getDay())+6;r.setDate(k),n=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0),r.setDate(i),o=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59)}else kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.CURRENTMONTH)?(n=new Date(r.getFullYear(),r.getMonth(),1,0,0,0),o=new Date(r.getFullYear(),r.getMonth()+1,0,23,59,59)):kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.LASTMONTH)?(n=new Date(r.getFullYear(),r.getMonth()-1,1,0,0,0,0),o=new Date(r.getFullYear(),r.getMonth(),0,23,59,59,999)):kony.sdk.util.matchIgnoreCase(e,kony.sdk.constants.DateTimeType.NEXTMONTH)?(n=new Date(r.getFullYear(),r.getMonth()+1,1,0,0,0,0),o=new Date(r.getFullYear(),r.getMonth()+2,0,23,59,59,999)):(n=0,o=0);return t.push(n),t.push(o),t},kony.sdk.util.getPkTableForBinary=function(e,n,o){kony.sdk.logsdk.trace("Entering into kony.sdk.util.getPkTableForBinary");var t={};if(!kony.sdk.isNullOrUndefined(e.primaryKey)){for(var s=0;s<e.primaryKey.length;s++){var r=e.primaryKey[s],i=n[r];if(kony.sdk.isNullOrUndefined(i))return void kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));t[r]=i}return t}kony.sdk.verifyAndCallClosure(o,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable))},kony.sdk.util.getMetadataOfColumn=function(e,n){if(kony.sdk.logsdk.trace("Entering into kony.sdk.util.getMetadataOfColumn"),null!=e&&null!=e){var o=e.columns;if(null!=o&&null!=o)for(var t in o){var s=o[t];if(s.name==n)return s}}return null},kony.sdk.util.populateColumnValues=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.util.populateColumnValues");for(var o={},t=Object.keys(e).length,s=0;s<t;s++){var r=Object.keys(e)[s],i=e[r];if(i instanceof Array)for(var k=0;k<i.length;k++){var a=new kony.sdk.dto.RecordObject;a.tableName=r,a.columnValues=kony.sdk.util.populateColumnValues(e[r][k],a.childRecords),n.push(a)}else o[r]=i}return o},kony.sdk.util.getRelationOfEntity=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.util.getRelationOfEntity");for(var o=0;o<e.length;o++)if(null!=e[o]&&"OneToMany"==e[o].relationshipType&&0==e[o].relatedEntity.localeCompare(n))return e[o];return null},kony.sdk.util.isPrimaryKey=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.util.isPrimaryKey");for(var o=0;o<e.length;o++)if(e[o]==n)return!0;return!1},kony.sdk.util.objectToQueryParams=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.util.objectToQueryParams ");var n="";if(!kony.sdk.isNullOrUndefined(e)&&e instanceof Object&&Object.keys(e).length>0)for(var o=Object.keys(e).length,t=0;t<o;t++){var s=Object.keys(e)[t];n=0===n.length?encodeURIComponent(s)+"="+encodeURIComponent(e[s]):n+"&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n},kony.sdk.util.getPackagedMetadata=function(){return kony.sdk.logsdk.trace("Entering into   kony.sdk.util.getPackagedMetadata"),void 0!==kony.sdk.APP_META&&null!==kony.sdk.APP_META||(kony.sdk.APP_META={}),kony.sdk.APP_META.objectsvc_meta},kony.sdk.util.setPackagedMetadata=function(e){kony.sdk.logsdk.trace("Entering into   kony.sdk.util.setPackagedMetadata");try{if("object"==typeof e)kony.sdk.APP_META=e;else if("string"==typeof e){var n=JSON.parse(e);kony.sdk.APP_META=n}}catch(e){kony.sdk.logsdk.error("### kony.sdk.setPackagedMetadata::error while validating the input packaged metadata",e)}},stripTrailingCharacter=function(e,n){return kony.sdk.logsdk.trace("Entering into stripTrailingCharacter"),e.substr(e.length-1)===n?e.substr(0,e.length-1):e},kony.sdk.setLogLevelFromServerResponse=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.setLogLevelFromServerResponse");var n=kony.sdk.getCurrentInstance();if(e&&e[kony.logger.deviceLogLevelHeader]){if(logLevel=e[kony.logger.deviceLogLevelHeader].toUpperCase(),logLevel.localeCompare(kony.logger.logLevel.NONE.code)||kony.logger.currentLogLevel===kony.logger.logLevel.NONE)if(logLevel.localeCompare(kony.logger.logLevel.FATAL.code)||kony.logger.currentLogLevel===kony.logger.logLevel.FATAL)if(logLevel.localeCompare(kony.logger.logLevel.ERROR.code)||kony.logger.currentLogLevel===kony.logger.logLevel.ERROR)if(logLevel.localeCompare(kony.logger.logLevel.WARN.code)||kony.logger.currentLogLevel===kony.logger.logLevel.WARN)if(logLevel.localeCompare(kony.logger.logLevel.PERF.code)||kony.logger.currentLogLevel===kony.logger.logLevel.PERF)if(logLevel.localeCompare(kony.logger.logLevel.INFO.code)||kony.logger.currentLogLevel===kony.logger.logLevel.INFO)if(logLevel.localeCompare(kony.logger.logLevel.DEBUG.code)||kony.logger.currentLogLevel===kony.logger.logLevel.DEBUG)if(logLevel.localeCompare(kony.logger.logLevel.TRACE.code)||kony.logger.currentLogLevel===kony.logger.logLevel.TRACE){if(logLevel.localeCompare(kony.logger.logLevel.ALL.code)||kony.logger.currentLogLevel===kony.logger.logLevel.ALL)return logLevel.localeCompare("OFF")?void 0:(kony.logger.deactivatePersistors(kony.logger.networkPersistor),kony.logger.currentLogLevel=kony.logger.logLevel.NONE,void n.removeGlobalRequestParam(kony.logger.deviceLogLevelHeader,n.globalRequestParamType.headers));kony.logger.currentLogLevel=kony.logger.logLevel.ALL}else kony.logger.currentLogLevel=kony.logger.logLevel.TRACE;else kony.logger.currentLogLevel=kony.logger.logLevel.DEBUG;else kony.logger.currentLogLevel=kony.logger.logLevel.INFO;else kony.logger.currentLogLevel=kony.logger.logLevel.PERF;else kony.logger.currentLogLevel=kony.logger.logLevel.WARN;else kony.logger.currentLogLevel=kony.logger.logLevel.ERROR;else kony.logger.currentLogLevel=kony.logger.logLevel.FATAL;else kony.logger.currentLogLevel=kony.logger.logLevel.NONE;n.setGlobalRequestParam(kony.logger.deviceLogLevelHeader,logLevel,n.globalRequestParamType.headers),kony.logger.activatePersistors(kony.logger.networkPersistor)}},kony.sdk.prototype.enableDebug=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.prototype.enableDebug"),kony.sdk.isDebugEnabled=!0},kony.sdk.prototype.disableDebug=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.prototype.disableDebug"),kony.sdk.isDebugEnabled=!1},kony.sdk.verifyAndCallClosure=function(e,n){"function"==typeof e?e(n):kony.sdk.logsdk.warn("invalid callback",JSON.stringify(e))},kony.sdk.overrideUserId=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.overrideUserId"),kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE&&"function"==typeof kony.setUserID?kony.setUserID(e,!0):konyRef.setCurrentUserId(e)},kony.sdk.formatCurrentDate=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.formatCurrentDate");var n=new Date(e);return n.getUTCFullYear()+"-"+kony.sdk.formatDateComponent(n.getUTCMonth()+1)+"-"+kony.sdk.formatDateComponent(n.getUTCDate())+" "+kony.sdk.formatDateComponent(n.getUTCHours())+":"+kony.sdk.formatDateComponent(n.getUTCMinutes())+":"+kony.sdk.formatDateComponent(n.getUTCSeconds())},kony.sdk.formatDateComponent=function(e){return kony.sdk.logsdk.trace("Entering into kony.sdk.formatDateComponent"),e<10&&(e="0"+e),e},kony.sdk.isNullOrUndefined=function(e){return null==e},kony.sdk.constants.reportingType={session:"session",custom:"custom"},kony.sdk.isEmptyObject=function(e){if("boolean"==typeof e||"number"==typeof e)return!1;if("string"==typeof e)return 0===e.trim().length;for(var n in e)return!1;return!0},kony.sdk.util.isNullOrUndefinedOrEmptyObject=function(e){return kony.sdk.isNullOrUndefined(e)||kony.sdk.isEmptyObject(e)},kony.sdk.isArray=function(e){return!(!e||"[object Array]"!==Object.prototype.toString.call(e))},kony.sdk.getDefaultHeaders=function(){return kony.sdk.addDefaultHeaders({})},kony.sdk.addDefaultHeaders=function(e){return kony.sdk.isNullOrUndefined(e)&&(e={}),e.hasOwnProperty(kony.sdk.constants.REQUEST_ID_HEADER)||(e[kony.sdk.constants.REQUEST_ID_HEADER]=kony.license.generateUUID().toString()),e},kony.sdk.formatSuccessResponse=function(e){return e&&e.httpresponse&&delete e.httpresponse,e},kony.sdk.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},kony.sdk.util.getString=function(e){return kony.sdk.isNullOrUndefined(e)||"null"===e.toString().toLocaleLowerCase()?"":e.toString()},kony.sdk.isSessionOrTokenExpired=function(e){return!(!e||"Auth-5"!==e&&"Auth-6"!==e&&"Gateway-31"!==e&&"Gateway-33"!==e&&"Gateway-35"!==e&&"Gateway-36"!==e&&"Auth-46"!==e&&"Auth-55"!==e)},kony.sdk.resetProviderKeys=function(e,n){try{e&&n&&e.tokens.hasOwnProperty(n)&&(e.tokens[n]=null)}catch(e){kony.sdk.logsdk.error("Error while clearing the cache..")}},kony.sdk.resetCurrentKeys=function(e,n){try{e&&(e.currentClaimToken=null,e.currentBackEndToken=null,e.claimTokenExpiry=null,e.currentRefreshToken=null,e.isAnonymousProvider=!0,n&&e.tokens.hasOwnProperty(n)&&(e.tokens[n]=null))}catch(e){kony.sdk.logsdk.error("Error while clearing the cache..")}},kony.sdk.util.populateIndividualServiceLists=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.util.populateIndividualServiceLists");var o=e.services_meta;if(kony.sdk.isNullOrUndefined(n.objectsvc)&&(n.objectsvc={}),kony.sdk.isNullOrUndefined(n.offlineObjectsvc)&&(n.offlineObjectsvc={}),o)for(var t in o)if(o.hasOwnProperty(t)){var s=o[t];s&&"objectsvc"===s.type?kony.sdk.isNullOrUndefined(s.offline)?(n.objectsvc[t]=s,n.offlineObjectsvc[t]=s):!1===s.offline?n.objectsvc[t]=s:!0===s.offline&&(n.offlineObjectsvc[t]=s):s&&"integsvc"===s.type&&(n.integsvc[t]=s)}},kony.sdk.util.generateHashcodeForURL=function(e,n){var o="",t=null;return kony.sdk.isNullOrUndefined(e)||(o+=e),kony.sdk.isNullOrUndefined(n)||(o+=JSON.stringify(n)),kony.sdk.getSdkType()!==kony.sdk.constants.SDK_TYPE_IDE||kony.sdk.util.isNullOrEmptyString(o)||(t=kony.crypto.createHash("sha512",o)),t},kony.sdk.util.isNullOrEmptyString=function(e){return!!(kony.sdk.isNullOrUndefined(e)||"string"==typeof e&&""===e.trim())},kony.sdk.util.hasBrowserWidget=function(e){return e&&e[kony.sdk.constants.BROWSER_WIDGET]&&"kony.ui.Browser"===kony.sdk.util.type(e[kony.sdk.constants.BROWSER_WIDGET])},kony.sdk.util.isBinarySupported=function(){return kony.sdk.getSdkType()===kony.sdk.constants.SDK_TYPE_IDE&&kony.sdk.getAType()===kony.sdk.constants.SDK_ATYPE_NATIVE},kony.sdk.util.populateAuthorizationHeaderForLogin=function(e,n){if(!0===kony.sdk.sso.isSSOEnabled){var o=kony.sdk.util.getSSOTokenForProvider(n);kony.sdk.util.isNullOrEmptyString(o)?kony.sdk.logsdk.warn("SSO Token retrieved is empty."):e[kony.sdk.constants.AUTHORIZATION_HEADER]=o}kony.sdk.isNullOrUndefined(konyRef.currentClaimToken)||kony.sdk.isClaimsTokenExpired(konyRef.claimTokenExpiry)||(e[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken)},kony.sdk.util.getSSOTokenForProvider=function(e){kony.sdk.logsdk.trace("Entered Method : getSSOTokenForProvider.");var n=kony.sdk.util.getSSOToken();return kony.sdk.util.isNullOrEmptyString(n)?(kony.sdk.logsdk.warn("SSO token is either empty,null or undefined for provider:"+e),null):JSON.parse(n)[e.toLowerCase()]},kony.sdk.util.addOrUpdateSSOTokenWithProvider=function(e,n){kony.sdk.logsdk.trace("Entered Method : addOrUpdateSSOTokenWithProvider.");var o={},t=kony.sdk.util.getSSOToken();return kony.sdk.util.isNullOrEmptyString(t)||(o=JSON.parse(t)),o[n.toLowerCase()]=e,JSON.stringify(o)},kony.sdk.util.deleteSSOTokenForProvider=function(e){kony.sdk.logsdk.trace("Entered Method: deleteSSOTokenForProvider.");var n=kony.sdk.util.getSSOToken();if(kony.sdk.util.isNullOrEmptyString(n))return kony.sdk.logsdk.warn("SSO token is either empty,null or undefined for provider:"+e),null;var o=JSON.parse(n);delete o[e.toLowerCase()],kony.sdk.util.saveSSOToken(JSON.stringify(o))},kony.sdk.cloneObject=function(e){var n;try{n=JSON.parse(JSON.stringify(e))}catch(o){kony.sdk.logsdk.error("cloning object failed, reverting back to copy"),n=e}return n},kony.sdk.util.isJsonObject=function(e){return null!=e&&e.constructor==={}.constructor},kony.sdk.util.isValidString=function(e){return null!=e&&e.constructor==="".constructor&&""!==e.trim()},kony.sdk.util.convertJsonKeysToLowerCase=function(e){var n={};if(!kony.sdk.util.isJsonObject(e))return e;for(var o=Object.keys(e),t=0;t<o.length;t++)n[o[t].toLowerCase()]=e[o[t]];return n},kony.sdk.util.getValueForKeyAndIgnoreCase=function(e,n){var o=Object.keys(e),t=0;for(var s in o){if(o[s].toLocaleLowerCase()===n.toLocaleLowerCase())return Object.values(e)[t];t++}return null},kony.sdk.util.populateTemplate=function(e,n){if(kony.sdk.util.isNullOrEmptyString(e)||!kony.sdk.util.isJsonObject(n))return kony.sdk.logsdk.error(kony.sdk.errorConstants.populating_template_failed+" "+kony.sdk.errormessages.populating_template_failed),null;var o=[],t=[],s={},r=kony.sdk.cloneObject(e),i=r.match(/(\${)+(\w.*?)+(})/g);for(var k in i){var a=i[k].toString(),d=a.slice(2,a.length-1);o.push(d)}for(var l=0;l<o.length;l++){var c=o[l];n.hasOwnProperty(c)?r=r.replace("${"+c+"}",n[c]):t.push(c)}return s[kony.sdk.constants.PROCESSED_TEMPLATE]=r,s[kony.sdk.constants.MISSING_VARIABLES]=t,s},kony.sdk.util.checkForIE11=function(){if("undefined"!=typeof XMLHttpRequest){var e=window.navigator.userAgent;if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return 11===parseInt(e.substring(n+3,e.indexOf(".",n)),10)}}return!1},kony.sdk.util.getSessionType=function(){var e;return kony.licensevar&&null!=kony.licensevar.isInteractive?e=kony.licensevar.isInteractive?kony.sdk.constants.APP_SESSION_INTERACTIVE:kony.sdk.constants.APP_SESSION_NON_INTERACTIVE:(kony.sdk.logsdk.trace("Updating interacting session in kony reporting params by default"),e=kony.sdk.constants.APP_SESSION_INTERACTIVE),e},kony.sdk.getEncodedReportingParamsForSvcid=function(e){var n=kony.sdk.getPayload(konyRef);return n.rsid=kony.sdk.currentInstance.getSessionId(),e?n.svcid=e:kony.sdk.logsdk.warn("### kony.sdk.getEncodedReportingParamsForSvcid:: svcid is either null or undefined"),encodeURI(JSON.stringify(n))},kony.sdk.util.isPWAStandaloneOrFullscreen=function(){return!(kony.sdk.isNullOrUndefined(window)||!window.matchMedia||!(window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||window.navigator&&window.navigator.standalone))},kony.sdk.util.isMobileDevice=function(){return!(kony.sdk.isNullOrUndefined(navigator)||!/mobile/gi.test(navigator.userAgent))},kony.sdk.util.openPopupWindow=function(e,n){var o=75*screen.height/100,t=40*screen.width/100,s=screen.width/2-t/2,r=screen.height/2-o/2;return window.open(e,n,"width="+t+", height="+o+", top="+r+", left="+s)},kony.sdk.util.prefixAppid=function(e){return appConfig.appId+"_"+e},kony.sdk.util.clearExistingWebsocketObject=function(){var e={};e[kony.sdk.constants.SERVER_EVENTS_CLOSE_CONNECTION]=!0,kony.sdk.websocket&&kony.sdk.websocket.isWebSocketAvailable()&&kony.sdk.websocket.unSubscribeServerEvents("",(function(){kony.sdk.logsdk.info("Existing websocket connection closed!")}),e)},kony.sdk.util.getKeyByValue=function(e,n){for(var o in e)if(e.hasOwnProperty(o)&&e[o]===n)return o},kony.sdk.util.populateCustomOAuthParams=function(e,n){if(!kony.sdk.util.isNullOrUndefinedOrEmptyObject(n))for(var o in kony.sdk.isNullOrUndefined(e)&&(e={}),n){var t=n[o];"boolean"==typeof t?(t=t.toString(),e[o]=t):kony.sdk.util.isNullOrEmptyString(t)||(e[o]=t)}},kony.sdk.serviceDoc=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.serviceDoc");var e="",n="",o={},t="",s="",r=null,i={},k={},a={},d={},l={},c={};this.toJSON=function(){return servConfig={},servConfig.appId=this.getAppId(),servConfig.baseId=this.getBaseId(),servConfig.name=this.getAppName(),servConfig.selflink=this.getSelfLink(),servConfig.services_meta=this.getServicesMeta(),servConfig.login=this.getAuthServices(),servConfig.integsvc=this.getIntegrationServices(),servConfig.messagingsvc=this.getMessagingServices(),servConfig.sync=this.getSyncServices(),servConfig.reportingsvc=this.getReportingServices(),servConfig.objectsvc=this.getObjectServices(),servConfig.logicsvc=this.getLogicServices(),kony.sdk.util.populateIndividualServiceLists(this,servConfig),servConfig},this.setAppId=function(n){e=n},this.getAppId=function(){return e},this.setBaseId=function(e){n=e},this.getBaseId=function(){return n},this.setAppName=function(e){t=e},this.getAppName=function(){return t},this.setSelfLink=function(e){s=e},this.getSelfLink=function(){return s},this.setAuthService=function(e){null===r&&(r=[]),r.push(e)},this.getAuthServiceByName=function(e){if(null===r)return null;for(var n in r){var o=r[n];if(o.prov==e)return o}},this.getAuthServices=function(){return r},this.setIntegrationService=function(e,n){i[e]=n},this.getIntegrationServiceByName=function(e){return i[e]},this.getIntegrationServices=function(){return i},this.setObjectService=function(e,n){l[e]=n},this.getObjectServiceByName=function(e){return l[e]},this.getObjectServices=function(){return l},this.getLogicServices=function(){return c},this.getServicesMeta=function(){return o},this.setReportingService=function(e,n){if(e!=kony.sdk.constants.reportingType.session&&e!=kony.sdk.constants.reportingType.custom)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"invalid reporting type "+e);k[e]=n},this.getReportingServiceByType=function(e){return k[e]},this.getReportingServices=function(){return k},this.setMessagingService=function(e,n){a[e]=n},this.getMessagingServiceByName=function(e){return a[e]},this.getMessagingServices=function(){return a},this.setSyncService=function(e){d=e},this.getSyncServices=function(){return d}},kony.logger=kony.logger||{},kony.logger={networkPersistorUrlEndpoint:"deviceLogs",deviceLogLevelHeader:"X-KONY-DEVICE-LOG-LEVEL",filePersistor:1,consolePersistor:2,networkPersistor:4,logLevel:{NONE:{value:127,name:"none",code:"NONE"},FATAL:{value:64,name:"fatal",code:"FATAL"},ERROR:{value:32,name:"error",code:"ERROR"},WARN:{value:16,name:"warn",code:"WARN"},PERF:{value:8,name:"perf",code:"PERF"},INFO:{value:4,name:"info",code:"INFO"},DEBUG:{value:2,name:"debug",code:"DEBUG"},TRACE:{value:1,name:"trace",code:"TRACE"},ALL:{value:0,name:"all",code:"ALL"}},get currentLogLevel(){if("undefined"==typeof currentLevel&&(currentLevel=kony.logger.logLevel.NONE),kony.logger.isNativeLoggerAvailable()){var e=KonyLogger.getLogLevel();for(var n in kony.logger.logLevel)if(kony.logger.logLevel.hasOwnProperty(n)&&kony.logger.logLevel[n].value==e){currentLevel=kony.logger.logLevel[n];break}}return currentLevel},set currentLogLevel(e){currentLevel=e,kony.logger.isNativeLoggerAvailable()&&KonyLogger.setLogLevel(currentLevel.value)},isNativeLoggerAvailable:function(){return"undefined"!=typeof KonyLogger},flush:function(){kony.logger.isNativeLoggerAvailable()&&KonyLogger.flush()},activatePersistors:function(e){kony.logger.isNativeLoggerAvailable()&&KonyLogger.activatePersistors(e)},deactivatePersistors:function(e){kony.logger.isNativeLoggerAvailable()&&KonyLogger.deactivatePersistors(e)},subscribeLogListener:function(e){kony.logger.isNativeLoggerAvailable()&&("function"==typeof e?KonyLogger.subscribeLogListener(e):kony.sdk.logsdk.warn("loglistener is not a type of function",JSON.stringify(e)))},unsubscribeLogListener:function(){kony.logger.isNativeLoggerAvailable()&&KonyLogger.unsubscribeLogListener()},setClaimsToken:function(){var e=kony.sdk.getCurrentInstance().currentClaimToken;kony.logger.isNativeLoggerAvailable()&&KonyLogger.setClaimsToken(e)},setConfig:function(e){kony.logger.isNativeLoggerAvailable()&&KonyLogger.setConfig(e.getLoggerConfig())},setPersistorConfig:function(e){kony.logger.isNativeLoggerAvailable()&&KonyLogger.setPersistorConfig(e.getPersistorConfig())},setGlobalRequestParam:function(e,n,o){kony.logger.isNativeLoggerAvailable()&&KonyLogger.setGlobalRequestParam(e,n,o)},removeGlobalRequestParam:function(e,n){kony.logger.isNativeLoggerAvailable()&&KonyLogger.removeGlobalRequestParam(e,n)},resetGlobalRequestParams:function(){kony.logger.isNativeLoggerAvailable()&&KonyLogger.resetGlobalRequestParams()},createLoggerObject:function(e,n){var o={};o.config=parseConfig(n),o.trace=function(e,n){logMessage(o,kony.logger.logLevel.TRACE,e,n)},o.debug=function(e,n){logMessage(o,kony.logger.logLevel.DEBUG,e,n)},o.info=function(e,n){logMessage(o,kony.logger.logLevel.INFO,e,n)},o.perf=function(e,n){logMessage(o,kony.logger.logLevel.PERF,e,n)},o.warn=function(e,n){logMessage(o,kony.logger.logLevel.WARN,e,n)},o.error=function(e,n){logMessage(o,kony.logger.logLevel.ERROR,e,n)},o.fatal=function(e,n){logMessage(o,kony.logger.logLevel.FATAL,e,n)};var t=0;return o.setIndirectionLevel=function(e){t=e},o.getIndirectionLevel=function(){return t},o.loggerName=e,o},createLoggerConfig:function(){var e={},n={},o={},t=!0,s=[];return kony.sdk.isNullOrUndefined(kony.logger.currentLogLevel)?n.logLevel=kony.logger.logLevel.NONE.value:n.logLevel=kony.logger.currentLogLevel.value,{set timeFormat(n){e.timeFormat=n},set timeZone(n){e.timeZone=n},set logLevel(e){n.logLevel=e},set bytesLimit(e){o.bytesLimit=e},set statementsLimit(e){o.statementsLimit=e},set overrideConfig(e){t=e},get persistorList(){return s},addPersistor:function(e){s.push(e.getPersistorConfig())},getLoggerConfig:function(){var r={};return Object.keys(e).length>0&&(r.formatterConfig=e),Object.keys(n).length>0&&(r.logFilterConfig=n),Object.keys(o).length>0&&(r.accumulatorConfig=o),null!==t&&(r.overrideConfig=t),r.persistors=s,r}}},createFilePersistor:function(){var e={};return{get persistorType(){return kony.logger.filePersistor},set maxNumberOfLogFiles(n){e.maxNumberOfLogFiles=n},set maxFileSize(n){e.maxFileSize=n},getPersistorConfig:function(){var n={};return n.type=this.persistorType,Object.keys(e).length>0&&(n.properties=e),n}}},createNetworkPersistor:function(){var e={};return{get persistorType(){return kony.logger.networkPersistor},set URL(n){e.URL=n},getPersistorConfig:function(){var n={};return n.type=this.persistorType,Object.keys(e).length>0&&(n.properties=e),n}}},appLoggerInitialisation:function(){return new kony.logger.createNewLogger(kony.sdk.constants.APP_LOGGER_NAME,null)},isValidJSTable:function(e){return!kony.sdk.isNullOrUndefined(e)&&("object"==typeof e||"Object"==typeof e||"Array"==typeof e||"array"==typeof e)},checkAndUpdateNetworkPersistorProperties:function(){if(kony.logger.isNativeLoggerAvailable()){var e=kony.sdk.util.getSessionURLfromAppConfig();if(!kony.sdk.isNullOrUndefined(e)){var n=e.lastIndexOf("/");if(-1!=n){var o=e.substring(0,n+1),t=kony.logger.createNetworkPersistor();t.URL=o+kony.logger.networkPersistorUrlEndpoint,kony.logger.setPersistorConfig(t)}}}},configure:function(){kony.logger.isNativeLoggerAvailable()&&(kony.logger.checkAndUpdateNetworkPersistorProperties(),KonyLogger.configure())}},kony.sdk.FileStorageClasses=function(){var e={},n="kony.FileStorageAdapter";return{import:function(o){kony.sdk.logsdk.trace(n+": Importing native FileStorageClasses");var t=e[o];return void 0===t&&(t=function(e){kony.sdk.logsdk.trace(n+": Creating instance of FileStorageClasses");var o={listFiles:function(n,o,t,s,r){kony.sdk.logsdk.trace("Invoking list files"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("listFiles : Refresh claims token SUCCESS");var o=kony.sdk.FileStorageClasses.addTokenToHeaders(o,kony.sdk.getCurrentInstance().currentClaimToken);kony.sdk.FileStorageClasses.listFiles(e,n,o,t,s,r)}.bind(this),(function(e){kony.sdk.logsdk.error("listFiles : Refresh claims token FAILED"),s(e)}))},upload:function(n,o,t,s,r){kony.sdk.logsdk.trace("Invoking upload"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("upload : Refresh claims token SUCCESS");var i=o.headers;i=kony.sdk.FileStorageClasses.addTokenToHeaders(i,kony.sdk.getCurrentInstance().currentClaimToken),o.headers=i,kony.sdk.FileStorageClasses.upload(e,n,o,t,s,r)}.bind(this),(function(e){kony.sdk.logsdk.error("upload : Refresh claims token FAILED"),s(e)}))},download:function(n,o,t,s){kony.sdk.logsdk.trace("Invoking downloadFile"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("downloadFile : Refresh claims token SUCCESS");var r=n.headers;r=kony.sdk.FileStorageClasses.addTokenToHeaders(r,kony.sdk.getCurrentInstance().currentClaimToken),n.headers=r,kony.sdk.FileStorageClasses.download(e,n,o,t,s)}.bind(this),(function(e){kony.sdk.logsdk.error("upload : Refresh claims token FAILED"),t(e)}))},deleteById:function(n,o,t,s,r,i){kony.sdk.logsdk.trace("Invoking deleteById"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("deleteById : Refresh claims token SUCCESS");var t=kony.sdk.FileStorageClasses.addTokenToHeaders(t,kony.sdk.getCurrentInstance().currentClaimToken);kony.sdk.FileStorageClasses.deleteById(e,n,o,t,s,r,i)}.bind(this),(function(e){kony.sdk.logsdk.error("deleteById : Refresh claims token FAILED"),r(e)}))},deleteByCriteria:function(n,o,t,s,r){kony.sdk.logsdk.trace("Invoking deleteByCriteria"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("deleteByCriteria : Refresh claims token SUCCESS");var o=kony.sdk.FileStorageClasses.addTokenToHeaders(o,kony.sdk.getCurrentInstance().currentClaimToken);kony.sdk.FileStorageClasses.deleteByCriteria(e,n,o,t,s,r)}.bind(this),(function(e){kony.sdk.logsdk.error("deleteByCriteria : Refresh claims token FAILED"),s(e)}))},update:function(n,o,t,s){kony.sdk.logsdk.trace("Invoking update"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("update : Refresh claims token SUCCESS");var r=n.headers;r=kony.sdk.FileStorageClasses.addTokenToHeaders(r,kony.sdk.getCurrentInstance().currentClaimToken),n.headers=r,kony.sdk.FileStorageClasses.update(e,n,o,t,s)}.bind(this),(function(e){kony.sdk.logsdk.error("deleteByCriteria : Refresh claims token FAILED"),t(e)}))},abort:function(n,o,t,s,r,i){kony.sdk.logsdk.trace("Invoking abort"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.info("abort : Refresh claims token SUCCESS");var t=kony.sdk.FileStorageClasses.addTokenToHeaders(t,kony.sdk.getCurrentInstance().currentClaimToken);kony.sdk.FileStorageClasses.abort(e,n,o,t,s,r,i)}.bind(this),(function(e){kony.sdk.logsdk.error("abort : Refresh claims token FAILED"),r(e)}))}};return o}(o),e[o]=t),t}}}(),kony.sdk.FileStorageClasses.addTokenToHeaders=function(e,n){return kony.sdk.isNullOrUndefined(e)&&(e={}),e["X-Kony-Authorization"]=n,e},kony.sdk.KNYObj=function(e,n,o){var t="KNYObj";kony.sdk.logsdk.info(t+": Creating KNYObj with name "+e);var s=kony.sdk.KNYObj.createSDKObjectSync(e,n,o);this.name=e,this.getSdkObjectSync=function(){return s},this.startSync=function(e,n,o,s){kony.sdk.logsdk.perf(t+": Executing sync on "+this.name+" object"),kony.sdk.logsdk.perf(t+": Executing Refreshing claims token"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.perf(t+": Executing Finished Refresh claims token : status SUCCESS");var r=kony.sdk.getCurrentInstance().currentClaimToken;kony.sdk.OfflineObjects.setToken(r),kony.sdk.OfflineObjects.setReportingParams(kony.sdk.getReportingParamsForOfflineObjects()),kony.sdk.KNYObj.startSync(this,e,n,o,s)}.bind(this),(function(e){kony.sdk.logsdk.error(t+": Executing Finished Refresh claims token : status FAILED"),o(e)}))},this.getPendingRecordsForUpload=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Fetching PendingEditSyncRecords in "+this.name+" object"),kony.sdk.KNYObj.getPendingRecordsForUpload(this,e,n,o)},this.create=function(e,n,o,s){kony.sdk.logsdk.perf(t+": Executing Create record in "+this.name+" object"),kony.sdk.KNYObj.create(this,e,n,o,s)},this.update=function(e,n,o,s){kony.sdk.logsdk.perf(t+": Executing Update record in "+this.name+" object"),kony.sdk.KNYObj.update(this,e,n,o,s)},this.updateByPK=function(e,n,o,s){kony.sdk.logsdk.perf(t+": Executing Update record by PK in "+this.name+" object"),kony.sdk.KNYObj.updateByPK(this,e,n,o,s)},this.delete=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Delete record in "+this.name+" object"),kony.sdk.KNYObj.delete(this,e,n,o)},this.deleteByPK=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Delete record by PK in "+this.name+" object"),kony.sdk.KNYObj.deleteByPK(this,e,n,o)},this.get=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Get record from "+this.name+" object"),kony.sdk.KNYObj.get(this,e,n,o)},this.getBinary=function(e,n,o,s,r,i){kony.sdk.logsdk.perf(t+": Executing Get binary for "+this.name+" object"),kony.sdk.KNYObj.getBinary(this,e,n,o,s,r,i)},this.getBinaryStatus=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing getBinaryStatus for "+this.name+" object"),kony.sdk.KNYObj.getBinaryStatus(this,e,n,o)},this.rollback=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Rollback for "+this.name+" object"),kony.sdk.KNYObj.rollback(this,e,n,o)},this.markForUpload=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing MarkForUpload for "+this.name+" object"),kony.sdk.KNYObj.markForUpload(this,e,n,o)},this.getUploadDeferredRecordKeys=function(e,n){kony.sdk.logsdk.perf(t+": Executing Get deferred record primary keys in "+this.name+" object"),kony.sdk.KNYObj.getUploadDeferredRecordKeys(this,e,n)},this.cancelSync=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing Cancel for "+this.name+" object"),kony.sdk.KNYObj.cancelSync(this,e,n,o)},this.clearOfflineData=function(e,n,o){kony.sdk.logsdk.perf(t+": Executing clearOfflineData for "+this.name+" object"),kony.sdk.KNYObj.clearOfflineData(this,e,n,o)}},kony.sdk.KNYObjSvc=function(e){var n="KNYObjSvc";kony.sdk.logsdk.debug(n+": Creating KNYObjSvc with name "+e);var o=kony.sdk.KNYObjSvc.createSDKObjectServiceSync(e);this.name=e,this.getSdkObjectServiceSync=function(){return o},this.getSdkObjectByName=function(e){kony.sdk.logsdk.perf(n+": Executing Creating KNYObj with name "+e+" and objectServiceName "+this.name);var o=new kony.sdk.KNYObj(e,this.name);return kony.sdk.logsdk.perf(n+": Executing finished for creation of KNYObj with name "+e+" and objectServiceName "+this.name),o},this.startSync=function(e,o,t,s){kony.sdk.logsdk.perf(n+": Executing Starting sync on "+this.name+" object service"),kony.sdk.logsdk.perf(n+": Executing Refreshing claims token"),kony.sdk.claimsRefresh(function(){kony.sdk.logsdk.perf(n+": Executing Finished Refresh claims token : status SUCCESS");var r=kony.sdk.getCurrentInstance().currentClaimToken;kony.sdk.OfflineObjects.setToken(r),kony.sdk.OfflineObjects.setReportingParams(kony.sdk.getReportingParamsForOfflineObjects()),kony.sdk.KNYObjSvc.startSync(this,e,o,t,s)}.bind(this),(function(e){kony.sdk.logsdk.error(n+": Executing Finished Refresh claims token : status FAILED"),t(e)}))},this.rollback=function(e,o){kony.sdk.logsdk.perf(n+": Executing Rollback on "+this.name+" object service"),kony.sdk.KNYObjSvc.rollback(this,e,o)},this.cancelSync=function(e,o,t){kony.sdk.logsdk.perf(n+": Executing Cancel for "+this.name+" object service"),kony.sdk.KNYObjSvc.cancelSync(this,e,o,t)},this.clearOfflineData=function(e,o,t){kony.sdk.logsdk.perf(n+": Executing Clearing Offline Data for "+this.name+" object service."),kony.sdk.KNYObjSvc.clearOfflineData(this,e,o,t)}},kony.sdk.OfflineObjects=function(e){var n="OfflineObjects";kony.sdk.logsdk.trace(n+": Creating OfflineObjects"),this.setup=function(o,t,s){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.setup()"),kony.sdk.logsdk.perf(n+": Executing Refreshing claims token"),kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.perf(n+": Executing Finished Refresh claims token : status SUCCESS");var r=kony.sdk.getCurrentInstance().currentClaimToken;kony.sdk.OfflineObjects.setToken(r),kony.sdk.OfflineObjects.setReportingParams(kony.sdk.getReportingParamsForOfflineObjects()),kony.sdk.OfflineObjects.setup(e,o,t,s)}),(function(){kony.sdk.logsdk.error(n+": Executing Finished Refresh claims token : status FAILED. Setup offline started."),kony.sdk.OfflineObjects.setup(e,o,t,s)}))},this.incrementalSetup=function(e,o,t){kony.sdk.logsdk.perf(n+": Executing OfflineObjects incrementalSetup"),e||(e={}),e.incrementalSetup=!0,this.setup(e,o,t)},this.drop=function(e,o,t){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.drop()"),kony.sdk.OfflineObjects.drop(e,o,t)},this.reset=function(o,t,s){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.reset"),kony.sdk.logsdk.perf(n+": Executing Refresh claims token"),kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.perf(n+": Executing Finished Refresh claims token : status SUCCESS");var r=kony.sdk.getCurrentInstance().currentClaimToken;kony.sdk.OfflineObjects.setToken(r),kony.sdk.OfflineObjects.setReportingParams(kony.sdk.getReportingParamsForOfflineObjects()),kony.sdk.OfflineObjects.reset(e,o,t,s)}),(function(e){kony.sdk.logsdk.error(n+": Executing Finished Refresh claims token : status FAILED"),s(e)}))},this.rollback=function(e,o){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.rollback()"),kony.sdk.OfflineObjects.rollback(e,o)},this.executeSelectQuery=function(e,o,t){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.executeSelectQuery()"),kony.sdk.OfflineObjects.executeSelectQuery(e,o,t)},this.startSync=function(e,o,t,s){kony.sdk.logsdk.perf(n+": Executing OfflineObjects.startSync"),kony.sdk.logsdk.perf(n+": Executing Refresh claims"),kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.perf(n+": Executing Finished Refresh claims token : status SUCCESS");var r=kony.sdk.getCurrentInstance().currentClaimToken;kony.sdk.OfflineObjects.setToken(r),kony.sdk.OfflineObjects.setReportingParams(kony.sdk.getReportingParamsForOfflineObjects()),kony.sdk.OfflineObjects.startSync(e,o,t,s)}),(function(e){kony.sdk.logsdk.error(n+"Executing Finished Application Sync : Refresh claims token : status FAILED"),t(e)}))}},kony.sdk.OfflineObjects.BinaryStatus={pending:2,completed:4,errored:8},kony.sdk&&(kony.sdk.binary={}),kony.sdk.binary.constants={ENDPOINT_URL:"endpointUrl",DOMAIN:"domain",RELATIVE_PATH:"relativepath",URL:"URL",HEADERS:"headers",METHOD:"method",UPLOAD_MODE:"uploadMode",BLOB:"blob",FILE_CONTENT:"${fileContent}",FILE:"file",HTTP_STATUS_CODE:"httpStatusCode",VALID_HTTP_REDIRECT_CODE:"309",UPLOAD_MODE_BINARY:"binary",UPLOAD_MODE_MULTIPART:"multipart",UPLOAD_PARAMS:"uploadParams",BLOB_ID:"BlobID",CONTEXT:"Context",SESSION_ID:"SessionID",BLOB_OBJECT:"BlobObject",ERROR:"Error",FILE_DETAILS:"FileDetails",HTTP_METHOD_PUT:"PUT",HTTP_METHOD_POST:"POST"},kony.sdk.binary.addMandatoryInternalOptions=function(e){return kony.sdk.isNullOrUndefined(e)&&(e={}),e[kony.sdk.binary.constants.DOMAIN]=konyRef.sessionReportingURL.split("/IST")[0],kony.sdk.isNullOrUndefined(konyRef.currentClaimToken)||(e[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken),e},kony.sdk.binary.validateUploadParams=function(e){return kony.sdk.util.isJsonObject(e)?kony.sdk.util.isValidString(e[kony.sdk.constants.FILE_NAME])?kony.sdk.isNullOrUndefined(e[kony.sdk.constants.FILE_OBJECT])?(kony.sdk.logsdk.error("### kony.sdk.binary.validateUploadParams :: Error: fileObject is not provided - please provide"),kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_params_instance,"fileObject is not provided "+kony.sdk.errormessages.invalid_params_instance)):e[kony.sdk.constants.FILE_OBJECT].constructor!==File?(kony.sdk.logsdk.error("### kony.sdk.binary.validateUploadParams :: Error: fileObject : expected File Object and found "+kony.sdk.util.type(e[kony.sdk.constants.FILE_OBJECT])),kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_params_instance,"Invalid datatype of fileObject "+kony.sdk.util.type(e[kony.sdk.constants.FILE_OBJECT])+" "+kony.sdk.errormessages.invalid_params_instance)):null:(kony.sdk.logsdk.error("### kony.sdk.binary.validateUploadParams :: Error: fileName : expected string not found"),kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_params_instance,"Invalid datatype of fileName "+kony.sdk.util.type(e[kony.sdk.constants.FILE_NAME])+" "+kony.sdk.errormessages.invalid_params_instance)):(kony.sdk.logsdk.error("### kony.sdk.binary.validateUploadParams :: Error: Upload params should be supplied as valid JSON object"),kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_params_instance,"Invalid datatype of uploadParams "+kony.sdk.util.type(e)+" "+kony.sdk.errormessages.invalid_params_instance))},kony.sdk.binary.getRequestParamsFromTemplate=function(e,n,o){var t={},s=kony.sdk.util.populateTemplate(JSON.stringify(e),n),r=JSON.parse(s[kony.sdk.constants.PROCESSED_TEMPLATE]);t[kony.sdk.constants.PROCESSED_TEMPLATE]=s[kony.sdk.constants.PROCESSED_TEMPLATE],t[kony.sdk.constants.MISSING_VARIABLES]=s[kony.sdk.constants.MISSING_VARIABLES];var i=kony.sdk.binary.addMandatoryInternalOptions(o),k={};r.hasOwnProperty(kony.sdk.binary.constants.HEADERS)&&kony.sdk.util.isJsonObject(r[kony.sdk.binary.constants.HEADERS])&&Object.keys(r[kony.sdk.binary.constants.HEADERS]>0)&&(k=r[kony.sdk.binary.constants.HEADERS]);var a="";if(r.hasOwnProperty(kony.sdk.binary.constants.ENDPOINT_URL))a=r[kony.sdk.binary.constants.ENDPOINT_URL];else if(r.hasOwnProperty(kony.sdk.binary.constants.DOMAIN)&&r.hasOwnProperty(kony.sdk.binary.constants.RELATIVE_PATH)){var d="";"#middlewaredomain"===r[kony.sdk.binary.constants.DOMAIN]?(k[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=i[kony.sdk.constants.KONY_AUTHORIZATION_HEADER],d=i[kony.sdk.binary.constants.DOMAIN]):d=r[kony.sdk.binary.constants.DOMAIN],a=d+r[kony.sdk.binary.constants.RELATIVE_PATH]}return t[kony.sdk.binary.constants.URL]=a,t[kony.sdk.binary.constants.METHOD]=r[kony.sdk.binary.constants.METHOD],t[kony.sdk.binary.constants.HEADERS]=k,t},kony.sdk.binary.getBinaryData=function(e,n,o,t,s,r,i,k){if(kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.ENDPOINT_URL])&&kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.DOMAIN])&&kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.RELATIVE_PATH]))kony.sdk.verifyAndCallClosure(i,"endpointUrl or domain and relative path is required in order to download a file");else{var a=(new Date).getTime().toString();kony.sdk.verifyAndCallClosure(t,{BlobID:a,Context:e});var d=kony.sdk.binary.getRequestParamsFromTemplate(o,e,k),l=JSON.parse(d[kony.sdk.constants.PROCESSED_TEMPLATE]);if(l[kony.sdk.binary.constants.HTTP_STATUS_CODE]==kony.sdk.binary.constants.VALID_HTTP_REDIRECT_CODE)kony.sdk.isNullOrUndefined(k)&&(k={}),k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,(new konyNetworkProvider).get(d[kony.sdk.binary.constants.URL],null,d[kony.sdk.binary.constants.HEADERS],(function(n){var o={};kony.sdk.isNullOrUndefined(e.fileId)?o[kony.sdk.binary.constants.BLOB_ID]=a:o[kony.sdk.binary.constants.BLOB_ID]=e.fileId,o[kony.sdk.binary.constants.BLOB_OBJECT]=n,o[kony.sdk.binary.constants.CONTEXT]=e,kony.sdk.verifyAndCallClosure(r,o)}),(function(n){var o={};kony.sdk.isNullOrUndefined(e.fileId)?o[kony.sdk.binary.constants.BLOB_ID]=a:o[kony.sdk.binary.constants.BLOB_ID]=e.fileId,o[kony.sdk.binary.constants.CONTEXT]=e,o[kony.sdk.binary.constants.ERROR]=n,kony.sdk.verifyAndCallClosure(i,o)}),null,k);else kony.sdk.verifyAndCallClosure(i,"Unhandled httpStatusCode received: "+l[kony.sdk.binary.constants.HTTP_STATUS_CODE])}},kony.sdk.binary.uploadBinaryData=function(e,n,o,t,s,r){(new konyNetworkProvider).post(e[kony.sdk.binary.constants.URL],e[kony.sdk.binary.constants.UPLOAD_PARAMS],e[kony.sdk.binary.constants.HEADERS],(function(o){if(kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.ENDPOINT_URL])&&kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.DOMAIN])&&kony.sdk.isNullOrUndefined(o[kony.sdk.binary.constants.RELATIVE_PATH]))kony.sdk.verifyAndCallClosure(s,"endpointUrl or domain and relative path is required in order to upload a file");else{var i=(new Date).getTime().toString();kony.sdk.verifyAndCallClosure(n,{SessionID:i,Context:e[kony.sdk.binary.constants.UPLOAD_PARAMS]});var k=kony.sdk.binary.getRequestParamsFromTemplate(o,e[kony.sdk.binary.constants.UPLOAD_PARAMS],r),a=JSON.parse(k[kony.sdk.constants.PROCESSED_TEMPLATE]);if(a[kony.sdk.binary.constants.HTTP_STATUS_CODE]==kony.sdk.binary.constants.VALID_HTTP_REDIRECT_CODE){var d,l,c=kony.sdk.util.getValueForKeyAndIgnoreCase(a,"requestBody");if(a[kony.sdk.binary.constants.UPLOAD_MODE].toLowerCase()===kony.sdk.binary.constants.UPLOAD_MODE_BINARY)c===kony.sdk.binary.constants.FILE_CONTENT?d=e[kony.sdk.constants.FILE_OBJECT]:kony.sdk.isValidString(c)&&-1!==c.indexOf(kony.sdk.binary.constants.FILE_CONTENT)?kony.sdk.verifyAndCallClosure(s,"Received request body structure is not supported"):kony.sdk.verifyAndCallClosure(s,"Unhandled request body format received");else if(a[kony.sdk.binary.constants.UPLOAD_MODE].toLowerCase()===kony.sdk.binary.constants.UPLOAD_MODE_MULTIPART){var y=new kony.net.FormData({isMultiPart:!0});for(var u in c)c.hasOwnProperty(u)&&kony.sdk.util.isJsonObject(c)&&(c[u]===kony.sdk.binary.constants.FILE_CONTENT?l=e[kony.sdk.constants.FILE_OBJECT]:kony.sdk.util.isJsonObject(c[u])?y.append(u,JSON.stringify(c[u])):kony.sdk.verifyAndCallClosure(s,"Unhandled request body format received"));y.append(kony.sdk.binary.constants.FILE,l),d=y}kony.sdk.isNullOrUndefined(r)&&(r={}),r[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0;var g=new konyNetworkProvider;k[kony.sdk.binary.constants.METHOD].toLocaleUpperCase()===kony.sdk.binary.constants.HTTP_METHOD_POST&&g.post(k[kony.sdk.binary.constants.URL],d,k[kony.sdk.binary.constants.HEADERS],(function(n){var o={};o[kony.sdk.binary.constants.SESSION_ID]=i,o[kony.sdk.binary.constants.CONTEXT]=e[kony.sdk.binary.constants.UPLOAD_PARAMS],o[kony.sdk.binary.constants.FILE_DETAILS]=n,kony.sdk.verifyAndCallClosure(t,o)}),(function(n){var o={};o[kony.sdk.binary.constants.SESSION_ID]=i,o[kony.sdk.binary.constants.CONTEXT]=e[kony.sdk.binary.constants.UPLOAD_PARAMS],o[kony.sdk.binary.constants.ERROR]=n,kony.sdk.verifyAndCallClosure(s,o)}),a[kony.sdk.binary.constants.UPLOAD_MODE].toLowerCase(),r)}else kony.sdk.verifyAndCallClosure(s,"Unhandled httpStatusCode received: "+a[kony.sdk.binary.constants.HTTP_STATUS_CODE])}}),s,null,r)},void 0===kony.sdk.metric&&(kony.sdk.metric={}),kony.sdk.metric.eventFlowTag="",kony.sdk.metric.eventConfig={confType:"BUFFER",eventBufferAutoFlushCount:kony.sdk.metric.eventBufferAutoFlushValue,eventBufferMaxCount:kony.sdk.metric.eventBufferMaxValue},kony.sdk.metric.eventBufferMaxValue=1e3,kony.sdk.metric.eventBufferAutoFlushValue=15,kony.sdk.metric.characterLengthLimit=256,kony.sdk.metric.reportEventBufferArray=[],kony.sdk.metric.reportEventBufferBackupArray=[],kony.sdk.metric.retrievedDS=!1,kony.sdk.metric.eventBufferCount=0,kony.sdk.metric.eventTypeMap={formentry:"FormEntry",touch:"Touch",servicecall:"ServiceCall",gesture:"Gesture",orientation:"Orientation",custom:"Custom"},kony.sdk.metric.errorCodeMap={1e3:!0,1011:!0,1012:!0,1014:!0,1015:!0,1016:!0},kony.sdk.metric.setEventFlowTag=function(e){if(kony.sdk.isNullOrUndefined(e))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for event flow tag");if(!(e.length<=kony.sdk.metric.characterLengthLimit))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is "+kony.sdk.metric.characterLengthLimit+" characters");kony.sdk.metric.eventFlowTag=e},kony.sdk.metric.clearEventFlowTag=function(){kony.sdk.metric.eventFlowTag=""},kony.sdk.metric.getEventFlowTag=function(){return kony.sdk.metric.eventFlowTag},kony.sdk.metric.setEventConfig=function(e,n,o){if(kony.sdk.isNullOrUndefined(e))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Config Type can not be null");if("BUFFER"!==(e=e.toUpperCase()))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for config type");if(kony.sdk.metric.eventConfig.confType=e,kony.sdk.isNullOrUndefined(o)||"number"!=typeof o||!(o>0))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferMaxCount has to be a Number and greater than 0");if(kony.sdk.metric.eventConfig.eventBufferMaxCount=o,!(!kony.sdk.isNullOrUndefined(n)&&"number"==typeof n&&n>0&&n<=o))throw n>=o?(kony.sdk.metric.eventConfig.eventBufferMaxCount=1e3,new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferAutoFlushCount can not be greater than eventBufferMaxCount")):new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferAutoFlushCount has to be a Number and greater than 0");kony.sdk.metric.eventConfig.eventBufferAutoFlushCount=n},kony.sdk.metric.reportEvent=function(e,n,o,t,s){if(0===kony.sdk.metric.reportEventBufferBackupArray.length&&kony.sdk.metric.readFromDS(),kony.sdk.metric.eventBufferCount=kony.sdk.metric.reportEventBufferBackupArray.length+kony.sdk.metric.reportEventBufferArray.length,kony.sdk.metric.eventBufferCount===kony.sdk.metric.eventConfig.eventBufferMaxCount)throw new Exception(kony.sdk.errorConstants.DATA_STORE_EXCEPTION,"Reached maximum limit to store events");var r={};if(r.ts=kony.sdk.formatCurrentDate(new Date),e=e.toLowerCase(),kony.sdk.isNullOrUndefined(kony.sdk.metric.eventTypeMap[e]))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for event type");if(r.evttype=kony.sdk.metric.eventTypeMap[e],kony.sdk.isNullOrUndefined(n))r.evtSubType="";else{if(!(n.length<=kony.sdk.metric.characterLengthLimit))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is "+kony.sdk.metric.characterLengthLimit+" characters");r.evtSubType=n}if(kony.sdk.isNullOrUndefined(o))r.formID=kony.application.getCurrentForm().id;else{if(!(o.length<=kony.sdk.metric.characterLengthLimit))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is "+kony.sdk.metric.characterLengthLimit+" characters");r.formID=o}if(kony.sdk.isNullOrUndefined(t))r.widgetID="";else{if(!(t.length<=kony.sdk.metric.characterLengthLimit))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is "+kony.sdk.metric.characterLengthLimit+" characters");r.widgetID=t}if(kony.sdk.isNullOrUndefined(s))r.flowTag=kony.sdk.metric.getEventFlowTag();else{if(!(s.length<=kony.sdk.metric.characterLengthLimit))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is "+kony.sdk.metric.characterLengthLimit+" characters");r.flowTag=s}r.SID=kony.ds.read(kony.sdk.constants.KONYUUID)[0],kony.sdk.metric.reportEventBufferArray.push(r),kony.sdk.metric.reportEventBufferArray.length%kony.sdk.metric.eventConfig.eventBufferAutoFlushCount==0&&kony.sdk.metric.flushEvents()},kony.sdk.metric.flushEvents=function(){if(0===kony.sdk.metric.reportEventBufferBackupArray.length&&kony.sdk.metric.readFromDS(),0!==kony.sdk.metric.reportEventBufferBackupArray.length||0!==kony.sdk.metric.reportEventBufferArray.length){var e=kony.sdk.getPayload(kony.sdk.getCurrentInstance()),n={};0!==kony.sdk.metric.reportEventBufferArray.length&&kony.sdk.metric.pushEventsToBufferArray();var o={};o[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,n.httpheaders=o,e.events=kony.sdk.metric.reportEventBufferBackupArray,e.svcid="SendEvents",e.rsid=kony.sdk.metric.reportEventBufferBackupArray[0].SID,n[kony.sdk.constants.REPORTING_PARAMS]=JSON.stringify(e),kony.net.invokeServiceAsync(kony.sdk.currentInstance.customReportingURL,n,(function(e,n){400===e?0==n.opstatus?kony.sdk.metric.clearBufferEvents():kony.sdk.metric.errorCodeMap[n.opstatus]?kony.sdk.metric.saveInDS():kony.sdk.metric.clearBufferEvents():300===e&&kony.sdk.metric.saveInDS()}))}else kony.sdk.logsdk.warn("There are no events to flush")},kony.sdk.metric.saveInDS=function(){if(!kony.sdk.isNullOrUndefined(kony.sdk.metric.reportEventBufferBackupArray)&&kony.sdk.metric.reportEventBufferBackupArray.length>0){var e=[];e.push(JSON.stringify(kony.sdk.metric.reportEventBufferBackupArray)),kony.ds.save(e,"konyMetricsBuffer"),kony.sdk.metric.reportEventBufferBackupArray=[]}},kony.sdk.metric.clearBufferEvents=function(){kony.sdk.metric.reportEventBufferBackupArray=[],kony.ds.remove("konyMetricsBuffer")},kony.sdk.metric.readFromDS=function(){var e=kony.ds.read("konyMetricsBuffer");if(null!==e){var n=[];n.push(JSON.parse(e[0])),kony.sdk.metric.reportEventBufferBackupArray.push.apply(kony.sdk.metric.reportEventBufferBackupArray,n)}},kony.sdk.metric.pushEventsToBufferArray=function(){kony.sdk.metric.reportEventBufferBackupArray.push.apply(kony.sdk.metric.reportEventBufferBackupArray,kony.sdk.metric.reportEventBufferArray),kony.sdk.metric.reportEventBufferArray=[]},kony.sdk.metric.getEventsInBuffer=function(){var e=kony.ds.read("konyMetricsBuffer"),n=[];return kony.sdk.isNullOrUndefined(e)||n.push(JSON.parse(e[0])),0!==kony.sdk.metric.reportEventBufferArray.length&&n.push.apply(n,kony.sdk.metric.reportEventBufferArray),0!==n.length?n:null},kony.logger=kony.logger||{},kony.logger.createNewLogger=function(e,n){parseConfig=function(e){return e=null==e?{}:e.getLoggerConfig(),"undefined"!=typeof appConfig&&(appDetails={appID:appConfig.appId,appVersion:appConfig.appVersion,sessionID:kony.license.getSessionId()},e.appInfo=appDetails,kony.sdk.isNullOrUndefined(e.logFilterConfig)&&(e.logFilterConfig={},e.logFilterConfig.logLevel=kony.logger.currentLogLevel.value)),e},logMessage=function(e,n,o,t){logMessageInFFI=function(e,n,o){switch(n){case kony.logger.logLevel.TRACE:e.logTrace(o);break;case kony.logger.logLevel.DEBUG:e.logDebug(o);break;case kony.logger.logLevel.INFO:e.logInfo(o);break;case kony.logger.logLevel.PERF:e.logPerf(o);break;case kony.logger.logLevel.WARN:e.logWarning(o);break;case kony.logger.logLevel.ERROR:e.logError(o);break;case kony.logger.logLevel.FATAL:e.logFatal(o);break;default:return void kony.print("Implementation not found for the specified log level "+n)}},formatLineInfo=function(e){var n=e.lastIndexOf(":"),o=e.lastIndexOf(":",n-1);return e.substring(o+1,n)},formatFileAndLineInfoMeta=function(e){var n="";return kony.sdk.isNullOrUndefined(e)||(n=(n=e.replace("(","")).replace(")","")),n},formatFileInfo=function(e){var n=e.lastIndexOf(":"),o=e.lastIndexOf(":",n-1),t=(e=e.substring(0,o)).lastIndexOf("/");return e=t>0?e.substring(t+1,e.length):e},formatMethodInformation=function(e){if(e.length>1)return e[e.length-2]},formatCallerInformation=function(e){return kony.sdk.isNullOrUndefined(e)?[]:(formattedCallerInformation=e.split(s),formattedCallerInformation)},getCallerInformationFromCallStack=function(e,n){var o=r+n;return e.length>=o?e[o]:null},generateCallerInformation=function(e){var n,o=new Error;n="stack"in o?o.stack.split("\n"):null!=(n=function(){try{throw new Error("")}catch(e){return e.stack}}())?n.split("\n"):[];var t=getCallerInformationFromCallStack(n,e);return formatCallerInformation(t)},parseMessage=function(e,n,o,t){var s=kony.logger.isNativeLoggerAvailable()?KonyLogger.getLogLevel():kony.logger.currentLogLevel.value;if(n.value>=s){var r={};t=void 0===t?"":t,kony.logger.isValidJSTable(t)&&(t=JSON.stringify(t,null," ")),r.message=o+t,r.callerInformation=generateCallerInformation(e.getIndirectionLevel()),r.methodName=formatMethodInformation(r.callerInformation);var i=formatFileAndLineInfoMeta(r.callerInformation.pop());if(r.fileName=formatFileInfo(i),r.lineNo=formatLineInfo(i),kony.logger.isNativeLoggerAvailable())if(e.NativeLoggerObject||(e.NativeLoggerObject=new KonyLogger.InitializeLogger(e.loggerName),KonyLogger.setConfig(e.config)),e.NativeLoggerObject)logMessageInFFI(e.NativeLoggerObject,n,r);else{var k=(new Date).toLocaleDateString(),a=(new Date).toLocaleTimeString(),d=n.code,l="["+e.loggerName+"]["+d+"]["+k+" "+a+"]["+r.fileName+"]["+r.methodName+"]["+r.lineNo+"] : "+r.message;kony.print(l)}else{k=(new Date).toLocaleDateString(),a=(new Date).toLocaleTimeString(),d=n.code,l="["+e.loggerName+"]["+d+"]["+k+" "+a+"]["+r.fileName+"]["+r.methodName+"]["+r.lineNo+"] : "+r.message;kony.print(l)}}},parseMessage(e,n,o,t)};var o=kony.logger.createLoggerObject(e,n);if(null!==o.config&&!0===o.config.overrideConfig)for(var t in kony.logger.logLevel)if(kony.logger.logLevel.hasOwnProperty(t)&&kony.logger.logLevel[t].value==o.config.logFilterConfig.logLevel){kony.logger.currentLogLevel=kony.logger.logLevel[t];break}var s=" ",r=5,i=kony.os.deviceInfo().category;if(kony.sdk.util.isValidString(i))switch(i=i.toLowerCase()){case"ie":r+=1;break;case"safari":case"firefox":s="@",r+=-1}return kony.logger.isNativeLoggerAvailable()&&(o.NativeLoggerObject=new KonyLogger.InitializeLogger(e),KonyLogger.setConfig(o.config)),o},kony.logger.appLogger=kony.logger.appLoggerInitialisation(),kony.sdk.prototype.getIntegrationService=function(e){if(!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+"integration service :"+e);var n=kony.sdk.getCurrentInstance();if(!kony.sdk.skipAnonymousCall&&!this.currentClaimToken&&!n.isAnonymousProvider)throw new Exception(kony.sdk.errorConstants.AUTH_FAILURE,"Valid claims token is not found, login using identity service before performing an operation on this integration service :"+e);if(null!=this.integsvc&&null!=this.integsvc[e])return kony.sdk.logsdk.debug("found integration service"+this.integsvc[e]),new IntegrationService(this,e);throw new Exception(kony.sdk.errorConstants.INTEGRATION_FAILURE,"Integration service is not found or invalid :"+e)},kony.sdk.claimsRefreshSync=function(){var e=kony.sdk.getCurrentInstance(),n=new konyNetworkProvider,o=function(){var n=e.getIdentityService("$anonymousProvider").anonymousLoginSync(null);return n&&"{}"==JSON.stringify(n)?{message:"success"}:kony.sdk.error.getAuthErrObj(n)};if(null===e.currentClaimToken)return kony.sdk.logsdk.info("claims Token is Unavialable"),e.isAnonymousProvider?o():kony.sdk.error.getNullClaimsTokenErrObj();if(e.claimTokenExpiry&&(new Date).getTime()>e.claimTokenExpiry){if(e.isAnonymousProvider)return o();kony.sdk.logsdk.info("claims token has expired. fetching new token..");var t=stripTrailingCharacter(e.rec.url,"/")+"/claims";if(kony.sdk.logsdk.debug("service url is "+t),null===e.currentRefreshToken)return kony.sdk.error.getNullRefreshTokenErrObj();var s=kony.sdk.getDefaultHeaders();s[kony.sdk.constants.AUTHORIZATION_HEADER]=e.currentRefreshToken,s[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED;var r=n.postSync(t,{},s);return 0==r.opstatus?(kony.sdk.logsdk.info("refresh success..acquiring new tokens"),kony.sdk.processClaimsSuccessResponse(r,e,!1)):(kony.sdk.logsdk.info("failed to acquire refresh token"),kony.sdk.processClaimsErrorResponse(r,e,!1))}return{message:"success"}},kony.sdk.prototype.getMessagingService=function(){if(!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Messaging service.");return KNYMessagingService=kony.sdk.isNullOrUndefined(KNYMessagingService)?new MessagingService(this):KNYMessagingService,this.messagingsvc.url===KNYMessagingService.getUrl()&&this.messagingsvc.appId===KNYMessagingService.getKmsAppId()||(KNYMessagingService=new MessagingService(this)),KNYMessagingService};var KNYGeoBoundariesOptions={};function MessagingService(e){var n,o=e.messagingsvc.url,t=e.messagingsvc.appId,s=new konyNetworkProvider,r=t+"_KSID",i=t+"_AUTHTOKEN",k=this;geoBoundariesOptions={},this.setGeoBoundariesOptions=function(e){KNYGeoBoundariesOptions=e},this.getGeoBoundariesOptions=function(){return KNYGeoBoundariesOptions},this.getUrl=function(){return o},this.setKSID=function(e){kony.sdk.dataStore.setItem(r,e),n=e},this.getKSID=function(){return n||(n=kony.sdk.dataStore.getItem(r)),n},this.setAuthToken=function(e){kony.sdk.dataStore.setItem(i,e),e},this.getAuthToken=function(e){return e&&e[kony.sdk.constants.AUTH_TOKEN]?e[kony.sdk.constants.AUTH_TOKEN]:kony.sdk.dataStore.getItem(i)};this.setKmsAppId=function(e){t=e},this.getKmsAppId=function(){return t},n=k.getKSID(),k.getAuthToken();var a=function(e,n,r,i,a,d,l){var c=o+"/subscribers",y={sid:r,appId:t,ufid:i,osType:e,deviceId:n};null!=a&&null!=a&&(y[kony.sdk.constants.AUTH_TOKEN]=a);var u={subscriptionService:{subscribe:y}},g=kony.sdk.getDefaultHeaders();g[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var f=u,p={disableIntegrity:!0};kony.sdk.logsdk.perf("Executing registerForMessagingService's network call"),s.post(c,f,g,(function(e){kony.sdk.logsdk.perf("Executing finished registerForMessagingService's network success"),k.setKSID(e.id),k.setAuthToken(a),kony.sdk.verifyAndCallClosure(d,e)}),(function(e,n,o){kony.sdk.logsdk.perf("Executing finished registerForMessagingService's network failure"),kony.sdk.logsdk.error("ERROR: Failed to register device for KMS");var t={};t.data=e,t.status=n,t.error=o,kony.sdk.verifyAndCallClosure(l,t)}),kony.sdk.constants.CONTENT_TYPE_JSON,p)};this.register=function(e,n,o,t,s,r,i){kony.sdk.logsdk.perf("Executing register");var d;if(kony.sdk.isNullOrUndefined(o))throw kony.sdk.logsdk.perf("Executing finished register finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid pnsToken/sId, it cannot be null");if(kony.sdk.isNullOrUndefined(e))throw kony.sdk.logsdk.perf("Executing finished register finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid osType, it cannot be null");if(kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished register finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid deviceId, it cannot be null");if(kony.sdk.isNullOrUndefined(t))throw kony.sdk.logsdk.perf("Executing finished register finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid email, it cannot be null");d=k.getAuthToken(i),a(e,n,o,t,d,(function(e){kony.sdk.logsdk.perf("Executing finished register finished with success"),c(i),kony.sdk.verifyAndCallClosure(s,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished register finished with failure"),kony.sdk.logsdk.error("Register :: Register for messaging service failed with error",e),kony.sdk.verifyAndCallClosure(r,e)}))},this.registerWithAuthToken=function(e,n,o,t,s,r,i){if(kony.sdk.logsdk.perf("Executing registerWithAuthToken"),kony.sdk.isNullOrUndefined(o))throw kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid pnsToken/sId,it cannot be null");if(kony.sdk.isNullOrUndefined(e))throw kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid osType, it cannot be null");if(kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid deviceId, it cannot be null");if(kony.sdk.isNullOrUndefined(t))throw kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid email, it cannot be null");if(kony.sdk.isNullOrUndefined(s))throw kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid authToken, it cannot be null");a(e,n,o,t,s,(function(e){kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with success"),kony.sdk.verifyAndCallClosure(r,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished registerWithAuthToken finished with failure"),kony.sdk.verifyAndCallClosure(i,e)}))};var d=function(e,n,t){var a=o+"/subscribers",d={ksid:k.getKSID()};null!=e&&null!=e&&(d[kony.sdk.constants.AUTH_TOKEN]=e);var l={subscriptionService:{unsubscribe:d}},c=kony.sdk.getDefaultHeaders();c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var y=l;kony.sdk.logsdk.info("unsubscribe uri:"+a);var u={};u[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing unregisterFromMessagingService's network call"),s.post(a,y,c,(function(e){kony.sdk.logsdk.perf("Executing finished unregisterFromMessagingService's network success"),kony.sdk.dataStore.removeItem(r),kony.sdk.dataStore.removeItem(i),kony.sdk.verifyAndCallClosure(n,e)}),(function(e,n,o){kony.sdk.logsdk.perf("Executing finished unregisterFromMessagingService's network failure"),kony.sdk.logsdk.error("ERROR: Failed to unregister device for KMS");var s={};s.data=e,s.status=n,s.error=o,kony.sdk.verifyAndCallClosure(t,s)}),kony.sdk.constants.CONTENT_TYPE_JSON,u)};this.unregister=function(e,n,o){kony.sdk.logsdk.perf("Executing unregister");var t,s=k.getKSID();if(null==s)throw kony.sdk.logsdk.perf("Executing finished unregister with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"KSID not available, Register and try again.");t=k.getAuthToken(o),d(t,(function(n){kony.sdk.logsdk.perf("Executing finished unregister with success"),e(n)}),(function(e){kony.sdk.logsdk.perf("Executing finished unregister with failure"),n(e)}))},this.unregisterWithAuthToken=function(e,n,o){kony.sdk.logsdk.perf("Executing unregisterWithAuthToken");var t=k.getKSID();if(null==t)throw kony.sdk.logsdk.perf("Executing finished unregisterWithAuthToken with execption"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"KSID not available, Register and try again.");if(null==e)throw kony.sdk.logsdk.perf("Executing finished unregisterWithAuthToken with execption"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid authToken.");d(e,(function(e){kony.sdk.logsdk.perf("Executing finished unregisterWithAuthToken with success"),n(e)}),(function(e){kony.sdk.logsdk.perf("Executing finished unregisterWithAuthToken with failure"),o(e)}))},this.fetchAllMessages=function(e,n,t,r,i){kony.sdk.logsdk.perf("Executing fetchAllMessages");var a=k.getKSID();if(null==a)throw new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"KSID not available, Register and try again.");var d=o+"/messages/fetch",l={ksid:a,startElement:e,elementsPerPage:n};l[kony.sdk.constants.AUTH_TOKEN]=k.getAuthToken(i);var y=kony.sdk.getDefaultHeaders();y[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var u=l,g={};g[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing fetchAllMessages's network call"),s.post(d,u,y,(function(e){kony.sdk.logsdk.perf("Executing finished fetchAllMessages's network call with success"),c(i),kony.sdk.verifyAndCallClosure(t,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished fetchAllMessages's network call with failure"),kony.sdk.logsdk.error("FetchAllMessages :: FetchAllMessages for messaging service failed with error",e),kony.sdk.verifyAndCallClosure(r,e)}),kony.sdk.constants.CONTENT_TYPE_JSON,g)};var l=function(e,n,t,r,i,a){kony.sdk.logsdk.perf("Executing updateGeoLocationForMessagingService");var d=o+"/location",l={ksid:k.getKSID(),latitude:e,longitude:n};"string"==typeof t&&(l.locname=t),null!=r&&null!=r&&(l[kony.sdk.constants.AUTH_TOKEN]=r);var c=kony.sdk.getDefaultHeaders();c[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var y=l,u={};u[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing updateGeoLocationForMessagingService's network call"),s.post(d,y,c,(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocationForMessagingService with network success"),k.setAuthToken(r),kony.sdk.verifyAndCallClosure(i,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocationForMessagingService with network failure"),kony.sdk.logsdk.error("UpdateGeoLocation :: UpdateGeoLocation for messaging service failed with error",e),kony.sdk.verifyAndCallClosure(a,e)}),kony.sdk.constants.CONTENT_TYPE_JSON,u)};this.updateGeoLocation=function(e,n,o,t,s,r){kony.sdk.logsdk.perf("Executing updateGeoLocation");var i,a=k.getKSID();if(null==a)throw kony.sdk.logsdk.perf("Executing finished updateGeoLocation with execption"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"KSID not available, Register and try again.");if(null==e)throw kony.sdk.logsdk.perf("Executing finished updateGeoLocation with execption"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid latitude.");if(null==n)throw kony.sdk.logsdk.perf("Executing finished updateGeoLocation with execption"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid longitude.");i=k.getAuthToken(r),l(e,n,o,i,(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocation with success"),t(e)}),(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocation with failure"),s(e)}))},this.updateGeoLocationWithAuthToken=function(e,n,o,t,s,r){kony.sdk.logsdk.perf("Executing updateGeoLocationWithAuthToken");var i=k.getKSID();if(null==i)throw kony.sdk.logsdk.perf("Executing finshed updateGeoLocationWithAuthToken with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"KSID not available, Register and try again.");if(null==e)throw kony.sdk.logsdk.perf("Executing finshed updateGeoLocationWithAuthToken with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid latitude.");if(null==n)throw kony.sdk.logsdk.perf("Executing finshed updateGeoLocationWithAuthToken with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid longitude.");if(null==t)throw kony.sdk.logsdk.perf("Executing finshed updateGeoLocationWithAuthToken with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid authToken.");l(e,n,o,t,(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocationWithAuthToken with success"),s(e)}),(function(e){kony.sdk.logsdk.perf("Executing finished updateGeoLocationWithAuthToken with failure"),r(e)}))},this.markMessageRead=function(e,n,t,r){if(kony.sdk.logsdk.perf("Executing markMessageRead"),null==e)throw kony.sdk.logsdk.perf("Executing finshed markMessageRead with exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid FetchId, it cannot be null");var i=kony.sdk.getDefaultHeaders();i["X-HTTP-Method-Override"]="get",i[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var a=o+"/messages/open/"+e;i[kony.sdk.constants.DEVICE_AUTHTOKEN_HEADER]=k.getAuthToken(r);var d={};d[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing markMessageRead's network call"),s.get(a,null,i,(function(e){kony.sdk.logsdk.perf("Executing finished markMessageRead with network success"),c(r),kony.sdk.verifyAndCallClosure(n,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished markMessageRead with network failure"),kony.sdk.logsdk.error("MarkMessageRead :: MarkMessageRead for messaging service failed with error",e),kony.sdk.verifyAndCallClosure(t,e)}),null,d)},this.fetchMessageContent=function(e,n,t,r){if(kony.sdk.logsdk.perf("Executing fetchMessageContent"),null==e)throw new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid FetchId, it cannot be null");var i=o+"/messages/content/"+e,a=kony.sdk.getDefaultHeaders();a[kony.sdk.constants.DEVICE_AUTHTOKEN_HEADER]=k.getAuthToken(r);var d={};d[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing fetchMessageContent's network call"),s.get(i,null,a,(function(e){kony.sdk.logsdk.perf("Executing finished fetchMessageContent with network success"),c(r),kony.sdk.verifyAndCallClosure(n,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished fetchMessageContent with network failure"),kony.sdk.logsdk.error("FetchMessageContent :: FetchMessageContent for messaging service failed with error",e),kony.sdk.verifyAndCallClosure(t,e)}),null,d)},this.subscribeAudience=function(e,t,r,i,a,d,l,y,u){if(kony.sdk.logsdk.perf("Executing subscribeAudience"),kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Register for messaging service before creating or updating");if(kony.sdk.isNullOrUndefined(e))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid first name, it cannot be null");if(kony.sdk.isNullOrUndefined(t))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid last name, it cannot be null");if(kony.sdk.isNullOrUndefined(i))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid mobile number, it cannot be null");if(kony.sdk.isNullOrUndefined(r))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid email Id, it cannot be null");if(kony.sdk.isNullOrUndefined(a))throw kony.sdk.logsdk.perf("Executing finished subscribeAudience wih an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid country, it cannot be null");!function(e,t,r,i,a,d,l,y,u){var g=o+kony.sdk.constants.SUBSCRIBE_AUDIENCE,f={ksid:n,firstName:e,lastName:t,email:r,mobileNumber:i,country:a,state:d},p=(new Date).toLocaleString("en-US",{timeZone:"UTC"});if(p=p.replace(",",""),f[kony.sdk.constants.LAST_ACTIVE_DATE]=p,!kony.sdk.isNullOrUndefined(l))for(var E in l)l.hasOwnProperty(E)&&(E===kony.sdk.constants.AUTH_TOKEN?f[E]=k.getAuthToken(l):f[E]=l[E]);var v=kony.sdk.getDefaultHeaders();v[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var O=f,h={};h[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing subscribeAudienceOrUpdate's network call"),s.post(g,O,v,(function(e){kony.sdk.logsdk.perf("Executing finished subscribeAudienceOrUpdate's network success"),c(l),kony.sdk.verifyAndCallClosure(y,e)}),(function(e,n,o){kony.sdk.logsdk.perf("Executing finished subscribeAudienceOrUpdate's network failure"),kony.sdk.logsdk.error("ERROR: Failed to create or update audience",t);var t={};t.data=e,t.status=n,t.error=o,kony.sdk.verifyAndCallClosure(u,t)}),kony.sdk.constants.CONTENT_TYPE_JSON,h)}(e,t,r,i,a,d,u,(function(e){kony.sdk.logsdk.perf("Executing finished subscribeAudience with success"),l(e)}),(function(e){kony.sdk.logsdk.perf("Executing finished subscribeAudience with failure"),y(e)}))},this.unSubscribeAudience=function(e,t,r){if(kony.sdk.logsdk.perf("Executing unSubscribeAudience"),kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished unSubscribeAudience with an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Register for messaging service before unsubscribe audience");var i=o+kony.sdk.constants.SUBSCRIBE_AUDIENCE+"/"+n,a=kony.sdk.getDefaultHeaders();a[kony.sdk.constants.HTTP_OVERRIDE_HEADER]=kony.sdk.constants.HTTP_METHOD_DELETE,a[kony.sdk.constants.DEVICE_AUTHTOKEN_HEADER]=k.getAuthToken(r);var d={};d[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing unSubscribeAudience's network call"),s.post(i,null,a,(function(n){kony.sdk.logsdk.perf("Executing finished unSubscribeAudience with network success"),c(r),kony.sdk.verifyAndCallClosure(e,n)}),(function(e){kony.sdk.logsdk.perf("Executing finished unSubscribeAudience with network failure"),kony.sdk.logsdk.error("MessagingService::unSubscribeAudience failed to unsubscribe audience",e),kony.sdk.verifyAndCallClosure(t,e)}),null,d)},this.getSubscribedAudienceDetails=function(e,t,r){if(kony.sdk.logsdk.perf("Executing getSubscribedAudienceDetails"),kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished getSubscribedAudienceDetails with an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Register for messaging service before get subscribed audience details");var i=o+kony.sdk.constants.SUBSCRIBE_AUDIENCE+"/"+n,a=kony.sdk.getDefaultHeaders();a[kony.sdk.constants.HTTP_OVERRIDE_HEADER]=kony.sdk.constants.HTTP_METHOD_GET,a[kony.sdk.constants.DEVICE_AUTHTOKEN_HEADER]=k.getAuthToken(r);var d={};d[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing getSubscribedAudienceDetails's network call"),s.get(i,null,a,(function(n){kony.sdk.logsdk.perf("Executing finished getSubscribedAudienceDetails with network success"),c(r),kony.sdk.verifyAndCallClosure(e,n)}),(function(e){kony.sdk.logsdk.perf("Executing finished getSubscribedAudienceDetails with network failure"),kony.sdk.logsdk.error("MessagingService::getSubscribedAudienceDetails failed to get audience details",e),kony.sdk.verifyAndCallClosure(t,e)}),null,d)},this.getRichPushContent=function(e,t,r,i){if(kony.sdk.logsdk.perf("Executing getRichPushContent"),kony.sdk.isNullOrUndefined(n))throw new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Register for messaging service to get rich push content");if(kony.sdk.isNullOrUndefined(e))throw new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid PushId,it cannot be null");var a=o+kony.sdk.constants.RICH_PUSH_MESSAGE+e,d=kony.sdk.getDefaultHeaders();d[kony.sdk.constants.HTTP_OVERRIDE_HEADER]=kony.sdk.constants.HTTP_METHOD_GET,d[kony.sdk.constants.DEVICE_AUTHTOKEN_HEADER]=k.getAuthToken(i);var l={};l[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing getRichPushContent's network call"),s.get(a,null,d,(function(e){kony.sdk.logsdk.perf("Executing finished getRichPushContent with network success"),c(i),kony.sdk.verifyAndCallClosure(t,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished getRichPushContent with network failure"),kony.sdk.logsdk.error("MESSAGING SERVICE :: getRichPushContent failed to get rich content with error",e),kony.sdk.verifyAndCallClosure(r,e)}),null,l)},this.updateListOfBeacons=function(e,t,r,i,a,d){if(kony.sdk.logsdk.perf("Executing updateListOfBeacons"),kony.sdk.isNullOrUndefined(n))throw kony.sdk.logsdk.perf("Executing finished updateListOfBeacons due to an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Register for messaging service before updating list of beacons");if(kony.sdk.isNullOrUndefined(e))throw kony.sdk.logsdk.perf("Executing finished updateListOfBeacons due to an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid UUID,it cannot be null");if(kony.sdk.isNullOrUndefined(t))throw kony.sdk.logsdk.perf("Executing finished updateListOfBeacons due to an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid major,it cannot be null");if(kony.sdk.isNullOrUndefined(r))throw kony.sdk.logsdk.perf("Executing finished updateListOfBeacons due to an exception"),new Exception(kony.sdk.errorConstants.MESSAGING_FAILURE,"Invalid minor,it cannot be null");var l=o+kony.sdk.constants.BEACON_UPDATE,y={};y[kony.sdk.constants.KSID]=n;var u={},g={};g.uuid=e,g.major=t,g.minor=r,u.beacon=g,y.beacons=u,y[kony.sdk.constants.AUTH_TOKEN]=k.getAuthToken(d),d&&d.ufid&&(y.ufid=d.ufid),d&&d.appid&&(y.appid=d.appid);var f=y,p=kony.sdk.getDefaultHeaders();p[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON_CHARSET_UTF8;var E={};E[kony.sdk.constants.DISABLE_INTEGRITY]=!0,kony.sdk.logsdk.perf("Executing updateListOfBeacons's network call"),s.post(l,f,p,(function(e){kony.sdk.logsdk.perf("Executing finished updateListOfBeacons with network success"),c(d),kony.sdk.verifyAndCallClosure(i,e)}),(function(e){kony.sdk.logsdk.perf("Executing finished updateListOfBeacons with network failure"),kony.sdk.logsdk.error("MESSAGING SERVICE :: updateListOfBeacons failed to update with error",e),kony.sdk.verifyAndCallClosure(a,e)}),kony.sdk.constants.CONTENT_TYPE_JSON,E)};var c=function(e){e&&e[kony.sdk.constants.AUTH_TOKEN]&&k.setAuthToken(e[kony.sdk.constants.AUTH_TOKEN])}}function MetricsService(e){var n=e.customReportingURL;if(void 0===n)throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"reporting url is undefined");var o=new konyNetworkProvider;this.getUserId=function(){return e.getUserId()};var t="",s=256,r={confType:"BUFFER",eventBufferAutoFlushCount:15,eventBufferMaxCount:1e3},i=[],k=[],a=0,d={formentry:"FormEntry",formexit:"FormExit",touch:"Touch",servicerequest:"ServiceRequest",serviceresponse:"ServiceResponse",gesture:"Gesture",orientation:"Orientation",error:"Error",exception:"Exception",crash:"Crash",custom:"Custom",servicecall:"ServiceCall",apptransition:"AppTransition",appload:"AppLoad",component:"Component"},l={1e3:!0,1011:!0,1012:!0,1014:!0,1015:!0,1016:!0};this.setFlowTag=function(e){if(kony.sdk.isNullOrUndefined(e))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for event flow tag");if(!(e.length<=s))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flow tag is 256 characters");t=e},this.clearFlowTag=function(){t=""},this.getFlowTag=function(){return t},this.setEventConfig=function(e,n,o){if(kony.sdk.isNullOrUndefined(e))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Config Type can not be null");if("BUFFER"!==(e=e.toUpperCase()))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for config type");if(r.confType=e,kony.sdk.isNullOrUndefined(o)||"number"!=typeof o||!(o>0))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferMaxCount has to be a Number and greater than 0");if(r.eventBufferMaxCount=o,!(!kony.sdk.isNullOrUndefined(n)&&"number"==typeof n&&n>0&&n<=o))throw n>=o?(r.eventBufferMaxCount=1e3,new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferAutoFlushCount can not be greater than eventBufferMaxCount")):new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"eventBufferAutoFlushCount has to be a Number and greater than 0");r.eventBufferAutoFlushCount=n},this.sendEvent=function(e,n,o,t,l,c){if(0===k.length&&this.readFromDS(),(a=k.length+i.length)!==r.eventBufferMaxCount){var y={};if(y.ts=kony.sdk.formatCurrentDate(new Date),e=e.toLowerCase(),kony.sdk.isNullOrUndefined(d[e]))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid value for event type");if(y.evttype=d[e],kony.sdk.isNullOrUndefined(n))y.evtSubType="";else{if(!(n.length<=s))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event evtSubType is 256 characters");y.evtSubType=n}if(kony.sdk.isNullOrUndefined(o))y.formID=kony.application.getCurrentForm().id;else{if(!(o.length<=s))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event formID is 256 characters");y.formID=o}if(kony.sdk.isNullOrUndefined(t))y.widgetID="";else{if(!(t.length<=s))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event widgetID is 256 characters");y.widgetID=t}if(kony.sdk.isNullOrUndefined(l))y.flowTag=this.getFlowTag();else{if(!(l.length<=s))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Length exceeded, Maximum length of event flowTag is 256 characters");y.flowTag=l}y.SID=this.getSessionId(),y.metaData=c,i.push(y),i.length%r.eventBufferAutoFlushCount!=0&&e!=d.crash||this.flushEvents()}else kony.sdk.logsdk.warn("Reached maximum limit of '"+a+"' events in buffer, No more events will be stored")},this.flushEvents=function(){var e=kony.sdk.currentInstance.customReportingURL,n=this;if(0===k.length&&n.readFromDS(),0!==k.length||0!==i.length){var t=kony.sdk.getPayload(kony.sdk.getCurrentInstance()),s={};0!==i.length&&n.pushEventsToBufferArray();var r=kony.sdk.getDefaultHeaders();r[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED_CHARSET_UTF8,t.events=k,t.svcid="SendEvents",t.rsid=this.getSessionId(),s[kony.sdk.constants.REPORTING_PARAMS]=JSON.stringify(t);var a={};a[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,o.post(e,s,r,(function(e){0==e.opstatus?n.clearBufferEvents():l[e.opstatus]?n.saveInDS():n.clearBufferEvents()}),(function(e){kony.sdk.logsdk.error("Unable to flush events"),kony.sdk.logsdk.info("Application Events: "+JSON.stringify(k)),n.saveInDS()}),null,a)}else kony.sdk.logsdk.warn("There are no events to flush")},this.saveInDS=function(){var e=[];e.push(JSON.stringify(k)),kony.ds.save(e,"konyMetricsBuffer"),k=[]},this.clearBufferEvents=function(){k=[],kony.ds.remove("konyMetricsBuffer")},this.readFromDS=function(){var e=kony.ds.read("konyMetricsBuffer");if(null!==e){var n=[];n.push(JSON.parse(e[0])),k.push.apply(k,n)}},this.pushEventsToBufferArray=function(){k.push.apply(k,i),i=[]},this.getEventsInBuffer=function(){var e=kony.ds.read("konyMetricsBuffer"),n=[];return kony.sdk.isNullOrUndefined(e)||n.push(JSON.parse(e[0])),0!==i.length&&n.push.apply(n,i),0!==n.length?n:null},this.sendCustomMetrics=function(t,s){if("object"!=typeof s)throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid type for metrics data.");var r=kony.sdk.dataStore.getItem("konyCustomReportData");r=r?JSON.parse(r):[],kony.sdk.dataStore.removeItem("konyCustomReportData");var i={};i.ts=kony.sdk.formatCurrentDate((new Date).toString()),i.fid=t,i.metrics=s,i.rsid=this.getSessionId(),r.push(i);var k=kony.sdk.getPayload(e);kony.sdk.metric&&(0===kony.sdk.metric.reportEventBufferBackupArray.length&&kony.sdk.metric.readFromDS(),kony.sdk.metric.pushEventsToBufferArray(),k.events=kony.sdk.metric.reportEventBufferBackupArray),k.reportData=r,k.rsid=this.getSessionId(),k.svcid="CaptureKonyCustomMetrics";var a={};a[kony.sdk.constants.REPORTING_PARAMS]=JSON.stringify(k);var d={};d[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0;var l=kony.sdk.getDefaultHeaders();l[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED_CHARSET_UTF8,o.post(n,a,l,(function(e){kony.sdk.metric&&kony.sdk.metric.clearBufferEvents(),kony.sdk.logsdk.info("metric data successfully sent"+JSON.stringify(e))}),(function(e){var n=kony.sdk.dataStore.getItem("konyCustomReportData");n?(n=JSON.parse(n),r.forEach((function(e){n.push(e)}))):n=r,kony.sdk.metric&&kony.sdk.metric.errorCodeMap[e.opstatus]&&kony.sdk.metric.saveInDS(),kony.sdk.dataStore.setItem("konyCustomReportData",JSON.stringify(n)),kony.sdk.logsdk.error("Unable to send metric report"+JSON.stringify(e))}),null,d)},this.reportError=function(e,n,o,t){var s={};if(s.errcode=e||"",s.errmsg=o||"",!t||!kony.sdk.isJson(t))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid json string passed for error details.");t=JSON.parse(t),s.errfile=t.errfile?t.errfile:"",s.errmethod=t.errmethod?t.errmethod:"",s.errline=t.errline?t.errline:"",s.errstacktrace=t.errstacktrace?t.errstacktrace:"",s.errcustommsg=t.errcustommsg?t.errcustommsg:"";var r=t.formID?t.formID:"",i=t.widgetID?t.widgetID:"",k=t.flowTag?t.flowTag:"",a=n||"";this.sendEvent("Error",a,r,i,k,JSON.stringify(s))},this.reportHandledException=function(e,n,o,t){var s={};if(s.exceptioncode=e||"",s.exceptionmsg=o||"",!t||!kony.sdk.isJson(t))throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"Invalid json string passed for exception details.");t=JSON.parse(t),s.exceptionfile=t.errfile?t.errfile:"",s.exceptionmethod=t.errmethod?t.errmethod:"",s.exceptionline=t.errline?t.errline:"",s.exceptionstacktrace=t.errstacktrace?t.errstacktrace:"",s.exceptioncustommsg=t.errcustommsg?t.errcustommsg:"";var r=t.formID?t.formID:"",i=t.widgetID?t.widgetID:"",k=t.flowTag?t.flowTag:"",a=n||"";this.sendEvent("Exception",a,r,i,k,JSON.stringify(s))},this.setSessionId=function(e){e&&kony.sdk.currentInstance.setSessionId(e)},this.getSessionId=function(){return kony.sdk.currentInstance.getSessionId()},this.setEventTracking=function(e){}}function OAuthHandler(e,n,o,t,s,r,i){if(!0!==r[kony.sdk.constants.IS_ENABLE_IDENTITY_PKCE]||(kony.sdk.pkceUtilityInstance=kony.sdk.util.getUtilityForPKCE(),kony.sdk.pkceUtilityInstance.initializePKCEObject())){var k="/"+s+"/",a=!0,d=!1,l=!1;r&&r.hasOwnProperty("logout")&&!0===r.logout&&(d=!0);var c,y,u,g,f,p,E=!1;if(r&&r.hasOwnProperty("slo")&&!0===r.slo&&(E=r.slo),r&&r.hasOwnProperty(kony.sdk.constants.CUSTOM_QUERY_PARAMS_FOR_OAUTH)&&(c=kony.sdk.util.objectToQueryParams(r[kony.sdk.constants.CUSTOM_QUERY_PARAMS_FOR_OAUTH])),"undefined"!=typeof XMLHttpRequest){var v=window,O=null,h=function(n){var o=n.origin;if(kony.sdk.util.isValidString(o)&&!(e.toLowerCase().indexOf(o.toLowerCase())<0)){var r=n.data;if(kony.sdk.util.isValidString(r)&&!kony.sdk.isJson(r)){O.close(),_();try{kony.sdk.logsdk.debug("### OAuthHandler::_listener received authorization code as "+r);var i={};"oauth2"!==s&&"saml"!==s||(i[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED);var a={code:r};kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||(a=kony.sdk.pkceUtilityInstance.appendAppVerifierInBodyParams(a)),t(k+"token",a,i)}catch(e){kony.sdk.logsdk.error("exception ::"+e),failureCallback()}}else(kony.sdk.isJson(r)||kony.sdk.util.isJsonObject(r))&&kony.sdk.logsdk.debug("### OAuthHandler::_listener received event.data in unknown format as "+JSON.stringify(r))}},_=function(){if(v.detachEvent)v.detachEvent("message",h);else{if(!v.removeEventListener)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"environment doesn't support detaching an event");v.removeEventListener("message",h)}};if(function(){if(v.addEventListener)v.addEventListener("message",h,!1);else{if(!v.attachEvent)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,"environment doesn't support event attaching");v.attachEvent("message",h)}}(),d){y=e+k+"logout?provider="+n+"&appkey="+o+"&slo="+E,s==kony.sdk.constants.AUTH_PROVIDER_TYPE_SAML&&(y+="&session_id="+konyRef.idSid),kony.timer.schedule("SPALogout",(function(){t(1),O.close(),_()}),3,!1)}else{y=e+k+"login?provider="+n+"&appkey="+o;var m=kony.sdk.getFabricAppVersion();kony.sdk.isNullOrUndefined(m)||(y+="&app_version="+m),y=B(y),kony.sdk.util.checkForIE11()&&kony.sdk.util.isJsonObject(r)&&r.hasOwnProperty(kony.sdk.constants.IE11_CROSS_DOMAIN_OAUTH_BASE_URL)&&(g=stripTrailingCharacter(r[kony.sdk.constants.IE11_CROSS_DOMAIN_OAUTH_BASE_URL],"/"),p=0,-1!==(f=y).indexOf("https")&&(p=1),f=f.replace(/^https?:\/\//,""),y=g+"/"+kony.sdk.constants.KNY_OAUTH_REDIRECT_HTML+"?"+kony.sdk.constants.KNY_OAUTH_REDIRECT_URL+"="+encodeURIComponent(f)+"&"+kony.sdk.constants.KNY_OAUTH_PROTOCOL_PARAM+"="+p),kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||(y=kony.sdk.pkceUtilityInstance.appendAppChallengeOnURL(y))}if(kony.sdk.getPlatformName()===kony.sdk.constants.PLATFORM_THIN_CLIENT&&!0===r[kony.sdk.constants.NO_POP_UP]){-1===y.indexOf(kony.sdk.constants.OAUTH_REDIRECT_SUCCESS_URL)&&(y=y+"&"+kony.sdk.constants.OAUTH_REDIRECT_SUCCESS_URL+"="+kony.application.getBrowserProtocol()+"//"+kony.application.getBaseURL());var S=t,T=!1,A={},C=r[kony.sdk.constants.METADATA_MANAGER_FOR_LOGIN_IN_SAME_WINDOW_OBJECT];if(kony.sdk.util.isPlatformPlainJS()){if(kony.sdk.isNullOrUndefined(appConfig)){kony.sdk.logsdk.error("Appconfig is null or undefined.");var R=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.invalid_appconfig,kony.sdk.errormessages.invalid_appconfig);return T=!0,C.destroy(),void S(null,null,null,T,R)}C.setItem(kony.sdk.constants.KEY_APPCONFIG_FOR_SINGLE_WINDOW_LOGIN,JSON.stringify(appConfig))}function N(){kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||kony.sdk.logsdk.info("app_verifier was saved at middleware"),C.saveMetaData(),kony.sdk.logsdk.info("login metadata for no popup login was saved");var e=r[kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE];if(kony.sdk.isNullOrUndefined(e))kony.sdk.logsdk.info("user has not provided"+kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE+", we will proceed directly to auth"),o();else{if("function"!=typeof e){kony.sdk.logsdk.error("user has provided"+kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE+" but argument type is not a function");var n=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.invalid_custom_data_save_handle,kony.sdk.errormessages.invalid_custom_data_save_handle);return T=!0,C.destroy(),void S(null,null,null,T,n)}kony.sdk.logsdk.info("calling user's "+kony.sdk.constants.CUSTOM_DATA_SAVE_HANDLE),e(o,(function(e){kony.sdk.logsdk.error("Error occurred while performing customDataSaveHandle.");var n=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.custom_data_save_handle_failed,kony.sdk.errormessages.custom_data_save_handle_failed);T=!0,C.destroy(),S(null,null,null,T,n)}))}function o(){var e={};e[kony.sdk.constants.KEY_URL]=y,e[kony.sdk.constants.KEY_IS_SAME_WINDOW]=!0,kony.application.openURLAsync(e)}}C.setItem(kony.sdk.constants.ENABLE_IDENTITY_PKCE,r[kony.sdk.constants.IS_ENABLE_IDENTITY_PKCE]),kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)?N():(A=kony.sdk.pkceUtilityInstance.appendAppVerifierInBodyParams(A),C.saveAppVerifier(A,N,(function(e){kony.sdk.logsdk.error("Failed to save app_verifier at middleware."),T=!0,C.destroy(),S(null,null,null,T,e)})))}else O=kony.os.deviceInfo().name===kony.sdk.constants.PLATFORM_SPA&&!kony.sdk.util.isMobileDevice()&&kony.sdk.util.isPWAStandaloneOrFullscreen()?kony.sdk.util.openPopupWindow(y,""):v.open(y)}else{var I,b=null,D=!1,P=null,L=null,U=null;if(kony.sdk.util.hasBrowserWidget(r))b=r[kony.sdk.constants.BROWSER_WIDGET],D=!0;else if(r&&r.UseDeviceBrowser&&i)kony.sdk.util.OAuthCallback=t,kony.sdk.util.OAuthType=s;else{var F={id:"popUp",skin:null,isModal:!1,transparencyBehindThePopup:80,layoutType:kony.flex.FREE_FORM,needAppMenu:!1};b=new kony.ui.Browser({id:"browserSF",text:"Browser",isVisible:!0,detectTelNumber:!0,screenLevelWidget:!0,left:"0%",top:"0%",width:"100%",height:"100%",enableZoom:!1},{},{});var w=kony.application.getCurrentForm(),j=new kony.ui.Form2(F,{containerWeight:100,padding:[5,5,5,5],paddingInPixel:!0},{titleBar:!0,titleBarConfig:{renderTitleText:!0,prevFormTitle:!1,titleBarLeftSideView:"button",labelLeftSideView:"Back",titleBarRightSideView:"none"},titleBarSkin:"slTitleBar"});j.add(b),j.show()}var M=kony.sdk.getDefaultHeaders();if(kony.sdk.isNullOrUndefined(konyRef.currentClaimToken)||(M[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken),konyRef.appendGlobalHeaders(M),y=e+k,d?(y+="logout?provider="+n+"&appkey="+o+"&slo="+E,s==kony.sdk.constants.AUTH_PROVIDER_TYPE_SAML&&(y+="&session_id="+konyRef.idSid)):y+="login?provider="+n+"&appkey="+o,kony.sdk.isNullOrUndefined(kony.sdk.getFabricAppVersion())||(y+="&app_version="+kony.sdk.getFabricAppVersion()),d)P=b.onSuccess,L=b.onFailure,b.onSuccess=function(e){if(!D){var n=w.postShow;function o(){j.destroy(),n&&n(),w.postShow=n}w.postShow=o,w.show()}kony.sdk.isOAuthLogoutInProgress=!1,t(a),kony.sdk.isNullOrUndefined(P)||kony.sdk.verifyAndCallClosure(P,e);H(e)},b.onFailure=function(e){kony.sdk.isOAuthLogoutInProgress=!1,a=!1,kony.sdk.isNullOrUndefined(L)||kony.sdk.verifyAndCallClosure(L,e);H(e)};else{if(r&&r.success_url&&i&&(y+="&success_url="+r.success_url),kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||(y=kony.sdk.pkceUtilityInstance.appendAppChallengeOnURL(y)),r&&r.UseDeviceBrowser&&i)return void kony.application.openURL(y);l=!1,null!==(u=b.handleRequest)&&(U=u),b.handleRequest=function(n,o){if(o.originalURL.toLowerCase().indexOf(e.toLowerCase())>=0)if(l||kony.sdk.isNullOrUndefined(o.queryParams)||kony.sdk.isNullOrUndefined(o.queryParams.code))l||void 0===o.queryParams||void 0===o.queryParams.error||(D||x(),l=!0,t(k,{error:decodeURIComponent(o.queryParams.error)},r,!0));else{if(!kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)&&kony.sdk.isNullOrUndefined(o.queryParams.oauth_session_id))return K(n,o),!1;D||x();var r={};"oauth2"!==s&&"saml"!==s||(r[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED),l||(kony.timer.schedule((new Date).getTime().toString(),function(e,n,t,s){return function(){var r={code:t};kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||(r=kony.sdk.pkceUtilityInstance.appendAppVerifierInBodyParams(r)),kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||kony.sdk.isNullOrUndefined(o.queryParams.oauth_session_id)||(r.oauth_session_id=o.queryParams.oauth_session_id),n(e,r,s)}}(k+"token",t,decodeURIComponent(o.queryParams.code),r),1,!1),l=!0)}K(n,o),l&&function(e){e.handleRequest=U}(n);return!1},y=B(y)}function H(e){e.onSuccess=P,e.onFailure=L}function x(){var e=w.postShow;w.postShow=function(){j.destroy(),e&&e(),w.postShow=e},w.show()}function K(e,n){null!==U&&U(e,n)}I={URL:y,requestMethod:constants.BROWSER_REQUEST_METHOD_GET},!d&&Object.keys(M).length>0&&(I.headers=M),b.requestURLConfig=I}}else{var G=kony.sdk.error.getErrObj(kony.sdk.errorcodes.pkce_params_generation_failed,kony.sdk.errormessages.pkce_params_generation_failed);t(null,null,null,!0,G)}function B(e){return kony.sdk.util.isNullOrEmptyString(c)||(e=e+"&"+c),e}}function handleDeeplinkCallback(e){if(e&&kony.sdk.isValidDeeplinkCallback(e)){var n,o={};"oauth2"!==kony.sdk.util.OAuthType&&"saml"!==kony.sdk.util.OAuthType||(o[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED),n="oauth2"===kony.sdk.util.OAuthType?"/oauth2/token":"saml"===kony.sdk.util.OAuthType?"/saml/token":"/login";var t={code:decodeURIComponent(e.launchparams.code)};kony.sdk.isNullOrUndefined(kony.sdk.pkceUtilityInstance)||(t=kony.sdk.pkceUtilityInstance.appendAppVerifierInBodyParams(t)),kony.sdk.isNullOrUndefined(e.launchparams.oauth_session_id)||(t.oauth_session_id=e.launchparams.oauth_session_id),kony.sdk.util.OAuthCallback(n,t,o)}}kony.sdk.prototype.getMetricsService=function(){if(!kony.sdk.isInitialized)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+" Metrics service.");if(!kony.sdk.isLicenseUrlAvailable)throw new Exception(kony.sdk.errorConstants.METRICS_FAILURE,"metrics is not enabled");return this.metricsServiceObject||(this.internalSdkObject?this.metricsServiceObject=this.internalSdkObject.getMetricsService():this.metricsServiceObject=new MetricsService(this)),this.metricsServiceObject},kony.sdk.initiateSession=function(){},kony.sdk.OfflineEnabledObjectService=function(e,n){function o(e,n){if(null==e||null==e)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Options Validity check: options null or undefined"),kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined)),!1;if(!(e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT]instanceof kony.sdk.dto.DataObject))return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Options Validity check: invalid data object"),kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance)),!1;var o=e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT].getObjectName();return null!=o&&null!=o||(kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Options Validity check: objectname null or undefined"),kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"objectName"+kony.sdk.errormessages.null_or_undefined)),!1)}this.serviceName=n,this.konyRef=e,this.fetch=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.fetch"),o(e,t))try{var s=e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT],r=s.getObjectName();this.getMetadataOfObject(r,{},(function(o){var i=new kony.sdk.KNYObj(r),k=s.getOfflineObjectsOptions();if(!k||0==Object.keys(k).length){var a=s.getSelectQueryObject(),d=e[kony.sdk.constants.ObjectServiceConstants.QUERYPARAMS];if(a){k.projectionColumns=[];var l=a.getColumns();for(var c in l)k.projectionColumns.push(l[c].getName());var y=a.getCriterias(),u={};for(var g in y){var f=y[g].getColumn();f&&(u[f.getName()]=y[g].getValue())}k.primaryKeys=u}else if(d){u={};if(null==o.primaryKey||null==o.primaryKey)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: fetch Error: Primarykey details missing so unable to fetch"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));for(var p=0;p<o.primaryKey.length;p++){var E=o.primaryKey[p],v=d[E];if(null==v||null==v||""==v)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: fetch Error: Primarykey details missing so unable to fetch"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));u[E]=v}k.primaryKeys=u}}i.get(k,(function(e){var o={};o.records=e,n(o)}),t)}),t)}catch(e){kony.sdk.logsdk.error("Fetch on offline enabled object failed with error: "+e),kony.sdk.verifyAndCallClosure(t,e)}},this.create=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.create"),o(e,t))try{var s=e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT],r=s.getObjectName(),i=new kony.sdk.KNYObj(r),k=s.getOfflineObjectsOptions(),a=s.getRecord();i.create(a,k,n,t)}catch(e){kony.sdk.logsdk.error("Create on offline enabled object failed with error: "+e),kony.sdk.verifyAndCallClosure(t,e)}},this.update=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.update"),o(e,t))try{var s=e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT],r=s.getObjectName();this.getMetadataOfObject(r,{},(function(e){var o=new kony.sdk.KNYObj(r),i=s.getOfflineObjectsOptions(),k=s.getRecord();if(!i||0==Object.keys(i).length||!i.primaryKeys){if(!k)return kony.sdk.logsdk.error("Update Failed: primaryKeys key missing. Please use dataObject setOfflineObjectsOptions to set primaryKeys for update operation."),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));var a={};if(null==e.primaryKey||null==e.primaryKey)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Update Error: Primarykey details missing so unable to update"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));for(var d=0;d<e.primaryKey.length;d++){var l=e.primaryKey[d],c=k[l];if(null==c||null==c||""==c)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Update Error: Primarykey details missing so unable to update"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));a[l]=c,delete k[l]}i.primaryKeys=a}o.updateByPK(k,i,n,t)}),t)}catch(e){kony.sdk.logsdk.error("Update on offline enabled object failed with error: "+e),kony.sdk.verifyAndCallClosure(t,e)}},this.deleteRecord=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.deleteRecord"),o(e,t))try{var s=e[kony.sdk.constants.ObjectServiceConstants.DATAOBJECT],r=s.getObjectName();this.getMetadataOfObject(r,{},(function(e){var o=new kony.sdk.KNYObj(r),i=s.getOfflineObjectsOptions();if(!i||0==Object.keys(i).length||!i.primaryKeys){var k=s.getRecord();if(!k)return kony.sdk.logsdk.error("Delete Failed: primaryKeys key missing. Please use dataObject setOfflineObjectsOptions to set primaryKeys for delte operation."),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));var a={};if(null==e.primaryKey||null==e.primaryKey)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Delete Error: Primarykey details missing so unable to delete"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));for(var d=0;d<e.primaryKey.length;d++){var l=e.primaryKey[d],c=k[l];if(null==c||null==c||""==c)return kony.sdk.logsdk.error("### OfflineEnabledObjectService:: Delete Error: Primarykey details missing so unable to delete"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));a[l]=c}i.primaryKeys=a}o.deleteByPK(i,n,t)}),t)}catch(e){kony.sdk.logsdk.error("Delete on offline enabled object failed with error: "+e),kony.sdk.verifyAndCallClosure(t,e)}},this.getMetadataOfAllObjects=function(o,t,s){kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.getMetadataOfAllObjects"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,null,o,t,s),kony.sdk.logsdk.trace("EXiting kony.sdk.OfflineEnabledObjectService.getMetadataOfAllObjects")},this.getMetadataOfObject=function(o,t,s,r){kony.sdk.logsdk.trace("Entering kony.sdk.OfflineEnabledObjectService.getMetadataOfObject"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,o,t,s,r),kony.sdk.logsdk.trace("Exiting kony.sdk.OfflineEnabledObjectService.getMetadataOfObject")}},kony.sdk.OfflineObjectService=function(e,n){function o(e,n){var o,t;n?(o=n.hasOwnProperty("errorCode")?n.errorCode:kony.sdk.errorcodes.transaction_failed,t=n.hasOwnProperty("errorMessage")?n.errorMessage:kony.sdk.errormessages.transaction_failed):(o=kony.sdk.errorcodes.transaction_failed,t=kony.sdk.errormessages.transaction_failed),kony.sdk.verifyAndCallClosure(e,kony.sdk.error.getClientErrObj(o,t))}kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService"),this.konyRef=e,this.serviceName=n,this.create=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.create"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject){var s=e.dataObject;this.getMetadataOfObject(s.getObjectName(),{},(function(r){!function(e,n,t,s){var r=kony.sdk.util.getSyncDbName();kony.sync.single_insert_execute(r,e.getObjectName(),e.getRecord(),n,(function(e){o(t,e)}),!0,s)}(s,n,t,e)}),t)}else kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined))},this.fetch=function(e,n,o){throw"This method is not implemented.Instead use executeSelectQuery"},this.update=function(e,t,s){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.update"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject){var r=e.dataObject;this.getMetadataOfObject(r.getObjectName(),{},(function(i){!function(e,t,s,r){var i=e.getObjectName(),k=e.getRecord(),a=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,i),d={},l=[];if(null==a.primaryKey||null==a.primaryKey)return kony.sdk.logsdk.error("### OfflineObjectService::_invokeOfflineUpdate Error: Primarykey details missing so unable to update"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));for(var c=0;c<a.primaryKey.length;c++){var y=a.primaryKey[c],u=k[y];if(null==u||null==u||""==u)return kony.sdk.logsdk.error("### OfflineObjectService::_invokeOfflineUpdate Error: Primarykey details missing so unable to update"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));d.pKey={key:y,value:u};var g={};g.key=y,g.value=u,l.push(g)}var f=kony.sdk.util.getSyncDbName();kony.sync.single_update_execute(f,i,k,l,t,(function(e){o(s,e)}),!1,!0,null,r)}(r,(function(e){kony.sdk.verifyAndCallClosure(t,e)}),(function(e){null==e||null==e||7010!=e.errorCode?kony.sdk.verifyAndCallClosure(s,e):kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.transaction_failed,kony.sdk.errormessages.transaction_failed))}),e)}),s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined))},this.deleteRecord=function(e,t,s){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.deleteRecord"),null!=e&&null!=e)if(e.dataObject instanceof kony.sdk.dto.DataObject){var r=e.dataObject;this.getMetadataOfObject(r.getObjectName(),{},(function(i){!function(e,t,s,r){var i=e.getObjectName(),k=[],a=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(n,e.getObjectName()),d=kony.sdk.util.getSyncDbName(),l=kony.sdk.util.getPrimarykeysFromMetadata(a);if(null==l||null==l)return kony.sdk.logsdk.error("### _invokeOfflineDelete:: Error Primarykey details missing so unable to delete"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));for(var c=Object.keys(l).length,y=0;y<c;y++){var u=Object.keys(l)[y],g=e.getRecord()[u];if(null==g||null==g||""==g)return kony.sdk.logsdk.error("### _invokeOfflineDelete:: Error Primarykey details missing so unable to delete"),void kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.primarykey_unavailable,kony.sdk.errormessages.primarykey_unavailable));var f={};f.key=u,f.value=g,kony.table.insert(k,f)}kony.sync.single_delete_execute(d,i,k,t,(function(e){o(s,e)}),!1,!1,!0,r)}(r,(function(e){null==e||null==e||0!=e.rowsdeleted?kony.sdk.verifyAndCallClosure(t,e):kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.norecords_to_delete,kony.sdk.errormessages.norecords_to_delete))}),(function(e){kony.sdk.verifyAndCallClosure(s,e)}),e)}),s)}else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance));else kony.sdk.verifyAndCallClosure(s,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined))},this.getMetadataOfAllObjects=function(o,t,s){kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.getMetadataOfAllObjects"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,null,o,t,s),kony.sdk.logsdk.trace("Exiting kony.sdk.OfflineObjectService.getMetadataOfAllObjects")},this.getMetadataOfObject=function(o,t,s,r){kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.getMetadataOfObject"),_getMetadataForObjectsOrServiceOnlineUtil(e,n,o,t,s,r),kony.sdk.logsdk.trace("Exiting kony.sdk.OfflineObjectService.getMetadataOfObject")},this.executeSelectQuery=function(e,n,o){kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.executeSelectQuery"),kony.sync.single_select_execute(kony.sdk.util.getSyncDbName(),e,null,(function(e){kony.sdk.logsdk.debug("### OfflineObjectService::executeSelectQuery::selectSuccess Response:",e),kony.sdk.verifyAndCallClosure(n,e)}),(function(e){kony.sdk.logsdk.error("### OfflineObjectService::executeSelectQuery::selectError Error:",e),kony.sdk.verifyAndCallClosure(o,e)}))},this.getBinaryContent=function(e,n,t){if(kony.sdk.logsdk.trace("Entering kony.sdk.OfflineObjectService.getBinaryContenttion"),kony.sdk.isNullOrUndefined(e))kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.null_or_undefined,"options"+kony.sdk.errormessages.null_or_undefined));else{var s=e.dataObject;if(s instanceof kony.sdk.dto.DataObject){var r=e.binaryAttrName;if(kony.sdk.isNullOrUndefined(r))return kony.sdk.logsdk.error("### OfflineObjectService::getBinaryContent Error: Please provide column name to fetch binary content"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj("90000","Please provide column name to fetch binary content"));var i="base64string"===e.responsetype,k=e.config;this.getMetadataOfObject(s.getObjectName(),{},(function(e){function a(e,n){kony.sdk.logsdk.error("Error in creating base64 string from local file : ",e);var o=kony.sdk.errorcodes.invalid_blob,t=kony.sdk.errormessages.invalid_blob;kony.sdk.verifyAndCallClosure(n,kony.sdk.error.getClientErrObj(o,t))}var d=kony.sdk.util.getSyncDbName(),l=s.getObjectName(),c=kony.sdk.util.populateColumnValues(s.getRecord(),null),y=kony.sdk.util.getMetadataOfColumn(e,r);if(kony.sdk.isNullOrUndefined(y))return kony.sdk.logsdk.warn("### OfflineObjectService::getBinaryContent Error: Invalid binary attribute name."),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj("90000","Invalid binary attribute name."));if(y.datatype!==kony.sdk.constants.BINARY_DATATYPE)return kony.sdk.logsdk.warn("### OfflineObjectService::getBinaryContent Error: Datatype is not binary for the specified binary attribute name"),void kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj("90000","Datatype is not binary for the specified binary attribute name"));var u=kony.sdk.util.getPkTableForBinary(e,c,t);kony.sync.getBinary(d,l,r,u,k,(function(e){kony.sdk.logsdk.debug("### OfflineObjectService::getBinaryContent::selectSuccessCallback Response",e);var o=e.FilePath;i?function(e,n,o){var t=e.substring(e.lastIndexOf("/")+1,e.length),s="Select type from "+kony.sync.blobStoreManagerTable+" where id = "+t;sync.executeSelectQuery(s,(function(t){var s;try{if(t[0].type&&t[0].type===kony.sync.blobTypeBase64)s=binary.util.getBase64FromFile(e);else{var r=new kony.io.File(e);if(!kony.sdk.isNullOrUndefined(r)&&r.exists()&&r.readable){var i=r.read();s=kony.convertToBase64(i)}else a(e,o)}}catch(e){a(JSON.stringify(e),o)}kony.sdk.verifyAndCallClosure(n,s)}),(function(e){a(JSON.stringify(e),o)}))}(o,n,t):kony.sdk.verifyAndCallClosure(n,o)}),(function(e){kony.sdk.logsdk.error("### OfflineObjectService::getBinaryContent::selectErrorCallback Error:",e),o(t,e)}))}),t)}else kony.sdk.verifyAndCallClosure(t,kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.invalid_dataobject_instance,kony.sdk.errormessages.invalid_dataobject_instance))}}},kony.sdk.util.getExtendedFieldsFromArray=function(e,n){if(kony.sdk.logsdk.trace("Entering into kony.sdk.util.getExtendedFieldsFromArray"),e instanceof Array){for(var o=0;o<e.length;o++)if(e[o]instanceof kony.sdk.dto.FieldMetadata&&n instanceof kony.sdk.dto.Column&&kony.sdk.util.matchIgnoreCase(e[o].name,n.getName())&&kony.sdk.util.matchIgnoreCase(e[o].type,"extendedfield"))return e[o];return null}},kony.sdk.dto.PickList=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.PickList"),this.id=null,this.active=null,this.label=null,this.value=null,this.validFor=null,this.defaultValue=null,this.fieldMappingId=null,this.setId=function(e){this.id=e},this.getId=function(){return this.id},this.setActive=function(e){this.active=e},this.isActive=function(){return this.active},this.setLabel=function(e){this.label=e},this.getLabel=function(){return this.label},this.setValue=function(e){this.value=e},this.getValue=function(){return this.value},this.setValidFor=function(e){this.validFor=e},this.getValidFor=function(){return this.validFor},this.setDefaultValue=function(e){this.defaultValue=e},this.getDefaultValue=function(){return this.defaultValue},this.setFieldMappingId=function(e){this.fieldMappingId=e},this.getFieldMappingId=function(){return this.fieldMappingId}},kony.sdk.dto.ObjectMetadata=function(){this.custom,this.customizable,this.displayName,this.entityTypeID,this.columns,this.junction,this.name,this.primaryKey,this.relationshipList,this.sourceEntityName,this.updateable,this.uniqueKeys},kony.sdk.dto.FieldMetadata=function(){this.auditColumn,this.createable,this.custom,this.customizable,this.type,this.defaultValue,this.displayName,this.fieldMappingId,this.hasIndex,this.name,this.nameField,this.nullable,this.primaryKey,this.sourceFieldName,this.table,this.updateable,this.pickListValues},kony.sdk.dto.ObjectRelationship=function(){this.entityName,this.entityPageTemplateId,this.id,this.junctionTableName,this.operationType,this.relatedEntity,this.relationshipFields,this.relationshipName,this.relationshipType,this.custom},kony.sdk.dto.SelectQuery=function(e,n){this.tables=[],this.columnList=[],this.criteriaList=[],this.isDistinct=!1,this.orderList=[],this.joinList=[],this.groupList=[],this.limit=null,this.skip=null,this.oDataURL=null,n instanceof kony.sdk.dto.Table&&this.tables.push(n),this.setLimit=function(e){this.limit=e},this.setSkip=function(e){this.skip=e},this.getLimit=function(){return this.limit},this.getSkip=function(){return this.skip},this.addColumn=function(e){if(e instanceof kony.sdk.dto.Column)return this.columnList.push(e),this.columnList},this.addCriteria=function(e){if(kony.sdk.util.validateCriteriaObject(e))return this.criteriaList.push(e),this.criteriaList},this.addGroup=function(e){if(e instanceof kony.sdk.dto.Group){this.groupList.push(e);for(var n=0;n<this.tables.length;n++)if(this.tables[n].getName().toUpperCase()===e.getColumn().getTable().getName().toUpperCase())return;this.tables.push(e.getColumn().getTable())}},this.addJoin=function(e){if(e instanceof kony.sdk.dto.Join){this.joinList.push(e);for(var n=0;n<this.tables.length;n++)if(this.tables[n].getName().toUpperCase()===e.getTable().getName().toUpperCase())return null!=this.tables[n].getAlias()||null!=e.getTable().getAlias()||null!=this.tables[n].getAlias()||null!=e.getTable().getAlias()?this.tables[n].getAlias().toUpperCase()===e.getTable().getAlias().toUpperCase()?void 0:void this.tables.push(e.getTable()):void 0;this.tables.push(e.getTable())}},this.addOrder=function(e){if(e instanceof kony.sdk.dto.Order){this.orderList.push(arguments[0]);for(var n=0;n<this.tables.length;n++)if(this.tables[n].getName().toUpperCase()===arguments[0].getColumn().getTable().getName().toUpperCase())return;this.tables.push(e.getColumn().getTable())}},this.getTables=function(){return this.tables},this.getDistinct=function(){return this.isDistinct},this.getColumns=function(){return this.columnList},this.getCriterias=function(){return this.criteriaList},this.getGroups=function(){return this.groupList},this.getJoins=function(){return this.joinList},this.getOrders=function(){return this.orderList},this.removeColumn=function(e){e instanceof kony.sdk.dto.Column&&this.columnList.splice(this.columnList.indexOf(e),1)},this.removeCriteria=function(e){e instanceof Criteria&&this.criteriaList.splice(this.criteriaList.indexOf(e),1)},this.removeGroup=function(e){e instanceof kony.sdk.dto.Group&&this.groupList.splice(this.groupList.indexOf(e),1)},this.removeJoin=function(e){e instanceof kony.sdk.dto.Criteria&&this.joinList.splice(this.joinList.indexOf(e),1)},this.removeOrder=function(e){e instanceof kony.sdk.dto.Order&&this.orderList.splice(this.orderList.indexOf(e),1)},this.setDistinct=function(e){this.isDistinct=e},this.toString=function(){var n=this,o="";o+="SELECT ",1!=this.getDistinct()&&"true"!=this.getDistinct()||(o+=" DISTINCT ");var t=this.columnList,s=[],r=[],i=[],k=this.getTables()[0],a=kony.sdk.ObjectServiceUtil.getCachedObjectMetadata(e,k.getName());if(0!==t.length)for(var d=null,l=0;l<t.length;l++)null!=(d=kony.sdk.util.getExtendedFieldsFromArray(a.columns,t[l]))?(n.columnList[l].dataType=d.type,n.columnList[l].parentFieldName=d.parentFieldName,s.push(d),d=null):r.push(t[l]);else{var c=null;for(d=null,l=0;l<a.columns.length;l++)d=a.columns[l],(c=new kony.sdk.dto.Column(k,d.name)).dataType=d.type,c.parentFieldName=d.parentFieldName,n.columnList.push(c),null!=d&&kony.sdk.util.matchIgnoreCase(d.type,"extendedfield")?(s.push(d),d=null):r.push(t[l])}var y=n.appendListToQuery(r,", ",0);if(null!==y&&""!==y&&(o+=y),null!=s&&0!==s.length){for(var u=null,g=null,f=null,p=null,E=kony.sdk.constants.JoinType.LEFT,v=(c=null,[]),O={},h=0;h<s.length;h++)null!==O&&O.hasOwnProperty(s[h].parentTableName)?O[""+s[h].parentTableName]=++O[""+s[h].parentTableName]:O[""+s[h].parentTableName]=0,g=new kony.sdk.dto.Table(s[h].parentTableName),c=new kony.sdk.dto.Column(g,s[h].parentFieldName),v.push(c),f=new kony.sdk.dto.Column(k,s[h].foreignKeyFieldName),p=new kony.sdk.dto.Column(g,s[h].referencedField||"id"),null!=(u=new kony.sdk.dto.Join(g,f,p,E))&&0===O[""+s[h].parentTableName]&&i.push(u);for(var _="",m=0;m<v.length;m++)_+=v[m].toString(),m<v.length-1&&(_+=",");if(null!==_&&""!==_&&(o=o+","+_),null!=i)for(var S=0;S<i.length;S++)n.addJoin(i[S])}(o+=" FROM ",o+=n.getTables()[0].toString(),0!==n.getJoins().length)&&(o+=n.appendListToQuery(n.joinList," ",-1));return 0!=n.criteriaList.length&&(o+=" WHERE ",o+=n.appendListToQuery(n.criteriaList," AND ",-1)),0!=n.groupList.length&&(o+=" GROUP BY ",o+=n.appendListToQuery(n.groupList,", ",-1)),0!=n.orderList.length&&(o+=" ORDER BY ",o+=n.appendListToQuery(n.orderList," ,",-1)),null!==n.limit&&void 0!==n.limit&&kony.sdk.util.isValidNumberType(n.limit)&&0!==n.limit&&(o=o+" LIMIT "+n.limit),null!==n.skip&&void 0!==n.skip&&kony.sdk.util.isValidNumberType(n.skip)&&0!==n.skip&&(o=o+" OFFSET "+n.skip),o},this.appendListToQuery=function(e,n,o){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.appendListToQuery");for(var t="",s=0;s<e.length;s++){var r=e[s];o>-1?null!==r&&(t=(kony.sdk.dto.Column,t.concat(r.toString()))):null!=r&&(t=t.concat(r.toString())),s<e.length-1&&(t=t.concat(n))}return t}},kony.sdk.dto.Table=function(e,n,o){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Table"),this.name=e,this.alias=n,this.isjunction=o,this.getAlias=function(){return this.alias},this.setAlias=function(e){this.alias=e},this.getName=function(){return this.name},this.setName=function(e){this.name=e},this.equals=function(e){var n=!1;return null==e?n=!1:typeof this==typeof e?(n=!0,n=this.hasAlias()&&e.hasAlias()?this.getAlias()===e.getAlias():this.getName()===e.getName()):n=!1,n},this.getColumn=function(e){return new kony.sdk.dto.Column(this,e)},this.hasAlias=function(){return null!==this.alias&&void 0!==this.alias},this.toString=function(){return this.getName()+(this.hasAlias()?" "+this.getAlias():"")},this.isJunction=function(){return this.isjunction&&1==this.isjunction},this.setJunction=function(e){this.isjunction=e}},kony.sdk.dto.Column=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Column"),e instanceof kony.sdk.dto.Table?(this.aggregation=null,this.alias=null,this.dataType=null,this.name=null,this.table=null,null!=n&&"string"==typeof n?this.name=n:kony.sdk.logsdk.error("### kony.sdk.dto.Column:: Error: colName is undefined"),this.table=e):kony.sdk.logsdk.error("### kony.sdk.dto.Column:: Error: tableObj is not an instance of kony.sdk.dto.Table"),this.getAggregation=function(){return this.aggregation},this.setAggregation=function(e){this.aggregation=e},this.getAlias=function(){return this.alias},this.setAlias=function(e){this.alias=e},this.getDataType=function(){return this.dataType},this.setDataType=function(e){this.dataType=e},this.isComputedField=function(){return this.fieldComputed},this.setComputedField=function(e){this.fieldComputed=e},this.getName=function(){return this.name},this.setName=function(e){null!=e&&"string"==typeof e?this.name=e:kony.sdk.logsdk.error("### kony.sdk.dto.Column::setName:: Error: name is undefined")},this.getTable=function(){return this.table},this.setTable=function(e){e instanceof kony.sdk.dto.Table?this.table=e:kony.sdk.logsdk.error("### kony.sdk.dto.Column:: Error: setTable is undefined")},this.toStringByMode=function(e){var n=null!==this.getTable().getAlias()&&void 0!==this.getTable().getAlias()?this.getTable().getAlias():this.getTable().getName(),o=null,t=null,s=null;switch(e){case 0:t=null!==this.getDataType()&&void 0!==this.getDataType()?kony.sdk.util.matchIgnoreCase(this.getDataType(),"Integer")?"CAST ("+n+"."+this.getName()+" AS INTEGER)":kony.sdk.util.matchIgnoreCase(this.getDataType(),"Numeric")?"CAST ("+n+"."+this.getName()+" AS NUMERIC)":kony.sdk.util.matchIgnoreCase(this.getDataType(),"Date")?"date("+n+"."+this.getName()+")":n+"."+this.getName():n+"."+this.getName(),s=null!==this.getAlias()&&void 0!==this.getAlias()&&""!==this.getAlias()?" AS "+this.getAlias():"",o=(this.getAggregation()===kony.sdk.constants.Aggregation.NONE||null===this.getAggregation()||void 0===this.getAggregation()?t:this.isComputedField()?this.getAggregation():this.getAggregation()+"("+t+")")+s;break;case 1:null!==this.getDataType()&&void 0!==this.getDataType()&&kony.sdk.util.matchIgnoreCase(this.getDataType(),"STRING")&&this.setDataType("text"),t=null!==this.getDataType()&&void 0!==this.getDataType()?"CAST ("+n+"."+this.getName()+" AS "+this.getDataType()+")":n+"."+this.getName(),o=this.getAggregation()===kony.sdk.constants.Aggregation.NONE||null===this.getAggregation()||void 0===this.getAggregation()?t:this.isComputedField()?this.getAggregation():this.getAggregation()+"("+t+")";break;case 2:case 3:o=this.getName();break;default:null!==this.getDataType()&&void 0!==this.getDataType()&&kony.sdk.util.matchIgnoreCase(this.getDataType(),"STRING")&&this.setDataType("text"),t=null!==this.getDataType()&&void 0!==this.getDataType()?"CAST ("+n+"."+this.getName()+" AS "+this.getDataType()+")":n+"."+this.getName(),s=null!==this.getAlias()&&void 0!==this.getAlias()?" AS "+this.getAlias():"",o=(this.getAggregation()===kony.sdk.constants.Aggregation.NONE||null===this.getAggregation()||void 0===this.getAggregation()?t:this.isComputedField()?this.getAggregation():this.getAggregation()+"("+t+")")+s}return o},this.toString=function(){null!==this.getDataType()&&void 0!==this.getDataType()&&kony.sdk.util.matchIgnoreCase(this.getDataType(),"STRING")&&(dataType="text");var e=null!==this.getTable().getAlias()&&void 0!==this.getTable().getAlias()&&""!==this.getTable().getAlias()?this.getTable().getAlias():this.getTable().getName(),n=null;null!==this.getDataType()&&void 0!==this.getDataType()?kony.sdk.util.matchIgnoreCase(this.getDataType(),"Integer")?n="CAST ("+e+"."+this.getName()+" AS INTEGER)":kony.sdk.util.matchIgnoreCase(this.getDataType(),"Numeric")?n="CAST ("+e+"."+this.getName()+" AS NUMERIC)":kony.sdk.util.matchIgnoreCase(this.getDataType(),"Date")?n="date("+e+"."+this.getName()+")":this.isComputedField()||(n=e+"."+this.getName()):this.isComputedField()||(n=e+"."+this.getName());var o=null!==this.getAlias()&&void 0!==this.getAlias()&&""!==this.getAlias()?" AS "+this.getAlias():"";return(this.getAggregation()===kony.sdk.constants.Aggregation.NONE||null===this.getAggregation()||void 0===this.getAggregation()?n:this.isComputedField()?this.getAggregation():this.getAggregation()+"("+n+")")+o},this.toStringByTablePrefix=function(e){return e?this.toString():this.getName()}},kony.sdk.dto.Group=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Group"),e instanceof kony.sdk.dto.Column&&(this.column=e),this.getColumn=function(){return this.column},this.setColumn=function(e){e instanceof kony.sdk.dto.Column&&(this.column=e)},this.toString=function(){return(null!==this.column.getTable().getAlias()&&void 0!==this.column.getTable().getAlias()?this.column.getTable().getAlias():this.column.getTable().getName())+"."+this.column.getName()}},kony.sdk.dto.Join=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Join"),this.criteria,this.table,this.joinType;var e=this;3===arguments.length?function(n,o,t){if(kony.sdk.logsdk.trace("Entering into getJoinByTableCriteriaAndJoinType"),n instanceof kony.sdk.dto.Table&&kony.sdk.util.validateCriteriaObject(o)&&null!=t&&(t===kony.sdk.constants.JoinType.INNER||t===kony.sdk.constants.JoinType.LEFT))return e.table=n,e.joinType=t,e.criteria=o,e;kony.sdk.logsdk.error("### kony.sdk.dto.Join::getJoinByTableCriteriaAndJoinType:: Error: Validation error at getJoinByTableCriteriaAndJoinType")}(arguments[0],arguments[1],arguments[2]):4===arguments.length&&function(n,o,t,s){if(kony.sdk.logsdk.trace("Entering into getJoinByDestTableAndSrcColumnAndDestColumnAndJoinType"),n instanceof kony.sdk.dto.Table&&o instanceof kony.sdk.dto.Column&&t instanceof kony.sdk.dto.Column&&null!=s&&""!==s&&(s===kony.sdk.constants.JoinType.INNER||s===kony.sdk.constants.JoinType.LEFT)){e.table=n,e.joinType=s;var r=new kony.sdk.dto.Match(o,kony.sdk.constants.MatchType.EQUALS,t);return e.criteria=r,e}kony.sdk.logsdk.error("### kony.sdk.dto.Join::getJoinByDestTableAndSrcColumnAndDestColumnAndJoinType:: Error: Validation error at getJoinByDestTableAndSrcColumnAndDestColumnAndJoinType")}(arguments[0],arguments[1],arguments[2],arguments[3]),this.getCriteria=function(){return this.criteria},this.setCriteria=function(e){kony.sdk.util.validateCriteriaObject(e)&&(this.criteria=e)},this.getTable=function(){return this.table},this.setTable=function(e){e instanceof kony.sdk.dto.Table&&(this.table=e)},this.getJoinType=function(){return this.joinType},this.setJoinType=function(e){null!==e&&(this.joinType=e)},this.initCriteria=function(e,n){if(e instanceof kony.sdk.dto.Column&&n instanceof kony.sdk.dto.Column){var o=new kony.sdk.dto.Match(e,kony.sdk.constants.MatchType.EQUALS,n);this.setCriteria(o)}else kony.sdk.logsdk.error("### kony.sdk.dto.Join::initCriteria:: Error: srcColumn or destColumn is not an isntanceof kony.sdk.dto.Column")},this.toString=function(){var e,n=null;return kony.sdk.constants.JoinType.INNER==this.getJoinType()?e="INNER":kony.sdk.constants.JoinType.LEFT==this.getJoinType()?e="LEFT":kony.sdk.constants.JoinType.RIGHT==this.getJoinType()&&(e="RIGHT"),n=" "+e+" JOIN "+this.getTable().toString()+" ON ",n+=this.getCriteria().toString()}},kony.sdk.dto.Order=function(e,n){if(kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Order"),e instanceof kony.sdk.dto.Column&&(n==kony.sdk.constants.OrderType.ASCENDING||n==kony.sdk.constants.OrderType.DESCENDING))return this.column=e,this.type=n,this;kony.sdk.logsdk.error("### kony.sdk.dto.Order:: Error: Validation error"),this.getColumn=function(){return this.column},this.setColumn=function(e){e instanceof kony.sdk.dto.Column?this.column=e:kony.sdk.logsdk.error("### kony.sdk.dto.Order::setColumn: Error: column is not an instance of kony.sdk.dto.Column")},this.getType=function(){return this.type},this.setType=function(e){this.type=e},this.toString=function(){return this.column.toString()+" "+this.type}},kony.sdk.dto.Between=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Between"),this.column,this.range,e instanceof kony.sdk.dto.Column&&(n instanceof kony.sdk.dto.DateRange||n instanceof kony.sdk.dto.StringRange||n instanceof kony.sdk.dto.IntegerRange||n instanceof kony.sdk.dto.FloatRange)?(this.column=e,this.range=n):kony.sdk.logsdk.error("### kony.sdk.dto.Between:: Error: Vaildation error"),this.quote=function(e){if(kony.sdk.util.isNull(e))return"null";var n=[];n.push("'");for(var o=0;o<e.length;o++){var t=e.charAt(o);"\\"!=t&&'"'!=t&&"'"!=t||n.push("\\"),n.push(t)}return n.push("'"),n.join("")},this.setColumn=function(e){e instanceof kony.sdk.dto.Column?this.column=e:kony.sdk.logsdk.error("### kony.sdk.dto.Between::setColumn: Error:column is not an instance of kony.sdk.dto.Column")},this.setRange=function(e){e instanceof kony.sdk.dto.DateRange||e instanceof kony.sdk.dto.StringRange||e instanceof kony.sdk.dto.IntegerRange||e instanceof kony.sdk.dto.FloatRange?this.range=e:kony.sdk.logsdk.error("### kony.sdk.dto.Between::setRange: Error: Validation Error")},this.getColumn=function(){return this.column},this.getRange=function(){return this.range},this.toString=function(){return this.getColumn().toString()+" Between "+this.getRange().toString()}},kony.sdk.dto.DateRange=function(){if(this.end,this.start,2===arguments.length){var e=arguments[0],n=arguments[1];e instanceof Date&&n instanceof Date?(this.start=e,this.end=n):kony.sdk.logsdk.error("### kony.sdk.dto.DataRange:: Error: startDate or endDate is not an instance of Date")}else if(1===arguments.length){var o=arguments[0];if(kony.sdk.util.validateDateTypeInput(o)){var t=kony.sdk.util.getDateRange(o);2!==t.length||0===t[0]||0===t[1]?kony.sdk.logsdk.error("### kony.sdk.dto.DateRange:: Error: Validation Error"):(this.start=t[0],this.end=t[1])}}this.getEnd=function(){return this.end},this.setEnd=function(e){if(e instanceof Date){var n=e.getMonth()+1,o=e.getDate(),t=e.getHours(),s=e.getMinutes(),r=e.getSeconds();n<10&&(n="0"+n),o<10&&(o="0"+o),t<10&&(t="0"+t),s<10&&(s="0"+s),r<10&&(r="0"+r);var i=e.getFullYear()+"-"+n+"-"+o+" "+t+":"+s+":"+r;this.end=i}else kony.sdk.logsdk.error("### kony.sdk.dto.DateRange::setEnd:: Error: end is not an instance of Date")},this.getStart=function(){return this.start},this.setStart=function(e){if(e instanceof Date){var n=e.getMonth()+1,o=e.getDate(),t=e.getHours(),s=e.getMinutes(),r=e.getSeconds();n<10&&(n="0"+n),o<10&&(o="0"+o),t<10&&(t="0"+t),s<10&&(s="0"+s),r<10&&(r="0"+r);var i=e.getFullYear()+"-"+n+"-"+o+" "+t+":"+s+":"+r;this.start=i}else kony.sdk.logsdk.error("### kony.sdk.dto.DateRange::setStart:: Error: start is not an instance of Date")},this.toString=function(){return"'"+this.start+"' AND '"+this.end+"'"}},kony.sdk.dto.DecimalRange=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.DecimalRange"),null!=n&&"number"==typeof n&&null!=e&&"number"==typeof e?(this.end=n,this.start=e):kony.sdk.logsdk.error("### kony.sdk.dto.DecimalRange:: Error: Validation Error"),this.getEnd=function(){return this.end},this.setEnd=function(e){null!=e&&"number"==typeof e?this.end=e:kony.sdk.logsdk.error("### kony.sdk.dto.DecimalRange::setEnd:: Error: Validation Error")},this.getStart=function(){return this.start},this.setStart=function(e){null!=e&&"number"==typeof e?this.start=e:kony.sdk.logsdk.error("### kony.sdk.dto.DecimalRange::setStart:: Error: Validation Error")},this.toString=function(){return this.start+" AND "+this.end}},kony.sdk.dto.FloatRange=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.FloatRange"),this.end=n,this.start=e,this.getEnd=function(){return this.end},this.setEnd=function(e){null!=e&&"number"==typeof e?this.end=e:kony.sdk.logsdk.error("### kony.sdk.dto.FloatRange::setEnd:: Error: Validation Error")},this.getStart=function(){return this.start},this.setStart=function(e){null!=e&&"number"==typeof e?this.start=e:kony.sdk.logsdk.error("### kony.sdk.dto.FloatRange::setStart:: Error: Validation Error")},this.toString=function(){return this.start+" AND "+this.end}},kony.sdk.dto.IntegerRange=function(e,n){null!=n&&"number"==typeof n&&null!=e&&"number"==typeof e?(this.end=n,this.start=e):kony.sdk.logsdk.error("### kony.sdk.dto.IntegerRange:: Error: Validation Error"),this.getEnd=function(){return this.end},this.setEnd=function(e){null!=e&&"number"==typeof e?this.end=e:kony.sdk.logsdk.error("### kony.sdk.dto.IntegerRange::setEnd:: Error: Validation Error")},this.getStart=function(){return this.start},this.setStart=function(e){null!=e&&"number"==typeof e?this.start=e:kony.sdk.logsdk.error("### kony.sdk.dto.IntegerRange::setStart:: Error: Validation Error")},this.toString=function(){return this.start.toFixed()+" AND "+this.end.toFixed()}},kony.sdk.dto.StringRange=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.StringRange"),null!=n&&"string"==typeof n&&null!=e&&"string"==typeof e?(this.end=n,this.start=e):kony.sdk.logsdk.error("### kony.sdk.dto.StringRange:: Error: Validation Error"),this.getEnd=function(){return this.end},this.setEnd=function(e){null!=e&&"string"==typeof e?this.end=e:kony.sdk.logsdk.error("### kony.sdk.dto.StringRange::setEnd:: Error: Validation Error")},this.getStart=function(){return this.start},this.setStart=function(e){null!=e&&"string"==typeof e?this.start=e:kony.sdk.logsdk.error("### kony.sdk.dto.StringRange::setStart:: Error: Validation Error")},this.toString=function(){var e=new kony.sdk.dto.Criteria;return e.quote(this.start)+" AND "+e.quote(this.end)}},kony.sdk.dto.LogicGroup=function(e,n,o){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.LogicGroup"),this.left=n,this.operator=e,this.right=o,this.initializeLogicGroup=function(e,n,o){this.left=n,this.operator=e,this.right=o},this.getLeft=function(){return this.left},this.setLeft=function(e){this.val=e},this.getOperator=function(){return this.operator},this.setOperator=function(e){this.operator=e},this.getRight=function(){return this.right},this.setRight=function(e){this.right=e},this.toString=function(){var e=null!==this.getLeft()&&void 0!==this.getLeft?this.getLeft().toString():"",n=null!==this.getRight()&&void 0!==this.getRight()?this.getRight().toString():"";return"("+e+" "+this.getOperator()+" "+n+")"}},kony.sdk.dto.And=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.And"),2!==arguments.length&&kony.sdk.logsdk.error("### kony.sdk.dto.And:: Error: invalid number of arguments, expected are left and right"),null!==n&&null!==e&&void 0!==n&&void 0!==e&&kony.sdk.util.validateCriteriaObject(e)&&kony.sdk.util.validateCriteriaObject(n)?kony.sdk.dto.LogicGroup.call(this,"AND",e,n):kony.sdk.logsdk.error("### kony.sdk.dto.And:: Error: Validation Error"),this.initializeAnd=function(e,n){kony.sdk.dto.LogicGroup.call(this,"AND",e,n)}},kony.sdk.dto.Or=function(e,n){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Or"),2!==arguments.length&&kony.sdk.logsdk.error("### kony.sdk.dto.Or:: Error: invalid number of arguments, expected are left and right"),null!==n&&null!==e&&void 0!==n&&void 0!==e&&kony.sdk.util.validateCriteriaObject(e)&&kony.sdk.util.validateCriteriaObject(n)?kony.sdk.dto.LogicGroup.call(this,"OR",e,n):kony.sdk.logsdk.error("### kony.sdk.dto.Or:: Error: Validation Error"),this.initializeOr=function(e,n){kony.sdk.dto.LogicGroup.call(this,"OR",e,n)}},kony.sdk.dto.Not=function(e){1!==arguments.length&&kony.sdk.logsdk.error("### kony.sdk.dto.Not:: Error: invalid number of arguments, expected right"),null!=e&&kony.sdk.util.validateCriteriaObject(e)?kony.sdk.dto.LogicGroup.call(this,"NOT",null,e):kony.sdk.logsdk.error("### kony.sdk.dto.Not:: Error: Validation Error"),this.initializeNot=function(e){kony.sdk.dto.LogicGroup.call(this,"NOT",null,e)}},kony.sdk.dto.Expression=function(){this.term,this.operator,this.expression;var e=this;function n(e,n){if(n===kony.sdk.constants.Operator.OR?s(kony.sdk.constants.Operator.OR):n===kony.sdk.constants.Operator.AND?s(kony.sdk.constants.Operator.AND):kony.sdk.logsdk.error("### kony.sdk.dto.Expression::initExpression:: Error: Invalid Operator"),null!=e&&e instanceof Array&&e.length>0){if(kony.sdk.util.validateCriteriaObject(e[0])&&t(e[0]),e.length>1){var r=n;e.shift(),o(new kony.sdk.dto.Expression(e,r))}}else kony.sdk.util.validateCriteriaObject(e)?t(e):kony.sdk.logsdk.error("### kony.sdk.dto.Expression::initExpression:: Error: Validation Error")}function o(n){n instanceof kony.sdk.dto.Expression?e.expression=n:kony.sdk.logsdk.error("### kony.sdk.dto.Expression::setExpression:: Error: expression not an instance of kony.sdk.do.Expression")}function t(n){kony.sdk.util.validateCriteriaObject(n)?e.term=n:kony.sdk.logsdk.error("### kony.sdk.dto.Expression::setTerm:: Error: Validation Error")}function s(n){e.operator=n}1===arguments.length?kony.sdk.util.validateCriteriaObject(arguments[0])?t(arguments[0]):kony.sdk.logsdk.error("### kony.sdk.dto.Expression:: Error: Validation Error"):2===arguments.length?n(arguments[0],arguments[1]):3===arguments.length?function(e,t,s){t===kony.sdk.constants.Operator.OR?n(e,kony.sdk.constants.Operator.OR):t===kony.sdk.constants.Operator.AND?n(e,kony.sdk.constants.Operator.AND):kony.sdk.logsdk.error("### kony.sdk.dto.Expression::initExpressionByExpression:: Error: Invalid Operator");o(s)}(arguments[0],arguments[1],arguments[2]):kony.sdk.logsdk.error("### kony.sdk.dto.Expression:: Error: invalid number of arguments, atleast 'term' is expected"),this.getTerm=function(){return this.term},this.getOperator=function(){return this.operator},this.getExpression=function(){return this.expression},this.toString=function(){var e=null;return null!==this.getTerm()&&void 0!==this.getTerm()||null!==this.getExpression()&&void 0!==this.getExpression()?null===this.getExpression()||void 0===this.getExpression()?e=this.getTerm().toString():this.getOperator()===kony.sdk.constants.Operator.AND?e=new kony.sdk.dto.And(this.getTerm(),this.getExpression()).toString():this.getOperator()===kony.sdk.constants.Operator.OR&&(e=new kony.sdk.dto.Or(this.getTerm(),this.getExpression()).toString()):e="",e}},kony.sdk.dto.InCriteria=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.InCriteria"),this.column,this.values;var e=this;2===arguments.length?function(n,o){if(kony.sdk.logsdk.trace("Entering into getInCriteriaByColumnAndCollection"),n instanceof kony.sdk.dto.Column&&o instanceof Array&&o.length>0)return e.column=n,e.values=o,e;kony.sdk.logsdk.error("### kony.sdk.dto.InCriteria::getInCriteriaByColumnAndCollection:: Error: Validation Error")}(arguments[0],arguments[1]):3===arguments.length?function(n,o,t){if(kony.sdk.logsdk.trace("Entering into getInCriteriaByTableAndCollection"),n instanceof kony.sdk.dto.Table)return e.column=new kony.sdk.dto.Column(n,o),e.values=t,e;kony.sdk.logsdk.error("### kony.sdk.dto.InCriteria::getInCriteriaByTableAndCollection:: Error: table is not an instance of kony.sdk.dto.Table")}(arguments[0],arguments[1],arguments[2]):kony.sdk.logsdk.error("### kony.sdk.dto.InCriteria:: Error: invalid number of arguments, atleast column,values are expected"),this.getColumnForTable=function(e,n){if(e instanceof kony.sdk.dto.Table)return new kony.sdk.dto.Column(e,n);kony.sdk.logsdk.error("### kony.sdk.dto.InCriteria::getColumnForTable:: Error: table not an instance of kony.sdk.dto.Table")},this.getColumn=function(){return this.column},this.setColumn=function(e){e instanceof kony.sdk.dto.Column&&(this.column=e)},this.setValues=function(e){this.values=e},this.getValues=function(){return this.values},this.toString=function(){var e="";if(e=this.column.toString()+" IN (",null!==this.values&&void 0!==this.values&&this.values.length>0)for(var n=0;n<this.values.length;n++){var o=new kony.sdk.dto.Criteria;e+="string"==typeof this.values[n]?o.quote(this.values[n]):this.values[n],n!==this.values.length-1&&(e+=", ")}return e+=")"}},kony.sdk.dto.Exists=function(e){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Exists"),e instanceof kony.sdk.dto.SelectQuery?this.subSelect=e:kony.sdk.logsdk.error("### kony.sdk.dto.Exists:: Error: subSelectQuery is not an instance of kony.sdk.dto.SelectQuery"),this.getSubSelect=function(){return this.subSelect},this.setSubSelect=function(e){e instanceof kony.sdk.dto.SelectQuery?this.subSelect=e:kony.sdk.logsdk.error("### kony.sdk.dto.Exists::subSelectQuery:: Error: subSelectQuery is not an instance of kony.sdk.dto.SelectQuery")},this.toString=function(){return"EXISTS ( "+this.subSelect.toString()+" )"}},kony.sdk.dto.Criteria=function(){kony.sdk.logsdk.trace("Entering into kony.sdk.dto.Criteria"),this.quote=function(e){if(null==e)return"null";var n=[];n.push("'");for(var o=0;o<e.length;o++){var t=e.charAt(o);"\\"!=t&&'"'!=t&&"'"!=t||n.push("\\"),n.push(t)}return n.push("'"),n.join("")}},kony.sdk.dto.Match=function(){this.column,this.matchType,this.value;var e=this;3===arguments.length?function(n,o,t){if(n instanceof kony.sdk.dto.Column){if(e.column=n,o===kony.sdk.constants.MatchType.EQUALS||o===kony.sdk.constants.MatchType.GREATER||o===kony.sdk.constants.MatchType.GREATEREQUAL||o===kony.sdk.constants.MatchType.LESS||o===kony.sdk.constants.MatchType.LESSEQUAL||o===kony.sdk.constants.MatchType.STARTSWITH||o===kony.sdk.constants.MatchType.CONTAINS||o===kony.sdk.constants.MatchType.LIKE||o===kony.sdk.constants.MatchType.ENDSWITH||o===kony.sdk.constants.MatchType.NOTEQUAL||o===kony.sdk.constants.MatchType.ISNULL||o===kony.sdk.constants.MatchType.ISNOTNULL)return o!==kony.sdk.constants.MatchType.ISNULL&&o!==kony.sdk.constants.MatchType.ISNOTNULL&&(null!=t?(t instanceof Array&&t.length<=0&&kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByColumn:: Error: value is undefined ,null or empty object"),e.value=t):kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByColumn:: Error: Invalid MatchType")),e.matchType=o,e;kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByColumn:: Error: Invalid MatchType")}else kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByColumn:: Error: columnObj is not an instance of kony.sdk.dto.Column")}(arguments[0],arguments[1],arguments[2]):4===arguments.length?function(n,o,t,s){if(n instanceof kony.sdk.dto.Table){if(null!=o&&"string"==typeof o&&o.trim().length>0)return e.column=n.getColumn(o),t!==kony.sdk.constants.MatchType.EQUALS&&t!==kony.sdk.constants.MatchType.GREATER&&t!==kony.sdk.constants.MatchType.GREATEREQUAL&&t!==kony.sdk.constants.MatchType.LESS&&t!==kony.sdk.constants.MatchType.LESSEQUAL&&t!==kony.sdk.constants.MatchType.STARTSWITH&&t!==kony.sdk.constants.MatchType.CONTAINS&&t!==kony.sdk.constants.MatchType.LIKE&&t!==kony.sdk.constants.MatchType.ENDSWITH&&t!==kony.sdk.constants.MatchType.NOTEQUAL&&t!==kony.sdk.constants.MatchType.ISNULL&&t!==kony.sdk.constants.MatchType.ISNOTNULL?kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByTableAndColName:: Error: Invalid MatchType"):(t!==kony.sdk.constants.MatchType.ISNULL&&t!==kony.sdk.constants.MatchType.ISNOTNULL&&(null!=s?e.value=s:kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByTableAndColName:: Error: value is undefined ,null or empty object")),e.matchType=t),e;kony.sdk.logsdk.error("### kony.sdk.dto.Match::initMatchByTableAndColName:: Error: Invalid MatchType")}else kony.sdk.logsdk.error("### kony.sdk.dto.Match:: Error: columnObj is not an instance of kony.sdk.dto.Column")}(arguments[0],arguments[1],arguments[2],arguments[3]):kony.sdk.logsdk.error("### kony.sdk.dto.Match:: Error: Invalid number of arguments, atleast columnObj,matchType,value is required"),this.getColumn=function(){if(null!==this.column&&void 0!==this.column)return this.column;kony.sdk.logsdk.error("### kony.sdk.dto.Match::getColumn:: Error: column is null or undefined")},this.getMatchType=function(){if(null!==this.matchType&&void 0!==this.matchType)return this.matchType;kony.sdk.logsdk.error("### kony.sdk.dto.Match::getMatchType:: Error: matchType is null or undefined")},this.setMatchType=function(e){this.matchType=e},this.getValue=function(){return this.value},this.toString=function(){if(null!==this.matchType&&void 0!==this.matchType&&null!==this.column&&void 0!==this.column){var e=null,n=null,o=this.matchType;this.matchType.name;if(this.value instanceof Date){var t,s=this.getValue().getMonth()+1,r=this.getValue().getDate();return s<10&&(s="0"+s),r<10&&(r="0"+r),t=this.getValue().getFullYear()+"-"+s+"-"+r,e="date(substr("+this.getColumn().toString()+",0,11)) "+this.getMatchType().value+"'"+t+"'"}if("boolean"==typeof this.getValue()){if(!0===this.getValue())return"("+this.getColumn().toString()+" = 'true' OR "+this.getColumn().toString()+" = 1)";if(!1===this.getValue())return"("+this.getColumn().toString()+" = 'false' OR "+this.getColumn().toString()+" = 0)";this.value="'"+this.value+"'"}if(e=this.getColumn().toString()+" "+this.getMatchType().value+" ","string"==typeof this.getValue()){if(n=kony.sdk.util.replaceAll(this.getValue(),"'",""),kony.sdk.util.matchIgnoreCase(o.name,"STARTSWITH"))n+="%";else if(kony.sdk.util.matchIgnoreCase(o.name,"CONTAINS"))n="%"+n+"%";else if(kony.sdk.util.matchIgnoreCase(o.name,"ENDSWITH"))n="%"+n;else{if(kony.sdk.util.matchIgnoreCase(o.name,"ISNULL"))return"(lower("+this.getColumn().toString()+") = 'null' OR "+this.getColumn().toString()+" IS NULL)";if(kony.sdk.util.matchIgnoreCase(o.name,"ISNOTNULL"))return"(lower("+this.getColumn().toString()+") != 'null' OR "+this.getColumn().toString()+" IS NOT NULL)"}n=(new kony.sdk.dto.Criteria).quote(n)}else{if(kony.sdk.util.matchIgnoreCase(o.name,"ISNULL"))return"(lower("+this.getColumn().toString()+") = 'null' OR "+this.getColumn().toString()+" IS NULL)";if(kony.sdk.util.matchIgnoreCase(o.name,"ISNOTNULL"))return"(lower("+this.getColumn().toString()+") != 'null' OR "+this.getColumn().toString()+" IS NOT NULL)";n=this.getValue().toString()}return kony.sdk.util.matchIgnoreCase(o.name,"ISNULL")||kony.sdk.util.matchIgnoreCase(o.name,"ISNOTNULL")||(e+=n),e}kony.sdk.logsdk.error("### kony.sdk.dto.Match::toString:: Error: matchType is undefined")}},kony.sdk.prototype.getSyncService=function(){throw new Exception(kony.sdk.errorConstants.SYNC_FAILURE,"Sync service is no longer supported ")},kony.sdk&&(kony.sdk.offline={}),kony.sdk.offline.isOfflineEnabled=!1,kony.sdk.offline.persistToken=!1,kony.sdk.constants.iterations=1024,kony.sdk.constants.keyLength=256,kony.sdk.offline.saveUserAuthInformation=function(e,n){if(kony.sdk.isNullOrUndefined(e)||"string"!=typeof e||0===e.length||kony.sdk.isNullOrUndefined(n)||"object"!=typeof n||0===Object.keys(n).length)kony.sdk.logsdk.warn("### kony.sdk.offline.saveUserAuthInformation invalid arguments passed, returning");else{var o=JSON.stringify(n),t=kony.sdk.util.encryptText(o,[kony.sdk.util.getSharedClientId()],kony.sdk.constants.ENCRYPTION_ALGO_AES);kony.sdk.dataStore.setItem(e,t),kony.sdk.logsdk.info("saved auth info from the login success response")}},kony.sdk.offline.getUserAuthInformation=function(e){var n,o=null;return kony.sdk.isNullOrUndefined(e)||"string"!=typeof e||(n=kony.sdk.dataStore.getItem(e)),kony.sdk.isNullOrUndefined(n)||(o=kony.sdk.util.decryptText(n,[kony.sdk.util.getSharedClientId()],kony.sdk.constants.ENCRYPTION_ALGO_AES),(kony.sdk.isNullOrUndefined(o)||""===o)&&kony.sdk.offline.removePersistedUserAuthInformation()),o},kony.sdk.offline.getClaimsToken=function(){var e=kony.sdk.offline.getUserAuthInformation("authResponse");return null!=e&&null!=e?JSON.parse(e).claims_token:null},kony.sdk.offline.updatePersistedToken=function(e){var n=kony.sdk.offline.getUserAuthInformation(kony.sdk.constants.PERSISTED_AUTH_RESPONSE);null!=n&&null!=n&&kony.sdk.offline.saveUserAuthInformation(kony.sdk.constants.PERSISTED_AUTH_RESPONSE,e)},kony.sdk.offline.isPersistentLoginResponseEnabled=function(){var e=kony.sdk.dataStore.getItem(kony.sdk.constants.PERSIST_LOGIN_RESPONSE_FLAG);return!kony.sdk.isNullOrUndefined(e)&&!0===e},kony.sdk.offline.removePersistedUserAuthInformation=function(){kony.store.removeItem(kony.sdk.constants.PERSISTED_AUTH_RESPONSE)},kony.sdk.offline.loginOffline=function(e,n,o){kony.sdk.logsdk.warn("kony.sdk.offline.loginOffline:: Offline login not supported for spa and windows."),o(kony.sdk.error.getClientErrObj(kony.sdk.errorcodes.offline_auth_failed,kony.sdk.errormessages.offline_auth_failed))},kony.sdk.offline.saveTempUserCredentials=function(e){return kony.sdk.logsdk.warn("kony.sdk.offline.saveTempUserCredentials:: Offline login is not supported for spa and windows."),null},kony.sdk.offline.updateAuthToken=function(e){return kony.sdk.logsdk.warn("kony.sdk.offline.updateAuthToken:: Offline login is not supported for spa and windows."),null},kony.sdk.offline.updateSuccessUserCredentials=function(e){return kony.sdk.logsdk.warn("kony.sdk.offline.updateSuccessUserCredentials:: Offline login is not supported for spa and windows."),null},kony.sdk.offline.removeUserAuthInformation=function(){return kony.sdk.logsdk.warn("kony.sdk.offline.removeUserAuthInformation:: Offline login is not supported for spa and windows."),null},kony.sdk.offline.removeUserCredentials=function(e){return kony.sdk.logsdk.warn("kony.sdk.offline.removeUserCredentials:: Offline login is not supported for spa and windows."),null},kony.sdk.util.saveSSOToken=function(e){return kony.sdk.logsdk.trace("Entered Method : saveSSOToken."),kony.sdk.isNullOrUndefined(e)?(kony.sdk.logsdk.warn("SSO token is either empty, null or undefined to save"),!1):(kony.sdk.util.saveSSOTokenInLocalStorage(kony.sdk.constants.DW_SSO_TOKEN_KEY,kony.sdk.util.encryptSSOToken(e)),!0)},kony.sdk.util.getSSOToken=function(){kony.sdk.logsdk.trace("Entered Method : getSSOToken.");var e=kony.sdk.util.getSSOTokenFromLocalStorage(kony.sdk.constants.DW_SSO_TOKEN_KEY);if(kony.sdk.util.isNullOrEmptyString(e))return null;var n=kony.sdk.util.decryptSSOToken(e);return kony.sdk.util.isNullOrUndefinedOrEmptyObject(n)?null:n},kony.sdk.util.deleteSSOToken=function(){kony.sdk.logsdk.trace("Entered Method : deleteSSOToken.");var e=kony.sdk.util.getSSOTokenFromLocalStorage(kony.sdk.constants.DW_SSO_TOKEN_KEY);kony.sdk.util.isNullOrEmptyString(e)?kony.sdk.logsdk.debug("SSO token found to be empty."):(kony.sdk.util.saveSSOTokenInLocalStorage(kony.sdk.constants.DW_SSO_TOKEN_KEY,""),kony.sdk.logsdk.trace("All SSO tokens deleted."))},kony.sdk.util.saveSSOTokenInLocalStorage=function(e,n){kony.sdk.isNullOrUndefined(e)?kony.sdk.logsdk.warn("key passed cannot be null or undefined."):kony.sdk.isNullOrUndefined(n)?kony.sdk.logsdk.warn("value passed cannot be null or undefined."):localStorage.setItem(e,n)},kony.sdk.util.getSSOTokenFromLocalStorage=function(e){if(!kony.sdk.isNullOrUndefined(e))return localStorage.getItem(e);kony.sdk.logsdk.warn("key passed cannot be null or undefined.")},kony.sdk.util.getAndSaveUUIDforSSO=function(){var e=kony.sdk.util.getSSOTokenFromLocalStorage(kony.sdk.constants.SSO_SECRET_KEY);return kony.sdk.util.isNullOrUndefinedOrEmptyObject(e)&&(e=kony.license.generateUUID().toString(),kony.sdk.util.saveSSOTokenInLocalStorage(kony.sdk.constants.SSO_SECRET_KEY,e)),e};var MFAppVersion,KNYMobileFabric=null,KNYMetricsService=null,KNYMessagingService=null;function konyLogger(){this.log=function(e){kony.sdk.isDebugEnabled&&kony.print(e)}}function konyNetworkProvider(){this.post=function(e,n,o,t,s,r,i){kony.sdk.util.isNullOrEmptyString(e)?kony.sdk.verifyAndCallClosure(s,"url cannot be null or empty"):(kony.sdk.isNullOrUndefined(n)&&(n={}),kony.sdk.isNullOrUndefined(kony.sdk.currentInstance)||(e=kony.sdk.currentInstance.appendGlobalParams(e,o,n)),konyNetHttpRequest(e,n,o,"POST",r,t,s,i))},this.put=function(e,n,o,t,s,r,i){kony.sdk.util.isNullOrEmptyString(e)?kony.sdk.verifyAndCallClosure(s,"url cannot be null or empty"):(kony.sdk.isNullOrUndefined(n)&&(n={}),kony.sdk.isNullOrUndefined(kony.sdk.currentInstance)||(e=kony.sdk.currentInstance.appendGlobalParams(e,o,n)),konyNetHttpRequest(e,n,o,"PUT",r,t,s,i))},this.invokeDeleteRequest=function(e,n,o,t,s,r,i){kony.sdk.util.isNullOrEmptyString(e)?kony.sdk.verifyAndCallClosure(s,"url cannot be null or empty"):(kony.sdk.isNullOrUndefined(n)&&(n={}),kony.sdk.isNullOrUndefined(kony.sdk.currentInstance)||(e=kony.sdk.currentInstance.appendGlobalParams(e,o,n)),konyNetHttpRequest(e,n,o,"DELETE",r,t,s,i))},this.postSync=function(e,n,o){if(!kony.sdk.util.isNullOrEmptyString(e))return kony.sdk.isNullOrUndefined(n)&&(n={}),kony.sdk.isNullOrUndefined(kony.sdk.currentInstance)||(e=kony.sdk.currentInstance.appendGlobalParams(e,o,n)),konyNetHttpRequestSync(e,n,o);kony.sdk.verifyAndCallClosure(failureCallback,"url cannot be null or empty")},this.get=function(e,n,o,t,s,r,i){kony.sdk.util.isNullOrEmptyString(e)?kony.sdk.verifyAndCallClosure(s,"url cannot be null or empty"):(kony.sdk.isNullOrUndefined(n)&&(n={}),kony.sdk.isNullOrUndefined(kony.sdk.currentInstance)||(e=kony.sdk.currentInstance.appendGlobalParams(e,o,n)),konyNetHttpRequest(e,null,o,"GET",r,t,s,i))}}function konyNetHttpRequest(e,n,o,t,s,r,i,k){if(!kony.net.isNetworkAvailable(constants.NETWORK_TYPE_ANY)){var a={httpresponse:{}};return a[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.connectivity_error_code,a[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.connectivity_error_code,a[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.connectivity_error_message,a.httpresponse.headers={},a.httpresponse.url=e,void i(a)}var d,l=null;d=k&&k.httpRequestOptions&&k.httpRequestOptions instanceof Object?new kony.net.HttpRequest(k.httpRequestOptions):new kony.net.HttpRequest,k&&k.queryParams&&k.queryParams instanceof Object&&(e=function(e,n){if(n&&Object.keys(n).length>0){var o="",t="&";for(var s in n)o+=s+"="+encodeURIComponent(n[s])+t;o=o.slice(0,-1),e.indexOf("?")>-1?e+="&"+o:e+="?"+o}return e}(e,k.queryParams)),k&&k.responseType&&(d.responseType=k.responseType),k&&k.httpconfig_old&&k.httpconfig_old.timeout&&(d.timeout=1e3*k.httpconfig_old.timeout),"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&(!kony.sdk.isNullOrUndefined(KNYMobileFabric)&&!0===KNYMobileFabric.enableWithCredentialsGloabally||k&&k.xmlHttpRequestOptions&&!0===k.xmlHttpRequestOptions.enableWithCredentials)&&(d.enableWithCredentials=!0);var c=!1;if(t||(t=constants.HTTP_METHOD_POST),d.open(t,e),"application/json"===s)n&&(l=JSON.stringify(n));else if("formdata"==s||"multipart"==s)n&&(l=n);else{var y=!0;for(var u in n)y&&(l=new kony.net.FormData,y=!1),void 0!==n[u]&&("string"!=typeof n[u]&&(n[u]=JSON.stringify(n[u])),l.append(u,n[u]))}if(o)for(var u in o)d.setRequestHeader(u,o[u]);else d.setRequestHeader(kony.sdk.constants.HTTP_CONTENT_HEADER,kony.sdk.constants.CONTENT_TYPE_JSON);if(d.onReadyStateChange=function(n){var o=Number(d.readyState.toString()),t=Number(d.status.toString()),s={};if(4===o){var a=d.getAllResponseHeaders();if(a&&(a.hasOwnProperty(kony.sdk.constants.PASSTHROUGH_RESPONSE_HEADER.toLowerCase())||a.hasOwnProperty(kony.sdk.constants.PASSTHROUGH_RESPONSE_HEADER))&&!0!==kony.sdk.convertPassthroughResponseToJson)s.rawResponse=n.response;else if(k&&k[kony.sdk.constants.PASSTHROUGH]&&!0!==kony.sdk.convertPassthroughResponseToJson)s.rawResponse=n.response;else{var l=parseHttpResponse(d);l.isRawResponse?s.rawResponse=l.response:s=l.response,c=l.isInvalidResponse}if(kony.sdk.setLogLevelFromServerResponse(a),s&&!c&&(s.httpresponse={},s.httpresponse.headers=a,s.httpresponse.url=e,s.httpresponse.responsecode=t),c||!s&&t>=200&&t<300){var y={httpresponse:{}};y[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.invalid_json_code,y[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.invalid_json_message,y[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.invalid_json_code,y[kony.sdk.constants.HTTP_STATUS_CODE]=t,y.httpresponse.response=l.response,y.httpresponse.headers=a,y.httpresponse.url=e,y.httpresponse.responsecode=t,i(y)}else t>=200&&t<300?(s.opstatus||(s.opstatus=0),0==s.opstatus||s.opstatus>=500100&&s.opstatus<=500200?a&&(a.hasOwnProperty(kony.sdk.constants.PASSTHROUGH_RESPONSE_HEADER.toLowerCase())||a.hasOwnProperty(kony.sdk.constants.PASSTHROUGH_RESPONSE_HEADER))?u(s):k&&(k[kony.sdk.constants.DISABLE_INTEGRITY]||k[kony.sdk.constants.PASSTHROUGH]||k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY])?r(s):u(s):i(s)):function(e,n,o,t){var s={httpresponse:{}};408==t?(s[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.request_timed_out_code,s[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.request_timed_out_code,s[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.request_timed_out_message):503==t?(s[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.service_unavailable,s[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.service_unavailable,s[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.service_unavailable_message):504==t?(s[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.connection_timeout,s[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.connection_timeout,s[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.connection_timeout_message):t>99&&!kony.sdk.isNullOrUndefined(o)?s=o:(s[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.connectivity_error_code,s[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.connectivity_error_code,s[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.connectivity_error_message);s[kony.sdk.constants.HTTP_STATUS_CODE]=t,s.httpresponse.headers=n.getAllResponseHeaders(),s.httpresponse.url=e,i(s)}(e,d,s,t);function u(n){if("undefined"!=typeof konyRef&&konyRef&&!0===konyRef.mainRef.integrityKey)if(n.httpresponse.headers.hasOwnProperty(kony.sdk.constants.INTEGRITY_HEADER)||n.httpresponse.headers.hasOwnProperty(kony.sdk.constants.INTEGRITY_HEADER.toLowerCase()))if(kony.sdk.isNullOrUndefined(d.integrityStatus))i(kony.sdk.error.getIntegrityErrorMessage(d,e));else switch(parseInt(d.integrityStatus.toString())){case constants.HTTP_INTEGRITY_CHECK_NOT_DONE:i(kony.sdk.error.getIntegrityErrorMessage(d,e));break;case constants.HTTP_INTEGRITY_CHECK_SUCCESSFUL:r(n);break;case constants.HTTP_INTEGRITY_CHECK_FAILED:!kony.sdk.isNullOrUndefined(k)&&k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]?r(n):i(kony.sdk.error.getIntegrityErrorMessage(d,e))}else k&&null!=k&&k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]?r(n):i(kony.sdk.error.getIntegrityErrorMessage(d,e));else r(n)}}},"undefined"!=typeof konyRef&&konyRef&&!0===konyRef.mainRef.integrityKey||!kony.sdk.isNullOrUndefined(k)&&!0===k.isAppConfigCall){var g=konyRef.mainRef.integrityParams;try{kony.sdk.constants.SET_INTEGRITY_CHECK in kony.net&&kony.net.setIntegrityCheck(g)}catch(e){throw kony.sdk.logsdk.warn("Invalid Integrity properties received"),"Invalid Integrity properties received"}}else(k&&(k[kony.sdk.constants.DISABLE_INTEGRITY]||k[kony.sdk.constants.PASSTHROUGH])||"undefined"!=typeof konyRef&&konyRef&&!1===konyRef.mainRef.integrityKey||!kony.sdk.isNullOrUndefined(k)&&!1===k.isAppConfigCall)&&(kony.sdk.constants.DISABLE_INTEGRITY_CHECK in d?d.disableIntegrityCheck=!0:kony.sdk.constants.REMOVE_INTEGRITY_CHECK in kony.net&&kony.net.removeIntegrityCheck());l?d.send(l):d.send()}function konyNetHttpRequestSync(e,n,o){var t=null,s=new kony.net.HttpRequest,r=!1;s.open(constants.HTTP_METHOD_POST,e,!1);var i=!0;for(var k in n)i&&(t=new kony.net.FormData,i=!1),void 0!==n[k]&&("string"!=typeof n[k]&&(n[k]=JSON.stringify(n[k])),t.append(k,n[k]));if(o)for(var k in o)s.setRequestHeader(k,o[k]);else s.setRequestHeader(kony.sdk.constants.HTTP_CONTENT_HEADER,kony.sdk.constants.CONTENT_TYPE_JSON);s.send(t);var a=null,d=Number(s.status.toString());if(kony.sdk.setLogLevelFromServerResponse(s.getAllResponseHeaders()),s.response&&(a=s.response),a&&"string"==typeof a&&(kony.sdk.isJson(a)?a=JSON.parse(a):r=!0),a&&!r&&(a.httpresponse={},a.httpresponse.headers=s.getAllResponseHeaders(),a.httpresponse.url=e,a.httpresponse.responsecode=d),r||!a&&d>=200&&d<300){var l={httpresponse:{}};return l[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.invalid_json_code,l[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.invalid_json_message,l[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.invalid_json_code,l[kony.sdk.constants.HTTP_STATUS_CODE]=d,l.httpresponse.response=a,l.httpresponse.headers=s.getAllResponseHeaders(),l.httpresponse.url=e,l.httpresponse.responsecode=d,l}if(d>=200&&d<300)return a.opstatus||(a.opstatus=0),a;var c={};return a?(c=a).httpStatusCode=s.status.toString():(c[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.connectivity_error_code,c[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.connectivity_error_code,c[kony.sdk.constants.MF_ERROR_MSG]=kony.sdk.errormessages.connectivity_error_message),c}function konyDataStore(){this.setItem=function(e,n){if("string"!=typeof e)throw new Exception(kony.sdk.errorConstants.DATA_STORE_EXCEPTION,"Invalid Key");try{e=e.replace(/\//gi,""),kony.store.setItem(e,n)}catch(e){kony.sdk.logsdk.error("Failed to set item in dtastore:"+e)}},this.getItem=function(e){if(kony.sdk.logsdk.debug("Getting item for key:"+e),"string"!=typeof e)throw new Exception(kony.sdk.errorConstants.DATA_STORE_EXCEPTION);e=e.replace(/\//gi,"");var n=kony.store.getItem(e);return null==n?(kony.sdk.logsdk.debug("No value found with key:"+e),null):n},this.removeItem=function(e){if(kony.sdk.logsdk.debug("Removing item for key:"+e),"string"!=typeof e)throw new Exception(Error.DATA_STORE_EXCEPTION);e=e.replace(/\//gi,""),kony.store.removeItem(e)},this.destroy=function(){kony.sdk.logsdk.info("Destroying data store for this app"),kony.store.clear()},this.getAllItems=function(){kony.sdk.logsdk.info("Getting all item from data store");for(var e={},n=kony.store.length(),o=0;o<n;o++){var t=kony.store.key(o),s=kony.store.getItem(t);e[t]=s}return e},this.setSecureItem=function(e,n){kony.sdk.logsdk.info("saving data after encryption of plain data"),kony.sdk.util.isJsonObject(n)&&(n=JSON.stringify(n));var o=[kony.sdk.util.getSharedClientId()],t=kony.sdk.constants.ENCRYPTION_ALGO_AES,s=kony.sdk.util.encryptText(n,o,t);this.setItem(e,s)},this.getSecureItem=function(e){kony.sdk.logsdk.info("retrieving encrypted data as plain data");var n=this.getItem(e),o=[kony.sdk.util.getSharedClientId()],t=kony.sdk.constants.ENCRYPTION_ALGO_AES,s=kony.sdk.util.decryptText(n,o,t);return kony.sdk.isJson(s)&&(s=JSON.parse(s)),s}}function parseHttpResponse(e){var n=!1,o=!1,t={isRawResponse:!1},s="",r=null;if(kony.sdk.isNullOrUndefined(e)||kony.sdk.isNullOrUndefined(e.response))kony.sdk.logsdk.warn("parseHttpResponse :: Null or Invalid response received");else if(e.responseType&&"blob"===e.responseType)t.response=e.response,t.isRawResponse=!0;else if(r=kony.sdk.cloneObject(e.response),kony.sdk.logsdk.debug("parseHttpResponse :: Network response :",r),kony.sdk.util.isJsonObject(r)?(t.response=r,o=!0):kony.sdk.util.isValidString(r)&&kony.sdk.isJson(r)&&(t.response=JSON.parse(r),o=!0),!o){kony.sdk.util.isValidString(e.response)?t.response=r:t.response=e.response;var i=kony.sdk.util.convertJsonKeysToLowerCase(e.getAllResponseHeaders());kony.sdk.isNullOrUndefined(i)?kony.sdk.logsdk.warn("parseHttpResponse :: received null response headers  "+i):s=i[kony.sdk.constants.HTTP_CONTENT_HEADER.trim().toLowerCase()],kony.sdk.logsdk.warn("parseHttpResponse :: content-type of response "+s),kony.sdk.util.isValidString(s)&&s.startsWith(kony.sdk.constants.CONTENT_TYPE_JSON)?(kony.sdk.logsdk.warn("parseHttpResponse :: Unhandled content received for content-type application/json"),n=!0):t.isRawResponse=!0}return t.isInvalidResponse=n,t}kony.setupsdks=function(e,n,o){var t={},s=null;t=e.appConfig.svcDoc,s={appKey:e.appKey,appSecret:e.appSecret,serviceUrl:e.serviceUrl};var r,i,k,a,d=function n(){var o=null,t=null,s=null;if(!0===kony.sdk.clearAppCredentials?kony.sdk.dataStore.removeItem(e.appConfig.appId):(o=kony.sdk.dataStore.getItem(appConfig.appId),s=kony.sdk.dataStore.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.MOBILE_FABRIC_SERVICE_DOC))),kony.sdk.isNullOrUndefined(o))return kony.sdk.logsdk.debug("Failed to retrieve config data form Cache"),null;if(t=JSON.parse(o),kony.sdk.isNullOrUndefined(t))return kony.sdk.logsdk.debug("Failed to retrieve config data form Cache"),null;if(kony.sdk.util.isAppConfigEncrypted()){var r=kony.sdk.util.decryptAppConfig(t.appKey),i=kony.sdk.util.decryptAppConfig(t.appSecret),k=kony.sdk.util.decryptAppConfig(t.serviceUrl);if(kony.sdk.isNullOrUndefined(r)&&kony.sdk.isNullOrUndefined(i)&&kony.sdk.isNullOrUndefined(k)&&kony.sdk.isNullOrUndefined(s))return kony.sdk.logsdk.debug("Failed to retrieve config data form Cache"),null;if(t.appKey=r,t.appSecret=i,t.serviceUrl=k,kony.sdk.isNullOrUndefined(s))return kony.sdk.logsdk.debug("Failed to retrieve service doc form Cache"),null;var a=kony.sdk.util.decryptAppConfig(s);if(kony.sdk.isNullOrUndefined(a))return kony.sdk.logsdk.debug("Failed to decrypt cached service doc"),null;try{s=JSON.parse(a)}catch(e){return kony.sdk.logsdk.debug("Failed to parse the service doc : ",e.toString()),null}}else try{s=JSON.parse(s)}catch(e){return kony.sdk.isNullOrUndefined(kony.sdk.dataStore.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.SHARED_CLIENT_IDENTIFIER)))?(kony.sdk.logsdk.debug("Failed to parse App Service Doc data form Cache"+e),null):(kony.sdk.logsdk.debug("Setting Encryption App Config flag to true"),kony.sdk.dataStore.setItem(kony.sdk.util.prefixAppid(kony.sdk.constants.ENCRYPTION_APPCONFIG_FLAG),!0),n())}return{dsAppMetaData:t,dsAppServiceDoc:s}}();if(!kony.sdk.util.isNullOrUndefinedOrEmptyObject(d)){var l=d.dsAppServiceDoc,c=d.dsAppMetaData;if(c.appKey===e.appKey&&c.appSecret===e.appSecret&&function(){if(u(c.serviceUrl).toLowerCase()!==u(e.serviceUrl).toLowerCase())return!1;if(g(c.serviceUrl)!==g(e.serviceUrl))return!1;return!0}()&&Math.abs(parseFloat(appConfig.svcDoc.app_version)-parseFloat(l.app_version))<1e-9){var y=new Date(parseInt(e.appConfig.svcDoc.service_doc_etag,16)).getTime();new Date(parseInt(kony.sdk.dataStore.getItem(kony.sdk.constants.TOOLS_ETAG_ID),16)).getTime()>y?(t=l,s=c):kony.sdk.util.deleteMetadatafromDs()}else kony.sdk.util.deleteMetadatafromDs()}function u(e){var n=e.indexOf("//");n+=2;var o=e.substring(n);return e.substring(0,o.indexOf("/")+n)}function g(e){return e.split(u(e))[1]}null===KNYMobileFabric&&(r=e.appConfig.appId,i=e.appConfig.appName,k=e.appConfig.appVersion,(a=new kony.sdk).setClientParams({aid:r,aname:i,aversion:k}),KNYMobileFabric=a),e&&1==e.enableCORSCredentialsGlobally&&(KNYMobileFabric.enableWithCredentialsGloabally=!0),e&&e.appConfig&&""===function(e){var n="";return e.isturlbase?n=e.isturlbase+"/IST":e.secureurl?n=getFromServerUrl(e.secureurl,"IST"):e.url&&(n=getFromServerUrl(e.url,"IST")),n}(e.appConfig)&&kony.license&&kony.license.setIsLicenseUrlAvailable&&(kony.license.setIsLicenseUrlAvailable(!1),kony.sdk.isLicenseUrlAvailable=!1);try{KNYMobileFabric.initWithServiceDoc(s.appKey,s.appSecret,t),KNYMetricsService=function(e,n){var o=e.getMetricsService();return kony.sdk.isNullOrUndefined(o)||o.setEventTracking(n),o}(KNYMobileFabric,e.eventTypes),kony.sdk.getPlatformName()!==kony.sdk.constants.PLATFORM_THIN_CLIENT&&function(e){kony.sdk.skipAnonymousCall?e.isAnonymousProvider=!0:e.getIdentityService("$anonymousProvider").login(null,(function(e){kony.sdk.logsdk.trace("Anonymous login finished successfully.")}),(function(e){kony.sdk.logsdk.warn("Anonymous login finished with failure. \n"+JSON.stringify(e))}))}(KNYMobileFabric),kony.sdk.verifyAndCallClosure(n,KNYMobileFabric)}catch(e){var f=e?e.toString():"";kony.print("Error in setupsdks "+f),kony.sdk.verifyAndCallClosure(o,e)}},kony.invokeEASMetaServiceWithLiteInit=function(e,n,o,t){var s=null,r=new konyNetworkProvider;!function(e,n,o){if(!(e&&e.appKey&&e.appSecret&&e.serviceUrl))return void kony.sdk.verifyAndCallClosure(o,"Invalid initialization parameters passed. Please check appKey, appSecret and ServiceUrl parameters");r=new konyNetworkProvider;var t=e.serviceUrl.trim(),s={};s[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,s[kony.sdk.constants.IS_APP_CONFIG_CALL]=!0;var i={};i[kony.sdk.constants.APP_KEY_HEADER]=e.appKey,i[kony.sdk.constants.APP_SECRET_HEADER]=e.appSecret,i[kony.sdk.constants.HTTP_OVERRIDE_HEADER]="GET",kony.sdk.setFabricAppVersion(null),r.post(t,{},i,(function(e){e=kony.sdk.formatSuccessResponse(e),n(e)}),(function(e){o(e)}),null,null)}(e,(function(i){var k=null;if(i&&"object"==typeof i.services_meta&&(k=i.services_meta[n.serviceName]),kony.sdk.isNullOrUndefined(k)){var a={};a[kony.sdk.constants.MF_OPSTATUS]=kony.sdk.errorcodes.invalid_user_app_services,a[kony.sdk.constants.MF_ERROR_CODE]=kony.sdk.errorcodes.invalid_user_app_services,a[kony.sdk.constants.MF_ERROR_MSG]="Service name '"+n.serviceName+"' doesn't exist.",t(a)}else{!function(e,n,o,t){var i={};i[kony.sdk.constants.APP_KEY_HEADER]=n.appKey,i[kony.sdk.constants.APP_SECRET_HEADER]=n.appSecret,i[kony.sdk.constants.SDK_TYPE_HEADER]=kony.sdk.getSdkType(),i[kony.sdk.constants.SDK_VERSION_HEADER]=kony.sdk.version,i[kony.sdk.constants.PLATFORM_TYPE_HEADER]=kony.sdk.getPlatformName(),i[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,i[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_FORM_URL_ENCODED,r.post(e,{},i,(function(e){e=kony.sdk.formatSuccessResponse(e),s=e.claims_token.value,o(e.claims_token.value)}),(function(e){t(e)}),null,null)}(i.selflink.replace("/appconfig","/login"),e,(function(e){s=e,function(e,n,o,t,r,i){t&&!kony.sdk.isNullOrUndefined(o)&&kony.sdk.isNullOrUndefined(t.headers)&&(t.headers=o);var k=encodeURI(stripTrailingCharacter(e.url+"/objects/","/"));!function(e,n,o,t,r,i){var k=o.dataObject,a=kony.sdk.isNullOrUndefined(k)?null:k.getOdataUrl();kony.sdk.isNullOrUndefined(a)&&(a=o.oDataUrl);var d=o.headers,l=o.queryParams,c=t+"/"+n,y=null;e&&(y=e.version);kony.sdk.isNullOrUndefined(a)?kony.sdk.isNullOrUndefined(l)||(c=c+"?"+kony.sdk.util.objectToQueryParams(l)):(c=c+"?"+encodeURI(a),kony.sdk.isNullOrUndefined(l)||(c=c+"&"+kony.sdk.util.objectToQueryParams(l)));d||(d={});var u=!1;for(var g in d)null!==g&&"undefined"!==g&&g.toLowerCase()===kony.sdk.constants.API_VERSION_HEADER.toLowerCase()&&(u=!0);u||(d[kony.sdk.constants.API_VERSION_HEADER]=y);!function(e,n,o,t,r,i,k,a){var d=new konyNetworkProvider,l={};r||(r="POST");l[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=s,l[kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT]=kony.sdk.constants.CONTENT_TYPE_JSON,l[kony.sdk.constants.HTTP_CONTENT_HEADER]=kony.sdk.constants.CONTENT_TYPE_JSON;var c=kony.sdk.getDeviceId();kony.sdk.isNullOrUndefined(c)||(l[kony.sdk.constants.DEVICEID_HEADER]=c);if(o){var y="";for(var u in o)kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT.toLowerCase()===u.toLowerCase()?l[y=kony.sdk.constants.HTTP_REQUEST_HEADER_ACCEPT].toLowerCase()!==o[u].toLowerCase()&&(l[u]=l[y]+","+o[u]):kony.sdk.constants.KONY_AUTHORIZATION_HEADER.toLowerCase()===u.toLowerCase()?l[y=kony.sdk.constants.KONY_AUTHORIZATION_HEADER]!==o[u]&&(l[y]=o[u]):"content-type"===u.toLowerCase()?l[y=kony.sdk.constants.HTTP_CONTENT_HEADER].toLowerCase()!==o[u].toLowerCase()&&(l[y]=o[u]):l[u]!==o[u]&&(l[u]=o[u])}function g(e){kony.sdk.verifyAndCallClosure(i,e)}function f(e,n,o){!e||n&&o||(o=e),kony.sdk.verifyAndCallClosure(k,kony.sdk.error.getObjectServiceErrObj(o))}"GET"===r?d.get(e,null,l,g,f,"formdata",a):d.post(e,t,l,g,f,"formdata",a)}(c,0,d,null,kony.sdk.constants.HTTP_METHOD_GET,(function(e){kony.sdk.verifyAndCallClosure(r,e)}),(function(e){kony.sdk.verifyAndCallClosure(i,e)}),kony.sdk.util.checkAndFetchNetworkProviderOptions(o))}(e,n,t,k,r,i)}(k,n.objectName,n.headers,n.params,(function(e){o(e)}),(function(e){t(e)}))}),(function(e){t(e)}))}}),(function(e){t(e)}))},kony.sdk.util=kony.sdk.util||{},overrideNetworkFlag=!1,kony.sdk.isNetworkAvailable=function(){return(void 0===overrideNetworkFlag||null===overrideNetworkFlag||!overrideNetworkFlag||!0!==overrideNetworkFlag)&&kony.net.isNetworkAvailable(constants.NETWORK_TYPE_ANY)},kony.sdk.overrideNetworkFlag=function(){overrideNetworkFlag=!0},kony.sdk.resetNetworkFlag=function(){overrideNetworkFlag=!1,overrideNetworkFlag=void 0},kony.sdk.overrideAnonymousLoginFlag=function(){kony.sdk.skipAnonymousCall=!0},kony.sdk.resetAnonymousLoginFlag=function(){kony.sdk.skipAnonymousCall=!1},kony.sdk.getSdkType=function(){return kony.sdk.constants.SDK_TYPE_IDE},kony.sdk.getPayload=function(e){var n={};if(n.os=kony.os.deviceInfo().version+"",n.dm=kony.os.deviceInfo().model,n.did=kony.sdk.getDeviceId(),n.ua=kony.os.userAgent(),appConfig)n.aid=appConfig.appId,n.aname=appConfig.appName;else{var o=e.getClientParams();n.aid=o.aid?o.aid:e.mainRef.baseId,n.aname=o.aname?o.aname:e.mainRef.name}if(n.chnl=kony.sdk.getChannelType(),n.plat=kony.sdk.getPlatformName(),n.plat===kony.sdk.constants.PLATFORM_IOS&&-1!==n.dm.toLowerCase().indexOf("ipod")&&(n.chnl="ipod"),n.aver=appConfig.appVersion,n.atype=kony.sdk.getAType(),n.stype="b2c",n.kuid=e.getUserId(),n.mfaid=e.mainRef.appId,n.mfbaseid=e.mainRef.baseId,n.mfaname=e.mainRef.name,n.sdkversion=kony.sdk.version,n.sdktype=kony.sdk.getSdkType(),kony.application.getCurrentForm()){var t=kony.application.getCurrentForm().id;t&&(n.fid=t)}return n.sessiontype=kony.sdk.util.getSessionType(),n.clientUUID=e.clientUUID,n},kony.sdk.getDeviceId=function(){return kony.os.deviceInfo().deviceid},kony.sdk.getChannelType=function(){return"desktop","desktop"},kony.sdk.getPlatformName=function(){return kony.sdk.constants.PLATFORM_THIN_CLIENT},kony.sdk.util.isPlatformPlainJS=function(){return!0,true},kony.sdk.util.createSessionAndSendIST=function(){kony.license.createSession(),kony.license.captureKonyLicenseUsage(!0)},kony.mbaas.invokeMbaasServiceFromKonyStudio=function(e,n,o,t,s,r){var i=kony.sdk.getCurrentInstance();if(!i)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+"this service.");var k=i.getIntegrationService(o),a={};n&&n.httpconfig&&(a.httpconfig_old=n.httpconfig,delete n.httpconfig),n&&n.httpRequestOptions&&n.httpRequestOptions instanceof Object&&(a.httpRequestOptions=n.httpRequestOptions,delete n.httpRequestOptions),n&&n.xmlHttpRequestOptions&&n.xmlHttpRequestOptions instanceof Object&&(a.xmlHttpRequestOptions=n.xmlHttpRequestOptions,delete n.xmlHttpRequestOptions);var d=null;n&&n.httpheaders&&(d=n.httpheaders,delete n.httpheaders),k.invokeOperation(t,d,n,(function(e){"function"==typeof s&&s(400,e,r)}),(function(e){"function"==typeof s&&s(400,e,r)}),a)},kony.mbaas.invokeMbaasServiceFromKonyStudioSync=function(e,n,o,t){var s=kony.sdk.getCurrentInstance();if(!s)throw new Exception(kony.sdk.errorConstants.INIT_FAILURE,kony.sdk.constants.INIT_FAILURE_MESSAGE+"this service.");var r=s.getIntegrationService(o),i=null;return n&&n.httpheaders&&(i=n.httpheaders,delete n.httpheaders),r.invokeOperationSync(t,i,n)},kony.mbaas.invokeMbaasServiceFromKonyStudioAsync=function(e,n,o,t,s,r){kony.mbaas.invokeMbaasServiceFromKonyStudio(e,n,o,t,s,r)},kony.sdk.getFormData=function(e){var n=new kony.net.FormData;return n.append(kony.sdk.constants.JSON_DATA,JSON.stringify(e)),n},kony.sdk.updateFormData=function(e,n,o){return e.append(n,JSON.stringify(o)),e},kony.sdk.getAType=function(){kony.sdk.constants.SDK_ATYPE_NATIVE;return kony.sdk.constants.SDK_ATYPE_SPA},kony.sdk.setLicenseCall=function(e,n,o){var t=o.reportingsvc.session;if("undefined"!=typeof appConfig){if(e===appConfig.appKey&&n===appConfig.appSecret&&void 0!==appConfig.svcDoc&&t===appConfig.svcDoc.reportingsvc.session)return;appConfig.isturlbase=t.replace("/IST",""),appConfig.appKey=e,appConfig.appSecret=n,appConfig.serviceUrl=o.selflink,appConfig.svcDoc=o,kony.sdk.util.createSessionAndSendIST()}},kony.sdk.util.saveMetadatainDs=function(e,n,o){var t={appKey:kony.sdk.util.encryptAppConfig(e),appSecret:kony.sdk.util.encryptAppConfig(n),serviceUrl:kony.sdk.util.encryptAppConfig(o.selflink)};kony.sdk.dataStore.setItem(kony.sdk.constants.TOOLS_ETAG_ID,o.service_doc_etag),kony.sdk.logsdk.debug("Update done. Current version = "+kony.sdk.getCurrentInstance().mainRef.config.service_doc_etag+" Updated to "+o.service_doc_etag),kony.sdk.dataStore.setItem(kony.sdk.util.prefixAppid(kony.sdk.constants.MOBILE_FABRIC_SERVICE_DOC),kony.sdk.util.encryptAppConfig(JSON.stringify(o))),kony.sdk.dataStore.setItem(appConfig.appId,JSON.stringify(t)),kony.sdk.dataStore.setItem(kony.sdk.util.prefixAppid(kony.sdk.constants.ENCRYPTION_APPCONFIG_FLAG),!0),kony.sdk.logsdk.info("### saveMetadatainDs:: metadata saved successfuly in dataStore")},kony.sdk.util.deleteMetadatafromDs=function(){kony.sdk.dataStore.removeItem(appConfig.appId),kony.sdk.dataStore.removeItem(kony.sdk.util.prefixAppid(kony.sdk.constants.MOBILE_FABRIC_SERVICE_DOC)),kony.sdk.dataStore.removeItem(kony.sdk.util.prefixAppid(kony.sdk.constants.ENCRYPTION_APPCONFIG_FLAG)),kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.dataStore.getItem(kony.sdk.constants.PERSISTED_AUTH_RESPONSE))&&kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.dataStore.getItem(kony.sdk.constants.OFFLINE_LOGIN_AUTH_RESPONSE))&&kony.sdk.util.isNullOrUndefinedOrEmptyObject(kony.sdk.dataStore.getItem(kony.sdk.constants.PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS))&&(kony.sdk.logsdk.debug("### deleteMetadatafromDs:: Login meta not available, deleting identifier."),kony.sdk.dataStore.removeItem(kony.sdk.util.prefixAppid(kony.sdk.constants.SHARED_CLIENT_IDENTIFIER))),kony.sdk.logsdk.info("### deleteMetadatafromDs:: metadata deleted successfuly from dataStore")},kony.sdk.isValidDeeplinkCallback=function(e){return!(!e||e.launchmode!=kony.sdk.constants.LAUNCHMODE_DEEPLINK||!e.launchparams.code)},kony.sdk.getReportingParamsForOfflineObjects=function(){var e=kony.sdk.getPayload(konyRef);return e.xmode="offline",e.rsid=kony.sdk.currentInstance.getSessionId(),JSON.stringify(e)},kony.sdk.setFabricAppVersion=function(e){MFAppVersion=e},kony.sdk.getFabricAppVersion=function(){return kony.sdk.isNullOrUndefined(MFAppVersion)?kony.sdk.isNullOrUndefined(appConfig)||kony.sdk.isNullOrUndefined(appConfig.runtimeAppVersion)?void 0:"Default"!=appConfig.runtimeAppVersion||kony.sdk.isNullOrUndefined(appConfig.svcDoc)?appConfig.runtimeAppVersion:appConfig.svcDoc.app_default_version:MFAppVersion},kony.sdk.util.encryptSSOToken=function(e){return kony.sdk.logsdk.trace("Entering into kony.sdk.util.encryptSSOToken"),kony.sdk.util.encryptText(e,[kony.sdk.util.getAndSaveUUIDforSSO()],kony.sdk.constants.ENCRYPTION_ALGO_AES)},kony.sdk.util.decryptSSOToken=function(e){if(kony.sdk.logsdk.trace("Entering into kony.sdk.util.decryptSSOToken"),kony.sdk.util.isNullOrUndefinedOrEmptyObject(e))return e;var n=kony.sdk.util.decryptText(e,[kony.sdk.util.getAndSaveUUIDforSSO()],kony.sdk.constants.ENCRYPTION_ALGO_AES);return kony.sdk.util.isNullOrUndefinedOrEmptyObject(n)&&(n=kony.sdk.util.decryptText(e,[kony.sdk.constants.SSO_ENCRYPTION_KEY],kony.sdk.constants.ENCRYPTION_ALGO_AES),kony.sdk.isNullOrUndefined(n)||""===n||kony.sdk.util.saveSSOToken(n)),n},kony.sdk.util.generateSecureKeyFromText=function(e,n){if(kony.sdk.isNullOrUndefined(e)||!kony.sdk.isArray(e))throw new Exception(kony.sdk.errorConstants.CONFIGURATION_FAILURE,"Invalid param. salt cannot be null, should be of type Array");var o={};return o.passphrasetext=e,o.subalgo=kony.sdk.constants.ENCRYPTION_ALGO_AES,kony.sdk.getPlatformName()===kony.sdk.constants.PLATFORM_IOS&&n===kony.sdk.constants.AES_ALGO_KEY_STRENGTH_256?o[kony.sdk.constants.ENC_PASSPHRASE_HASH_ALGO]=kony.sdk.constants.HASH_FUNCTION_SHA2:o[kony.sdk.constants.ENC_PASSPHRASE_HASH_ALGO]=kony.sdk.constants.HASH_FUNCTION_MD5,kony.crypto.newKey(kony.sdk.constants.ENC_TYPE_PASSPHRASE,n,o)},kony.sdk.util.encryptText=function(e,n,o){try{var t=kony.sdk.util.generateSecureKeyFromText(n,kony.sdk.constants.AES_ALGO_KEY_STRENGTH_256);kony.sdk.isNullOrUndefined(t)&&(t=kony.sdk.util.generateSecureKeyFromText(n,kony.sdk.constants.AES_ALGO_KEY_STRENGTH_128));var s=kony.crypto.encrypt(o,t,e,{});(kony.sdk.isNullOrUndefined(s)||""==s)&&kony.sdk.util.recordCustomEvent("INVALID CRYPTO RESPONSE","encryptedText: "+s,"encryptedText: null or EMPTY","cipher",null);var r=kony.convertToBase64(s);return(kony.sdk.isNullOrUndefined(r)||""==r)&&kony.sdk.util.recordCustomEvent("INVALID BASE64 DATA","base64Data: "+r,"base64Data: null or EMPTY","cipher",null),r}catch(n){kony.sdk.logsdk.error("Exception occurred while encrypting text, exception :",n),kony.sdk.util.recordCustomEvent("INVALID CRYPTO RESPONSE","get encryptText: "+e,"encryptText: exception","cipher",null)}},kony.sdk.util.performDecryption=function(e,n,o,t){try{var s=kony.sdk.util.convertBase64ToRawBytes(e),r=kony.crypto.decrypt(o,t,s,{});return(kony.sdk.isNullOrUndefined(r)||""==r)&&(kony.sdk.util.recordCustomEvent("INVALID CRYPTO RESPONSE","get decryptText: "+e,"decryptText: null","decipher",null),isKeyStrength256ForDecryption&&(isKeyStrength256ForDecryption=!1,r=kony.sdk.util.fallBackToAES128ForDecryption(e,n,o))),r}catch(n){kony.sdk.logsdk.error("Exception occurred while converting to raw text, exception :",n),kony.sdk.util.recordCustomEvent("INVALID CRYPTO RESPONSE","get decryptText: "+e,"decryptText: exception","decipher",null)}},kony.sdk.util.fallBackToAES128ForDecryption=function(e,n,o){try{var t=kony.sdk.util.generateSecureKeyFromText(n,kony.sdk.constants.AES_ALGO_KEY_STRENGTH_128),s=kony.sdk.util.performDecryption(e,n,o,t);return kony.sdk.util.encryptText(s,n,kony.sdk.constants.ENCRYPTION_ALGO_AES),s}catch(e){kony.sdk.logsdk.error("Exception occurred while decrypting text using AES 128, exception :",e)}},isKeyStrength256ForDecryption=!0,kony.sdk.util.decryptText=function(e,n,o){try{var t=null,s=kony.sdk.util.generateSecureKeyFromText(n,kony.sdk.constants.AES_ALGO_KEY_STRENGTH_256);return kony.sdk.isNullOrUndefined(s)?(isKeyStrength256ForDecryption=!1,t=kony.sdk.util.fallBackToAES128ForDecryption(e,n,o)):(isKeyStrength256ForDecryption=!0,t=kony.sdk.util.performDecryption(e,n,o,s)),t}catch(e){kony.sdk.logsdk.error("Exception occurred while decrypting text using AES 256, exception :",e)}},kony.sdk.util.convertBase64ToRawBytes=function(e){var n=atob(e);return(kony.sdk.isNullOrUndefined(n)||""==n)&&kony.sdk.util.recordCustomEvent("INVALID RAW BYTES","get convertBase64ToRawBytes: ","rawbytes: null","decipher",null),n},kony.sdk.util.type=function(e){return kony.sdk.getAType()===kony.sdk.constants.SDK_ATYPE_NATIVE?kony.type(e):typeof e},kony.sdk.util.encryptAppConfig=function(e){var n=[kony.sdk.util.getSharedClientId()],o=kony.sdk.constants.ENCRYPTION_ALGO_AES;return(kony.sdk.isNullOrUndefined(e)||""==e)&&kony.sdk.util.recordCustomEvent("INVALID APP CONFIG","set appConfig: "+e,"appConfig: null or EMPTY","cipher",null),kony.sdk.util.encryptText(e,n,o)},kony.sdk.util.decryptAppConfig=function(e){var n=[kony.sdk.util.getSharedClientId()],o=kony.sdk.constants.ENCRYPTION_ALGO_AES,t=kony.sdk.util.decryptText(e,n,o);return(kony.sdk.isNullOrUndefined(t)||""==t)&&kony.sdk.util.recordCustomEvent("INVALID APP CONFIG","get appConfig: "+e,"appConfig: null","decipher",null),t},kony.sdk.util.loadMetadataFromDs=function(e,n){var o=kony.sdk.dataStore.getItem(appConfig.appId);if(n=kony.sdk.dataStore.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.MOBILE_FABRIC_SERVICE_DOC)),kony.sdk.isNullOrUndefined(o)||(e=JSON.parse(o)),kony.sdk.util.isAppConfigEncrypted()){if(kony.sdk.isNullOrUndefined(e))kony.sdk.util.recordCustomEvent("RETRIEVE DS APP METADATA","DS_AppMetaData not found.","","decipher",null);else{var t=kony.sdk.util.decryptAppConfig(e.appKey),s=kony.sdk.util.decryptAppConfig(e.appSecret),r=kony.sdk.util.decryptAppConfig(e.serviceUrl);kony.sdk.util.isNullOrEmptyString(t)||kony.sdk.util.isNullOrEmptyString(s)||kony.sdk.util.isNullOrEmptyString(r)?(kony.sdk.logsdk.warn("Null values for appKey, appSecret or serviceUrl found"),e.appKey=appConfig.appKey,e.appSecret=appConfig.appSecret,e.serviceUrl=appConfig.serviceUrl,kony.sdk.logsdk.info("Using appKey, appSecret and serviceUrl from Startup.js appConfig"),kony.sdk.util.recordCustomEvent("Decrypted appKey,appSecret and serviceUrl equals NULL","fallback startup.js appConfig","loadMetadataFromDS","update metadata run time",null)):(e.appKey=t,e.appSecret=s,e.serviceUrl=r)}kony.sdk.isNullOrUndefined(n)||(n=kony.sdk.util.decryptAppConfig(n))}return{dsAppMetaData:e,dsAppServiceDoc:n}},kony.sdk.util.getSharedClientId=function(){kony.sdk.isNullOrUndefined(kony.sdk.dataStore.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.SHARED_CLIENT_IDENTIFIER)))&&(kony.sdk.dataStore.setItem(kony.sdk.util.prefixAppid(kony.sdk.constants.SHARED_CLIENT_IDENTIFIER),kony.license.generateUUID()),kony.sdk.util.recordCustomEvent("INVALID SHARED CLIENT_ID","Generated new SharedClient ID","SCID: NEW_VALUE","decipher",null));var e=kony.sdk.dataStore.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.SHARED_CLIENT_IDENTIFIER));return kony.sdk.isNullOrUndefined(e)&&kony.sdk.util.recordCustomEvent("INVALID SHARED CLIENT_ID","get SharedClient ID","SCID: null","decipher",null),e},kony.sdk.util.isAppConfigEncrypted=function(){return!kony.sdk.isNullOrUndefined(kony.store.getItem(kony.sdk.util.prefixAppid(kony.sdk.constants.ENCRYPTION_APPCONFIG_FLAG)))||(kony.sdk.util.recordCustomEvent("NO SHARED CLIENT_ID","","APP Config is not encrypted","decipher",null),!1)},kony.sdk.util.checkAndUpdateIntegrityKey=function(e){e.hasOwnProperty("integrity_check_required")&&!0===e.integrity_check_required?konyRef.mainRef.integrityKey=!0:konyRef.mainRef.integrityKey=!1},kony.sdk.util.recordCustomEvent=function(e,n,o,t,s){try{kony.sdk.isNullOrUndefined(KNYMetricsService)&&kony.sdk.currentInstance&&kony.sdk.currentInstance.getMetricsService&&(KNYMetricsService=kony.sdk.currentInstance.getMetricsService()),kony.sdk.isNullOrUndefined(KNYMetricsService)&&kony.sdk.logsdk.warn("recordCustomEvent failed as Metrics Service is not available")}catch(e){kony.sdk.logsdk.warn("recordCustomEvent failed due to "+e)}},kony.sdk.util.recordAndFlushCustomEvent=function(e,n,o,t,s){try{kony.sdk.isNullOrUndefined(KNYMetricsService)&&kony.sdk.currentInstance&&kony.sdk.currentInstance.getMetricsService&&(KNYMetricsService=kony.sdk.currentInstance.getMetricsService()),kony.sdk.isNullOrUndefined(KNYMetricsService)&&kony.sdk.logsdk.warn("recordAndFlushCustomEvent failed as Metrics Service is not available")}catch(e){kony.sdk.logsdk.warn("recordAndFlushCustomEvent failed due to "+e)}},kony.sdk.util.getRefreshLoginTokenStoreUtility=function(){var e=null;function n(){var e=this,n=function(){kony.sdk.logsdk.perf("Entering getPersistedRefreshLoginProviderTokensObject");var e=kony.sdk.dataStore.getItem(kony.sdk.constants.PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS),n=null;if(kony.sdk.isNullOrUndefined(e))kony.sdk.logsdk.info("there are no available persisted refresh login tokens");else{kony.sdk.logsdk.info("decrypting persisted refresh login tokens");var o=kony.sdk.util.decryptText(e,[kony.sdk.util.getSharedClientId()],kony.sdk.constants.ENCRYPTION_ALGO_AES);!kony.sdk.isNullOrUndefined(o)&&kony.sdk.isJson(o)?(kony.sdk.logsdk.info("parsing decrypted persisted refresh login tokens"),n=JSON.parse(o)):kony.sdk.logsdk.warn("failed to decrypt "+kony.sdk.constants.PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS+" for refresh login"),kony.sdk.logsdk.info("returning persisted refresh login tokens")}return n},o=function(e){if(kony.sdk.logsdk.perf("Entering storePersistedRefreshLoginProviderTokensObject"),!kony.sdk.isNullOrUndefined(e)){var n=JSON.stringify(e);kony.sdk.logsdk.info("encrypting refresh login tokens object and persisting");var o=kony.sdk.util.encryptText(n,[kony.sdk.util.getSharedClientId()],kony.sdk.constants.ENCRYPTION_ALGO_AES);kony.sdk.dataStore.setItem(kony.sdk.constants.PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS,o)}};this.removeAllPersistedRefreshLoginProviderTokens=function(){kony.sdk.logsdk.perf("Entering removeAllPersistedRefreshLoginProviderTokens"),kony.sdk.dataStore.removeItem(kony.sdk.constants.PERSISTED_REFRESH_LOGIN_PROVIDER_TOKENS)},this.storeTokens=function(e,t){if(kony.sdk.logsdk.perf("Entering storeTokens"),!kony.sdk.util.isNullOrEmptyString(e)&&!kony.sdk.util.isNullOrUndefinedOrEmptyObject(t)){var s=n();kony.sdk.isNullOrUndefined(s)&&(s={}),s[e]=t,kony.sdk.logsdk.info("persisting refresh login tokens in datastore"),o(s),kony.sdk.logsdk.info("successfully stored refresh login tokens")}},this.getTokens=function(e){if(kony.sdk.logsdk.perf("Entering getTokens"),kony.sdk.util.isNullOrEmptyString(e))return null;kony.sdk.logsdk.info("Fetching refresh login provider tokens from datastore");var o=n(),t=null;return kony.sdk.isNullOrUndefined(o)||(t=o[e]),kony.sdk.logsdk.info("returning provider specific tokens"),t},this.removeTokens=function(t){if(kony.sdk.logsdk.perf("Entering removeTokens"),kony.sdk.util.isNullOrEmptyString(t))return null;kony.sdk.logsdk.info("Fetching refresh login provider tokens from datastore");var s=n();kony.sdk.isNullOrUndefined(s)||(kony.sdk.logsdk.info("removing provider specific tokens from datastore"),delete s[t],0===Object.keys(s).length?e.removeAllPersistedRefreshLoginProviderTokens():o(s))};var t=function(n,o){kony.sdk.logsdk.perf("Entering getToken");var t=e.getTokens(n),s=null;return kony.sdk.isNullOrUndefined(t)||(s=t[o]),s},s=function(n,o,t){kony.sdk.logsdk.perf("Entering setToken");var s=e.getTokens(n);kony.sdk.isNullOrUndefined(s)||(s[o]=t,e.storeTokens(n,s))};this.getInternalRefreshToken=function(e){return kony.sdk.logsdk.perf("Entering getInternalRefreshToken"),t(e,kony.sdk.constants.INTERNAL_REFRESH_TOKEN)},this.setInternalRefreshToken=function(e,t){if(kony.sdk.logsdk.perf("Entering setInternalRefreshToken"),kony.sdk.isNullOrUndefined(e)||e.constructor!==Array)s(e,kony.sdk.constants.INTERNAL_REFRESH_TOKEN,t);else{var r=n();if(kony.sdk.isNullOrUndefined(r))return void kony.sdk.logsdk.warn("there are no refresh login providers in data store, so provided backend refresh tokens can't be updated");var i=Object.keys(r);if(!kony.sdk.isNullOrUndefined(i)){for(var k=0;k<e.length;k++)-1!=i.indexOf(e[k])&&(r[e[k]][kony.sdk.constants.INTERNAL_REFRESH_TOKEN]=t);o(r)}}},this.getBackendRefreshToken=function(e){return kony.sdk.logsdk.perf("Entering getBackendRefreshToken"),t(e,kony.sdk.constants.BACKEND_REFRESH_TOKEN)},this.setBackendRefreshToken=function(e,n){kony.sdk.logsdk.perf("Entering setBackendRefreshToken"),s(e,kony.sdk.constants.BACKEND_REFRESH_TOKEN,n)},this.getAllPersistedRefreshLoginProviderTokens=function(){return kony.sdk.logsdk.perf("Entering getAllPersistedRefreshLoginProviderTokens"),n()},this.setBulkBackendRefreshTokens=function(e){if(kony.sdk.logsdk.perf("Entering setBulkBackendRefreshTokens"),!kony.sdk.isNullOrUndefined(e)&&e instanceof Object){var t=n();if(kony.sdk.isNullOrUndefined(t))kony.sdk.logsdk.warn("there are no refresh login providers in data store, so provided backend refresh tokens can't be updated");else{var s=Object.keys(t);if(!kony.sdk.isNullOrUndefined(s)){for(var r=Object.keys(e),i=null,k=0;k<r.length;k++)i=r[k],-1!=s.indexOf(i)&&(!kony.sdk.isNullOrUndefined(e[i])&&konyRef.refreshLoginProvidersSet.has(i)?t[i][kony.sdk.constants.BACKEND_REFRESH_TOKEN]=e[i]:kony.sdk.logsdk.warn("backend refresh token for "+i+" is null or undefined"));o(t)}}}else kony.sdk.logsdk.warn("provided backend refresh tokens are null/undefined or not an Object type")}}return function(){return kony.sdk.isNullOrUndefined(e)&&(e=new n),e}}(),kony.sdk.util.getUtilityForPKCE=function(){var e=null;function n(){var n=null;function o(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}this.resetPKCEObject=function(){kony.sdk.logsdk.debug("secure params reset"),n=null},this.initializePKCEObject=function(){e.resetPKCEObject();try{var t=kony.crypto.generateSecureRandom({size:43,type:"base64"});t=(t=o(t)).substring(0,128);var s=kony.crypto.createHash(kony.sdk.constants.HASHING_ALGORITHM,t,{returnBase64String:"true"});s=o(s),kony.sdk.isNullOrUndefined(t)||kony.sdk.isNullOrUndefined(s)?kony.sdk.logsdk.error("secure params generated are null"):(kony.sdk.logsdk.debug("secure params generated"),(n={})[kony.sdk.constants.APP_VERIFIER]=t,n[kony.sdk.constants.APP_CHALLENGE]=s)}catch(e){return kony.sdk.logsdk.error("could not generated secure params due to "+JSON.stringify(e)),!1}return!0},this.appendAppChallengeOnURL=function(e){return kony.sdk.isNullOrUndefined(n)||kony.sdk.isNullOrUndefined(e)||(e+="&"+kony.sdk.constants.APP_CHALLENGE+kony.sdk.constants.EQUAL_TO+n[kony.sdk.constants.APP_CHALLENGE]+"&"+kony.sdk.constants.KEY_APP_CHALLENGE_METHOD+kony.sdk.constants.EQUAL_TO+kony.sdk.constants.APP_CHALLENGE_METHOD_VALUE,kony.sdk.getPlatformName()===kony.sdk.constants.PLATFORM_THIN_CLIENT?e+="&"+kony.sdk.constants.OAUTH_SESSION_RESPONSE_TYPE+kony.sdk.constants.EQUAL_TO+kony.sdk.constants.HEADER:e+="&"+kony.sdk.constants.OAUTH_SESSION_RESPONSE_TYPE+kony.sdk.constants.EQUAL_TO+kony.sdk.constants.QUERY,delete n[kony.sdk.constants.APP_CHALLENGE]),e},this.appendAppVerifierInBodyParams=function(o){return!kony.sdk.isNullOrUndefined(n)&&kony.sdk.util.isJsonObject(o)&&(o[kony.sdk.constants.APP_VERIFIER]=n[kony.sdk.constants.APP_VERIFIER],e.resetPKCEObject()),o}}return function(){return kony.sdk.isNullOrUndefined(e)&&(e=new n,Object.freeze(e)),e}}(),kony.sdk.util.checkAndGenerateClientUUID=function(){var e=kony.sdk.util.decryptAndRetrieveClientUUID();if(kony.sdk.util.isNullOrEmptyString(e)){var n=kony.license.generateUUID().toString();konyRef.clientUUID=n,kony.sdk.util.encryptAndSaveClientUUID(n)}else konyRef.clientUUID=e},kony.sdk.util.encryptAndSaveClientUUID=function(e){var n=[kony.sdk.util.getSDKUniversalSalt()],o=kony.sdk.constants.ENCRYPTION_ALGO_AES,t=kony.sdk.util.encryptText(e,n,o);kony.sdk.dataStore.setItem(kony.sdk.constants.CLIENT_SDK_UUID,t)},kony.sdk.util.decryptAndRetrieveClientUUID=function(){var e=kony.sdk.dataStore.getItem(kony.sdk.constants.CLIENT_SDK_UUID);if(kony.sdk.util.isNullOrEmptyString(e))return null;var n=[kony.sdk.util.getSDKUniversalSalt()],o=kony.sdk.constants.ENCRYPTION_ALGO_AES;return kony.sdk.util.decryptText(e,n,o)},kony.sdk.util.getSDKUniversalSalt=function(){var e=kony.sdk.dataStore.getItem(kony.sdk.constants.CLIENT_SDK_UNIVERSAL_SALT);return kony.sdk.util.isNullOrEmptyString(e)?(e=kony.license.generateUUID().toString(),kony.sdk.dataStore.setItem(kony.sdk.constants.CLIENT_SDK_UNIVERSAL_SALT,e),e):e},kony.sdk.util.getMetaDataManagerForLoginInSameWindow=function(){var e=null;function n(){var e=null,n=null;function o(){return konyRef.mainRef.config.reportingsvc.session.split("/IST")[0]+kony.sdk.constants.APP_VERIFIER_MW_STORE_ENDPOINT}this.setItem=function(n,o){kony.sdk.logsdk.info("setting value for MetaDataManagerForLoginInSameWindow for key-"+n),e.set(n,o)},this.getItem=function(n){return kony.sdk.logsdk.info("getting value for MetaDataManagerForLoginInSameWindow for key-"+n),e.get(n)},this.retrieveAppVerifier=function(e,t){kony.sdk.logsdk.info("Entering retrieveAppVerifier"),kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.info("getCodeVerifier's claims passed");var s=o(),r={};r[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken,r[kony.sdk.constants.APP_KEY_HEADER]=konyRef.mainRef.appKey,r[kony.sdk.constants.APP_SECRET_HEADER]=konyRef.mainRef.appSecret;var i={xmlHttpRequestOptions:{}};i.xmlHttpRequestOptions.enableWithCredentials=!0,i[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,n.get(s,null,r,(function(n){kony.sdk.logsdk.info("Exiting retrieveAppVerifier with success"),kony.sdk.verifyAndCallClosure(e,n)}),(function(e){kony.sdk.logsdk.error("unable to save the app verifier at middleware "+s+" , due to "+e.message);var n=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.app_verifier_retrieve_failed,kony.sdk.errormessages.app_verifier_retrieve_failed);kony.sdk.verifyAndCallClosure(t,n)}),null,i)}),t)},this.saveAppVerifier=function(e,t,s){kony.sdk.logsdk.info("Entering saveAppVerifier"),kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.info("saveAppVerifier's claims passed");var r=o(),i={};i[kony.sdk.constants.KONY_AUTHORIZATION_HEADER]=konyRef.currentClaimToken,i[kony.sdk.constants.APP_KEY_HEADER]=konyRef.mainRef.appKey,i[kony.sdk.constants.APP_SECRET_HEADER]=konyRef.mainRef.appSecret;var k={xmlHttpRequestOptions:{}};k.xmlHttpRequestOptions.enableWithCredentials=!0,k[kony.sdk.constants.IGNORE_MESSAGE_INTEGRITY]=!0,n.post(r,e,i,(function(e){kony.sdk.logsdk.info("Exiting saveAppVerifier with success"),kony.sdk.verifyAndCallClosure(t,e)}),(function(e){kony.sdk.logsdk.error("unable to save the app verifier at middleware "+r+" , due to "+e.message);var n=kony.sdk.error.getSingleWindowLoginErrObj(kony.sdk.errorcodes.app_verifier_save_failed,kony.sdk.errormessages.app_verifier_save_failed);kony.sdk.verifyAndCallClosure(s,n)}),kony.sdk.constants.CONTENT_TYPE_JSON,k)}),s)},this.saveMetaData=function(){kony.sdk.logsdk.info("saving data inside MetaDataManagerForLoginInSameWindow"),kony.sdk.dataStore.setSecureItem(kony.sdk.constants.KEY_METADATA_SDK_LOGIN_FOR_SAME_WINDOW,this.getMetadataJSON())},this.getMetadataJSON=function(){kony.sdk.logsdk.info("getting value of MetaDataManagerForLoginInSameWindow in json format");var n={};return e.forEach((function(e,o){n[o]=e})),n},this.loadSavedMetaData=function(){if(kony.sdk.isNullOrUndefined(e)||0===e.size){kony.sdk.logsdk.info("retrieving saved value of MetaDataManagerForLoginInSameWindow");var n=kony.sdk.dataStore.getSecureItem(kony.sdk.constants.KEY_METADATA_SDK_LOGIN_FOR_SAME_WINDOW);for(key in n)this.setItem(key,n[key])}},this.removeSavedMetaData=function(){kony.sdk.logsdk.info("removing saved value of MetaDataManagerForLoginInSameWindow"),kony.sdk.dataStore.removeItem(kony.sdk.constants.KEY_METADATA_SDK_LOGIN_FOR_SAME_WINDOW)},this.initialize=function(){kony.sdk.isNullOrUndefined(e)&&kony.sdk.isNullOrUndefined(n)&&(kony.sdk.logsdk.info("initializing private variable of MetaDataManagerForLoginInSameWindow"),e=new Map,n=new konyNetworkProvider)},this.destroy=function(){kony.sdk.logsdk.info("making internal variable null & removing saved state of MetaDataManagerForLoginInSameWindow"),this.removeSavedMetaData(),e=null,n=null}}return function(){return kony.sdk.logsdk.info("returning singleton instance of MetaDataManagerForLoginInSameWindow"),kony.sdk.isNullOrUndefined(e)&&(e=new n,Object.freeze(e)),e}}(),kony.sdk.util.getSessionURLfromAppConfig=function(){return kony.sdk.isNullOrUndefined(appConfig)||kony.sdk.isNullOrUndefined(appConfig.svcDoc)||kony.sdk.isNullOrUndefined(appConfig.svcDoc.reportingsvc)||kony.sdk.isNullOrUndefined(appConfig.svcDoc.reportingsvc.session)?null:appConfig.svcDoc.reportingsvc.session};function initializeWebSocketConstants(){"undefined"==typeof kony&&(kony={}),void 0===kony.sdk&&(kony.sdk={}),kony.sdk.websocket=kony.sdk.websocket||{},kony.sdk.websocket.constants=kony.sdk.websocket.constants||{},kony.sdk.websocket.constants={BOOLEAN_TRUE:!0,X_KONY_AUTHORIZATION:"X-Kony-Authorization",X_KONY_CLIENT_UUID:"clientUUID",EQUAL_TO:"=",WEBSOCKET_TYPE_ONERROR:"onError",WEBSOCKET_TYPE_ONOPEN:"onOpen",WEBSOCKET_TYPE_ONCLOSE:"onClose",WEBSOCKET_TYPE_ONMESSAGE:"onMessage",WEBSOCKET_TYPE_ONPUBLISH:"onPublish",WEBSOCKET_TYPE_ONSUBSCRIBE:"onSubscribe",WEBSOCKET_TYPE_ONUNSUBSCRIBE:"onUnsubscribe",WEBSOCKET_TYPE_ONPUBLISH_ERROR:"onPublishError",WEBSOCKET_TYPE_ONSUBSCRIBE_ERROR:"onSubscribeError",WEBSOCKET_TYPE_ONUNSUBSCRIBE_ERROR:"onUnsubscribeError",WEBSOCKET_PUBLISH_EVENTS:"events",WEBSOCKET_SUBSCRIBE_EVENTS:"subscribe",WEBSOCKET_UNSUBSCRIBE_EVENTS:"unsubscribe",WEBSOCKET_TOPICS_EVENTS:"topics",WEBSOCKET_SUBSCRIBE_MODE:"subscribeMode",WEBSOCKET_MODE_PRIVATE:"private",WEBSOCKET_MODE_PUBLIC:"public",UNSUBSCRIBE_OPTION_CLOSE_CONNECTION:"closeConnection",WEBSOCKET_UNSUBSCRIBE_MODE:"unSubscribeMode",WEBSOCKET_RESPONSE_ACK:"ack",WEBSOCKET_RESPONSE_CODE:"code",WEBSOCKET_RESPONSE_DATA:"data",WEBSOCKET_RESPONSE_TOPIC:"topic",WEBSOCKET_RESPONSE_MESSAGE:"message",WEBSOCKET_RESPONSE_EVENTS_ID:"eventId",WEBSOCKET_RESPONSE_FAILED_EVENTS:"failedTopics",WEBSOCKET_RESPONSE_SUCCESSFULL_EVENTS:"successTopics",SERVER_EVENTS_NO_INTERNET_MESSAGE:"No internet available, please check device connectivity",SERVER_EVENTS_INITIALISING_MESSAGE:"Websocket is not initialized, initializing the socket instance",SERVER_EVENTS_NOT_INITIALISED_MESSAGE:"Websocket is not initialized, cannot perform unsubscribe",SERVER_EVENTS_CALLBACKS_ERROR_MESSAGE:"Mandatory callbacks are missing.",INVALID_MODE_PROVIDED_MESSAGE:"Server events mode provided is not valid.",INVALID_EVENT_STRING_MESSAGE:"Event string passed in event array is not valid."}}function initializeWebSocketHandler(){kony.sdk.websocket=kony.sdk.websocket||{};kony.sdk.websocket.generateServerEventsURL=function(){var e=konyRef.serverEventsUrl,s=konyRef.currentClaimToken,o=konyRef.clientUUID;return kony.sdk.util.isNullOrEmptyString(s)||kony.sdk.util.isNullOrEmptyString(o)||kony.sdk.util.isNullOrEmptyString(e)?(kony.sdk.logsdk.error("KonyWebSocketHandler : generateServerEventsURL:: authToken or serverEventsUrl or clientUUID is null or undefined"),null):e=e+"?"+kony.sdk.websocket.constants.X_KONY_AUTHORIZATION+kony.sdk.websocket.constants.EQUAL_TO+s+"&"+kony.sdk.websocket.constants.X_KONY_CLIENT_UUID+kony.sdk.websocket.constants.EQUAL_TO+o},kony.sdk.websocket.setServerEventsCallbacks=function(e,s,o){kony.sdk.logsdk.trace(" Entering kony.sdk.webSocket.setServerEventsCallbacks"),kony.sdk.websocket.util.setKonyWebsocketCallbacks({onMessage:function(s){kony.sdk.logsdk.perf("Executing onMessageCallback"),kony.sdk.verifyAndCallClosure(e,s),kony.sdk.logsdk.perf("Executing Finished onMessageCallback")},onError:function(e){kony.sdk.logsdk.perf("Executing onErrorCallback"),kony.sdk.logsdk.error("subscribeServerEvents::onError Error:",e),kony.sdk.verifyAndCallClosure(s,e),kony.sdk.logsdk.perf("Executing Finished onErrorCallback")},onClose:function(e){kony.sdk.logsdk.perf("Executing onCloseCallback"),kony.sdk.verifyAndCallClosure(o,e),kony.sdk.logsdk.perf("Executing Finished onCloseCallback")}})},kony.sdk.websocket.publishServerEvents=function(e,s,o){kony.sdk.logsdk.trace(" Entering kony.sdk.webSocket.publishServerEvents"),kony.sdk.websocket.util.setKonyWebsocketCallback({onPublish:function(e){kony.sdk.logsdk.perf("Executing onPublishCallback"),kony.sdk.verifyAndCallClosure(s,e),kony.sdk.logsdk.perf("Executing Finished onPublishCallback")}}),kony.sdk.websocket.util.sendWebsocketMessage(e)},kony.sdk.websocket.subscribeServerEvents=function(e,s,o,n){var k="kony.sdk.webSocket.subscribeServerEvents";kony.sdk.logsdk.trace(" Entering "+k),kony.sdk.websocket.util.setKonyWebsocketCallbacks({onSubscribe:function(e){kony.sdk.logsdk.perf("Executing onSubscribeCallback"),kony.sdk.verifyAndCallClosure(o,e),kony.sdk.logsdk.perf("Executing Finished onSubscribeCallback")}}),kony.sdk.websocket&&!kony.sdk.websocket.isWebSocketAvailable()?(kony.sdk.logsdk.info(k+kony.sdk.websocket.constants.SERVER_EVENTS_INITIALISING_MESSAGE),kony.sdk.websocket.util.openWebSocketHandler(e,s)):kony.sdk.websocket.util.sendWebsocketMessage(s)},kony.sdk.websocket.unSubscribeServerEvents=function(e,s,o){var n="kony.sdk.webSocket.unSubscribeServerEvents";kony.sdk.logsdk.trace(" Entering "+n),o&&o[kony.sdk.websocket.constants.UNSUBSCRIBE_OPTION_CLOSE_CONNECTION]&&o[kony.sdk.websocket.constants.UNSUBSCRIBE_OPTION_CLOSE_CONNECTION]===kony.sdk.websocket.constants.BOOLEAN_TRUE?kony.sdk.websocket.util.closeWebSocket():(kony.sdk.websocket.util.setKonyWebsocketCallbacks({onUnsubscribe:function(e){kony.sdk.logsdk.perf("Executing unSubscribeServerEvents"),kony.sdk.verifyAndCallClosure(s,e),kony.sdk.logsdk.perf("Executing Finished unSubscribeServerEvents")}}),kony.sdk.util.isNullOrUndefinedOrEmptyObject(e)?kony.sdk.websocket.util.raiseError(n+"events is null or undefined"):kony.sdk.websocket.util.sendWebsocketMessage(e))},kony.sdk.websocket.isWebSocketAvailable=function(){return kony.sdk.logsdk.trace(" Entering kony.sdk.webSocket.isWebSocketAvailable"),kony.sdk.websocket.util.isInternalWebSocketAvailable()}}function initializeWebSocketManager(){"undefined"==typeof kony&&(kony={}),void 0===kony.sdk&&(kony.sdk={}),kony.sdk.websocket=kony.sdk.websocket||{},kony.sdk.websocket.util=kony.sdk.websocket.util||{},kony.sdk.websocket.onMessage=null,kony.sdk.websocket.onError=null,kony.sdk.websocket.onClose=null,kony.sdk.websocket.onSubscribe=null,kony.sdk.websocket.onPublish=null,kony.sdk.websocket.onUnsubscribe=null;var e=null;kony.sdk.websocket.util.setKonyWebsocketCallbacks=function(e){for(var s in kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.setKonyWebsocketCallback"),e)switch(s){case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONMESSAGE:kony.sdk.websocket.onMessage=e[s];break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR:kony.sdk.websocket.onError=e[s];break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONCLOSE:kony.sdk.websocket.onClose=e[s];break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONSUBSCRIBE:kony.sdk.websocket.onSubscribe=e[s];break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONPUBLISH:kony.sdk.websocket.onPublish=e[s];break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONUNSUBSCRIBE:kony.sdk.websocket.onUnsubscribe=e[s];break;default:kony.sdk.logsdk.warn("Invalid key passed while setting websocket callback : ",s)}kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.setKonyWebsocketCallback")},kony.sdk.websocket.util.openWebSocketHandler=function(s,o){if(kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.openWebSocketHandler"),kony.sdk.isNullOrUndefined(e)||e.readyState!==WebSocket.OPEN){if(window.WebSocket){kony.sdk.logsdk.info("Websocket is supported by this browser!");try{e=new WebSocket(s)}catch(e){return kony.sdk.logsdk.error("openWebSocketHandler:: Error while opening websocket, Error : ",e),void kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Error while opening websocket, Error : "+e)}e.onopen=function(){kony.sdk.logsdk.perf("Executing Websocket onopen eventHandler."),kony.sdk.logsdk.info("WebSocket is connected."),kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONOPEN,"WebSocket connection established"),kony.sdk.websocket.util.sendWebsocketMessage(o),kony.sdk.logsdk.perf("Executing Finished Websocket onopen eventHandler.")},e.onmessage=function(e){kony.sdk.logsdk.perf("Executing Websocket onmessage eventHandler.");var s=e.data;kony.sdk.logsdk.info("Event Message Recieved."),kony.sdk.websocket.util.parseServerResponseAndCallLocalCallback(s),kony.sdk.logsdk.perf("Executing Finished Websocket onmessage eventHandler.")},e.onerror=function(s){kony.sdk.logsdk.perf("Executing Websocket onerror eventHandler."),kony.sdk.logsdk.error("openWebSocketHandler:: Websocket Failed With Error :"+s),e=null,kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Websocket Failed With Error : "+s),kony.sdk.logsdk.perf("Executing Finished Websocket onerror eventHandler.")},e.onclose=function(){kony.sdk.logsdk.perf("Executing Websocket onclose eventHandler."),e=null,kony.sdk.logsdk.info("WebSocket is closed."),kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONCLOSE,"All Topics Unsubscribed and WebSocket connection closed."),kony.sdk.logsdk.perf("Executing Finished Websocket onclose eventHandler.")}}else kony.sdk.logsdk.error("openWebSocketHandler:: WebSocket is not supported by this browser."),kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"WebSocket is not supported by this browser");kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.openWebSocketHandler")}else kony.sdk.logsdk.info("Websocket is already initialized.")},kony.sdk.websocket.util.sendAcknowledgementToServer=function(e){var s={},o={};o[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_EVENTS_ID]=e,s[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_ACK]=o;var n=JSON.stringify(s);kony.sdk.websocket.util.sendWebsocketMessage(n)},kony.sdk.websocket.util.sendWebsocketMessage=function(s){return kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.sendWebsocketMessage"),kony.sdk.isNullOrUndefined(e)?(kony.sdk.logsdk.error("sendWebsocketMessage:: Websocket is not initialized."),void kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Websocket is not initialized.")):(kony.sdk.logsdk.info("Websocket ready State is "+e.readyState),e.readyState!==WebSocket.OPEN?(kony.sdk.logsdk.error("sendWebsocketMessage:: Websocket is not open."),void kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Websocket is not open.")):(kony.sdk.logsdk.info("Sending events using webSocket."),e.send(s),void kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.sendWebsocketMessage")))},kony.sdk.websocket.util.closeWebSocket=function(){if(kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.ned) {closeWebSocket"),kony.sdk.isNullOrUndefined(e))return kony.sdk.logsdk.error("closeWebSocket:: Websocket is not initialized."),void kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Websocket is not initialized.");kony.sdk.logsdk.info("Websocket ready State is "+e.readyState),e.readyState===WebSocket.OPEN?(kony.sdk.logsdk.info("Closing the Websocket."),e.close()):(kony.sdk.logsdk.error("closeWebSocket:: Websocket is not open."),kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Websocket is not open.")),kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.closeWebSocket")},kony.sdk.websocket.util.isInternalWebSocketAvailable=function(){return!kony.sdk.isNullOrUndefined(e)}}function initializeWebSocketResponseHandler(){"undefined"==typeof kony&&(kony={}),void 0===kony.sdk&&(kony.sdk={}),kony.sdk.websocket=kony.sdk.websocket||{},kony.sdk.websocket.util=kony.sdk.websocket.util||{},kony.sdk.websocket.util.parseServerResponseAndCallLocalCallback=function(e){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.parseServerResponseAndCallLocalCallback");const s="Error while parsing response from server.";try{var o=JSON.parse(e)}catch(e){return kony.sdk.logsdk.error("parseAndGetLocalResponse:: "+s),void kony.sdk.websocket.util.raiseError(s+": "+e)}if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(o))return kony.sdk.logsdk.error("parseAndGetLocalResponse:: "+s),void kony.sdk.websocket.util.raiseError(s);kony.sdk.websocket.util.handleServerResponseAndCallbackResponse(o),kony.sdk.logsdk.perf("Executing Finished kony.sdk.websocket.util.parseAndGetLocalResponse")},kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback=function(e,s){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.parseMessageForTypeAndCallCommonCallback");const o=kony.sdk.websocket.util.getResponseMessageForType(e,s);if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(o)){const e="Error in creating response for parseMessageForTypeAndCallCommonCallback";return kony.sdk.logsdk.error(e),void kony.sdk.websocket.util.raiseError(e)}e===kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONOPEN&&kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onMessage,o),e===kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONCLOSE&&kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onClose,o),e===kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR&&kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onError,o)},kony.sdk.websocket.util.handleServerResponseAndCallbackResponse=function(e){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.handleServerResponseAndCallbackResponse");const s=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_CODE];if(s===kony.sdk.websocket.util.ServerCodeType.ON_MESSAGE){kony.sdk.logsdk.info("OnMessage type response received."),kony.sdk.logsdk.info("Sending acknowledgment to the server."),kony.sdk.websocket.util.sendAcknowledgementToServer(e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_EVENTS_ID]);const s=kony.sdk.websocket.util.getResponseMessageForOnMessage(e);kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onMessage,s)}else if(s>=kony.sdk.websocket.util.ServerCodeType.SERVER_ON_ERROR_INVALID_USER&&s<=kony.sdk.websocket.util.ServerCodeType.SERVER_ON_ERROR_ERROR_REQUEST_PAYLOAD){kony.sdk.logsdk.info("Response message type received: ON_ERROR"),kony.sdk.logsdk.debug("Error: "+e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_MESSAGE]);var o="Please Re-Subscribe/Unsubscribe.";s===kony.sdk.websocket.util.ServerCodeType.SERVER_ON_ERROR_INVALID_USER&&(o="Authentication failed, "+o),kony.sdk.websocket.util.raiseError(o)}else{const o=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_MESSAGE],n=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_SUCCESSFULL_EVENTS],k=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_FAILED_EVENTS],t=kony.sdk.websocket.util.getResponseMessageForCode(s,o,n,k);if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(t)){const e="Error in creating response for handleServerResponseAndCallbackResponse";return kony.sdk.logsdk.error(e),void kony.sdk.websocket.util.raiseError(e)}switch(s){case kony.sdk.websocket.util.ServerCodeType.SUBSCRIBE_SUCCESS:case kony.sdk.websocket.util.ServerCodeType.SUBSCRIBE_ERROR:case kony.sdk.websocket.util.ServerCodeType.SUBSCRIBE_PARTIAL_SUCCESS:kony.sdk.logsdk.info("Response message type received: SUBSCRIBE"),kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onSubscribe,t);break;case kony.sdk.websocket.util.ServerCodeType.UNSUBSCRIBE_SUCCESS:case kony.sdk.websocket.util.ServerCodeType.UNSUBSCRIBE_ERROR:case kony.sdk.websocket.util.ServerCodeType.UNSUBSCRIBE_PARTIAL_SUCCESS:kony.sdk.logsdk.info("Response message type received: UNSUBSCRIBE"),kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onUnsubscribe,t);break;case kony.sdk.websocket.util.ServerCodeType.PUBLISH_SUCCESS:case kony.sdk.websocket.util.ServerCodeType.PUBLISH_ERROR:case kony.sdk.websocket.util.ServerCodeType.PUBLISH_PARTIAL_SUCCESS:kony.sdk.logsdk.info("Response message type received: PUBLISH"),kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onPublish,t);break;default:kony.sdk.logsdk.error("Invalid code passed in response, message: ",t),kony.sdk.websocket.util.raiseError("Invalid response received, response : "+t)}}},kony.sdk.websocket.util.raiseError=function(e){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.raiseError");const s=kony.sdk.websocket.util.getResponseMessageForType(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,e);kony.sdk.verifyAndCallClosure(kony.sdk.websocket.onError,s)}}function initializeWebSocketResponseMessage(){"undefined"==typeof kony&&(kony={}),void 0===kony.sdk&&(kony.sdk={}),kony.sdk.websocket=kony.sdk.websocket||{},kony.sdk.websocket.util=kony.sdk.websocket.util||{};const e={SUBSCRIBE_SUCCESS:620001,SUBSCRIBE_ERROR:620002,SUBSCRIBE_PARTIAL_SUCCESS:620003,PUBLISH_SUCCESS:620004,PUBLISH_ERROR:620005,PUBLISH_PARTIAL_SUCCESS:620006,UNSUBSCRIBE_SUCCESS:620007,UNSUBSCRIBE_ERROR:620008,UNSUBSCRIBE_PARTIAL_SUCCESS:620009,ON_MESSAGE:620010,SERVER_ON_ERROR_INVALID_USER:620011,SERVER_ON_ERROR_MISSING_MANDATORY_PARAM:620012,SERVER_ON_ERROR_UPDATING_WEBSOCKET_SESSION:620013,SERVER_ON_ERROR_ERROR_REQUEST_PAYLOAD:620014};Object.freeze(e),kony.sdk.websocket.util.ServerCodeType=e;const s={SUBS_SUCCESS:6201,SUBS_ERROR:6202,SUBS_PARTIAL_SUCCESS:6203,UNSUBS_SUCCESS:6207,UNSUBS_ERROR:6208,UNSUBS_PARTIAL_SUCCESS:6209,PUB_SUCCESS:6204,PUB_ERROR:6205,PUB_PARTIAL_SUCCESS:6206,ON_MESSAGE:6210,ON_OPEN:7200,ON_ERROR:7201,ON_CLOSE:7202};Object.freeze(s),kony.sdk.websocket.util.ClientCodeType=s;var o={};o[e.SUBSCRIBE_SUCCESS]=s.SUBS_SUCCESS,o[e.SUBSCRIBE_PARTIAL_SUCCESS]=s.SUBS_PARTIAL_SUCCESS,o[e.SUBSCRIBE_ERROR]=s.SUBS_ERROR,o[e.UNSUBSCRIBE_SUCCESS]=s.UNSUBS_SUCCESS,o[e.UNSUBSCRIBE_PARTIAL_SUCCESS]=s.UNSUBS_PARTIAL_SUCCESS,o[e.UNSUBSCRIBE_ERROR]=s.UNSUBS_ERROR,o[e.PUBLISH_SUCCESS]=s.PUB_SUCCESS,o[e.PUBLISH_PARTIAL_SUCCESS]=s.PUB_PARTIAL_SUCCESS,o[e.PUBLISH_ERROR]=s.PUB_ERROR,o[kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONOPEN]=s.ON_OPEN,o[kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONMESSAGE]=s.ON_MESSAGE,o[kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONCLOSE]=s.ON_CLOSE,o[kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR]=s.ON_ERROR,kony.sdk.websocket.util.setKeyAndValueForFinalMessage=function(e,s,o,n){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.setKeyAndValueForFinalmessage"),kony.sdk.util.isNullOrUndefinedOrEmptyObject(s)||(e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_MESSAGE]=s),kony.sdk.util.isNullOrUndefinedOrEmptyObject(o)||(e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_SUCCESSFULL_EVENTS]=o),kony.sdk.util.isNullOrUndefinedOrEmptyObject(n)||(e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_FAILED_EVENTS]=n)},kony.sdk.websocket.util.getResponseMessageForOnMessage=function(e){var s={},n=o[kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONMESSAGE];return s[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_CODE]=n,s[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_DATA]=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_DATA],s[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_TOPIC]=e[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_TOPIC],JSON.stringify(s)},kony.sdk.websocket.util.getResponseMessageForType=function(e,s){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.getResponseMessageForType");const n={},k=o[e];if(k<=0)return kony.sdk.logsdk.error("Invalid Code found in response for getResponseMessageForType"),null;if(n[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_CODE]=k,e===kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONCLOSE||e===kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONOPEN)kony.sdk.logsdk.info("Message type received : "+e),kony.sdk.websocket.util.setKeyAndValueForFinalMessage(n,s,null,null);else{if(e!==kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR)return kony.sdk.logsdk.debug("Invalid Callback type found"),null;kony.sdk.logsdk.info("Message type received : "+e),s="Error Occurred in Server events, Error :"+s,kony.sdk.websocket.util.setKeyAndValueForFinalMessage(n,s,null,null)}return JSON.stringify(n)},kony.sdk.websocket.util.getResponseMessageForCode=function(n,k,t,r){kony.sdk.logsdk.perf("Executing kony.sdk.websocket.util.getResponseMessageForCode");const E={},d=o[n];if(d<=0)return kony.sdk.logsdk.error("Invalid Code found in response for getResponseMessageForCode"),null;switch(E[kony.sdk.websocket.constants.WEBSOCKET_RESPONSE_CODE]=d,n){case e.SUBSCRIBE_SUCCESS:case e.PUBLISH_SUCCESS:case e.UNSUBSCRIBE_SUCCESS:kony.sdk.logsdk.info("Message type received for : "+kony.sdk.util.getKeyByValue(s,d)),kony.sdk.websocket.util.setKeyAndValueForFinalMessage(E,k,t,null);break;case e.SUBSCRIBE_ERROR:case e.PUBLISH_ERROR:case e.UNSUBSCRIBE_ERROR:kony.sdk.logsdk.info("Message type received for : "+kony.sdk.util.getKeyByValue(s,d)),kony.sdk.websocket.util.setKeyAndValueForFinalMessage(E,k,null,r);break;case e.SUBSCRIBE_PARTIAL_SUCCESS:case e.PUBLISH_PARTIAL_SUCCESS:case e.UNSUBSCRIBE_PARTIAL_SUCCESS:kony.sdk.logsdk.info("Message type received for partial success : "+kony.sdk.util.getKeyByValue(s,d)),kony.sdk.websocket.util.setKeyAndValueForFinalMessage(E,k,t,r);break;default:return kony.sdk.logsdk.error("Invalid code passed in response, message: ",k),null}try{var c=JSON.stringify(E)}catch(e){return kony.sdk.logsdk.error("Error in creating response message, error: "+e),null}return c}}function initializeServerEvents(){var e=null,s=!1,o=!1,n="KonyServerEvents :: ";const k={ON_ERROR:7201,ON_UNSUBSCRIBE_ERROR:6208,ON_SUBS_ERROR:6202};Object.freeze(k);var t=function(s,o,n){var t={};switch(s){case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR:t.code=k.ON_ERROR;break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONUNSUBSCRIBE_ERROR:t.code=k.ON_UNSUBSCRIBE_ERROR;break;case kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONSUBSCRIBE_ERROR:t.code=k.ON_SUBS_ERROR;break;default:t.code=k.ON_ERROR}t.message=o,n&&t.code!==k.ON_ERROR||!e?n&&kony.sdk.verifyAndCallClosure(n,JSON.stringify(t)):(t.code=k.ON_ERROR,kony.sdk.verifyAndCallClosure(e,JSON.stringify(t)))},r=function(e,s,o){var k={},t={},r={};if(kony.sdk.util.isValidString(e)){var E=[];E.push(e),r[s]=E}else{if(!(kony.sdk.isArray(e)&&e.length>0))return void kony.sdk.logsdk.error(n+"createEventsPayloadString:: "+kony.sdk.websocket.constants.INVALID_EVENT_STRING_MESSAGE);for(var d in e)if(!kony.sdk.util.isValidString(e[d]))return void kony.sdk.logsdk.error(n+"createEventsPayloadString:: "+kony.sdk.websocket.constants.INVALID_EVENT_STRING_MESSAGE);r[s]=e}return k[kony.sdk.websocket.constants.X_KONY_AUTHORIZATION]=konyRef.currentClaimToken,k[kony.sdk.websocket.constants.X_KONY_CLIENT_UUID]=konyRef.clientUUID,k[kony.sdk.websocket.constants.WEBSOCKET_TOPICS_EVENTS]=r,o===kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_EVENTS?t[kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_EVENTS]=k:t[kony.sdk.websocket.constants.WEBSOCKET_UNSUBSCRIBE_EVENTS]=k,JSON.stringify(t)},E=function(e,s){var o=null;return o=s===kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_EVENTS?e[kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_MODE]:e[kony.sdk.websocket.constants.WEBSOCKET_UNSUBSCRIBE_MODE],kony.sdk.isNullOrUndefined(o)?kony.sdk.websocket.constants.WEBSOCKET_MODE_PRIVATE:o.toLowerCase()===kony.sdk.websocket.constants.WEBSOCKET_MODE_PRIVATE||o.toLowerCase()===kony.sdk.websocket.constants.WEBSOCKET_MODE_PUBLIC?o.toLowerCase():void kony.sdk.logsdk.error(n+"segregatingEventModes:: "+kony.sdk.websocket.constants.INVALID_MODE_PROVIDED_MESSAGE)},d=function(){return!1!==s&&!1!==o},c=function(e){return!kony.sdk.isNullOrUndefined(e)};kony.sdk.prototype.setServerEventsCallbacks=function(k){if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(k))kony.sdk.logsdk.error(n+"setServerEventsCallbacks:: options are null or undefined");else{if(c(k.onFailureCallback))return o=!0,e=k.onFailureCallback,c(k.onEventCallback)?(s=!0,k.onCloseCallback||(k.onCloseCallback=null),void kony.sdk.websocket.setServerEventsCallbacks(k.onEventCallback,k.onFailureCallback,k.onCloseCallback)):(kony.sdk.logsdk.error(n+"subscribeServerEvents:: onEventCallback callback is null or undefined"),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"onEventCallback callback is null or undefined.",e));kony.sdk.logsdk.error(n+"setServerEventsCallbacks:: onFailureCallback callback is null or undefined")}},kony.sdk.prototype.subscribeServerEvents=function(s,o){if(d())return kony.sdk.util.isNullOrUndefinedOrEmptyObject(o)&&(o={}),kony.sdk.isNetworkAvailable()?kony.sdk.util.isNullOrUndefinedOrEmptyObject(s)?(kony.sdk.logsdk.error(n+"subscribeServerEvents:: Events to be subscribed for are null or undefined or empty."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Events to be subscribed are null or undefined or empty.",e)):void kony.sdk.claimsRefresh((function(){kony.sdk.logsdk.info(n+"subscribeServerEvents:: Generating websocket url");var k=kony.sdk.websocket.generateServerEventsURL();if(kony.sdk.isNullOrUndefined(k))kony.sdk.websocket.util.raiseError(n+"subscribeServerEvents:: Error in generating websocket url.");else{try{var d=E(o,kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_EVENTS);if(kony.sdk.isNullOrUndefined(d))return kony.sdk.logsdk.error(n+"subscribeServerEvents:: Event mode passed is not valid."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.INVALID_MODE_PROVIDED_MESSAGE,e);var S=r(s,d,kony.sdk.websocket.constants.WEBSOCKET_SUBSCRIBE_EVENTS);if(kony.sdk.isNullOrUndefined(S))return kony.sdk.logsdk.error(n+"subscribeServerEvents:: Event string passed is not valid."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.INVALID_EVENT_STRING_MESSAGE,e)}catch(s){return kony.sdk.logsdk.error(n+"subscribeServerEvents:: Error : ",s),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,s,e)}c(o.onSubscribeCallback)?kony.sdk.websocket.subscribeServerEvents(k,S,o.onSubscribeCallback,o):kony.sdk.websocket.subscribeServerEvents(k,S,null,o)}}),(function(s){kony.sdk.logsdk.error(n+"subscribeServerEvents::onFailure Error:",s),t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,s,e)})):(kony.sdk.logsdk.error(n+"subscribeServerEvents:: "+kony.sdk.websocket.constants.SERVER_EVENTS_NO_INTERNET_MESSAGE),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.SERVER_EVENTS_NO_INTERNET_MESSAGE,e));kony.sdk.logsdk.error(n+"subscribeServerEvents:: "+kony.sdk.websocket.constants.SERVER_EVENTS_CALLBACKS_ERROR_MESSAGE)},kony.sdk.prototype.unSubscribeServerEvents=function(s,o){if(d()){if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(o)&&(o={}),!kony.sdk.isNetworkAvailable())return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: "+kony.sdk.websocket.constants.SERVER_EVENTS_NO_INTERNET_MESSAGE),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.SERVER_EVENTS_NO_INTERNET_MESSAGE,e);if(kony.sdk.websocket&&!kony.sdk.websocket.isWebSocketAvailable())return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: "+kony.sdk.websocket.constants.SERVER_EVENTS_NOT_INITIALISED_MESSAGE),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.SERVER_EVENTS_NOT_INITIALISED_MESSAGE,e);var k,S=null;if(!kony.sdk.util.isNullOrUndefinedOrEmptyObject(o[kony.sdk.websocket.constants.UNSUBSCRIBE_OPTION_CLOSE_CONNECTION])){if(!0!==(k=o[kony.sdk.websocket.constants.UNSUBSCRIBE_OPTION_CLOSE_CONNECTION])&&!1!==k)return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: CloseConnection value type is invalid."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"CloseConnection value type is invalid.",e);if(o[kony.sdk.websocket.constants.UNSUBSCRIBE_OPTION_CLOSE_CONNECTION]===kony.sdk.websocket.constants.BOOLEAN_TRUE)return kony.sdk.logsdk.info(n+"unSubscribeServerEvents:: Closing the webSocket connection."),void kony.sdk.websocket.unSubscribeServerEvents(S,null,o)}if(kony.sdk.util.isNullOrUndefinedOrEmptyObject(s))return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: Events to be unsubscribed for are null or undefined or empty."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,"Events to be Unsubscribed are null or undefined or empty.",e);var i=E(o,kony.sdk.websocket.constants.WEBSOCKET_UNSUBSCRIBE_EVENTS);if(kony.sdk.isNullOrUndefined(i))return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: Event mode passed is not valid."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.INVALID_MODE_PROVIDED_MESSAGE,e);kony.sdk.claimsRefresh((function(){if(S=r(s,i,kony.sdk.websocket.constants.WEBSOCKET_UNSUBSCRIBE_EVENTS),kony.sdk.isNullOrUndefined(S))return kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: Event string passed is not valid."),void t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,kony.sdk.websocket.constants.INVALID_EVENT_STRING_MESSAGE,e);c(o.onUnsubscribeCallback)?kony.sdk.websocket.unSubscribeServerEvents(S,o.onUnsubscribeCallback,o):kony.sdk.websocket.unSubscribeServerEvents(S,null,o)}),(function(s){kony.sdk.logsdk.error(n+"unSubscribeServerEvents::onFailure Error:",s),t(kony.sdk.websocket.constants.WEBSOCKET_TYPE_ONERROR,s,e)}))}else kony.sdk.logsdk.error(n+"unSubscribeServerEvents:: "+kony.sdk.websocket.constants.SERVER_EVENTS_CALLBACKS_ERROR_MESSAGE)},initializeWebSocketConstants(),initializeWebSocketHandler(),initializeWebSocketManager(),initializeWebSocketResponseMessage(),initializeWebSocketResponseHandler()}"undefined"==typeof kony&&(kony={}),void 0===kony.sdk&&(kony.sdk={}),kony.serverEvents=!0;